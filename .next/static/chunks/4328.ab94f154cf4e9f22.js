"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4328],{24328:(e,r,o)=>{async function t(e,r,o,t,a,n,s){if(!o||!r){let e=localStorage.getItem("aiSettings");if(e){let i=JSON.parse(e);r=r||i.provider,o=o||i.apiKey,t=t||i.model,a=null!=a?a:i.temperature,n=null!=n?n:i.maxTokens,s=s||i.baseUrl}}if(!r)throw Error("Se requiere seleccionar un proveedor de IA. Por favor configura tus ajustes de IA en el men\xfa de usuario.");if(!o)throw Error("Se requiere una API key. Por favor configura tus ajustes de IA en el men\xfa de usuario.");if("string"!=typeof o||!o.trim())throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica que hayas ingresado una API key v\xe1lida en los ajustes de usuario.");o=o.trim();try{var i,c,l,d,u,m,p,h,g;switch(r){case"gemini":{let r=t||"gemini-2.0-flash",s=await fetch("https://generativelanguage.googleapis.com/v1beta/models/".concat(r,":generateContent?key=").concat(o),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],generationConfig:{temperature:a||.7,maxOutputTokens:n||2048}})});if(!s.ok){let e=await s.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===s.status)throw localStorage.removeItem("aiSettings"),Error("La API key de Google AI Studio no es v\xe1lida para el modelo ".concat(r,". Por favor, verifica que la API key tenga los permisos necesarios."));throw Error("Error de Gemini: ".concat((null==(m=e.error)?void 0:m.message)||"No se pudo generar el contenido"))}let p=await s.json();if(!(null==(u=p.candidates)||null==(d=u[0])||null==(l=d.content)||null==(c=l.parts)||null==(i=c[0])?void 0:i.text))throw Error("No se recibi\xf3 una respuesta v\xe1lida del servicio de IA");return p.candidates[0].content.parts[0].text}case"openai":{let r=t||"gpt-4o",s=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],temperature:a||.7,max_tokens:n||2048})});if(!s.ok){let e=await s.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===s.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de OpenAI en los ajustes de usuario.");throw Error("Error de OpenAI: ".concat((null==(p=e.error)?void 0:p.message)||"No se pudo generar el contenido"))}return(await s.json()).choices[0].message.content}case"anthropic":{let r=t||"claude-3-5-sonnet-20241022",s=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":o,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],max_tokens:n||2048,temperature:a||.7})});if(!s.ok){let e=await s.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===s.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de Anthropic en los ajustes de usuario.");throw Error("Error de Anthropic: ".concat((null==(h=e.error)?void 0:h.message)||"No se pudo generar el contenido"))}return(await s.json()).content[0].text}case"cohere":{let r=t||"command-r-plus",i=s||"https://api.cohere.ai/v1/generate",c=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({model:r,prompt:e,max_tokens:n||2048,temperature:a||.7})});if(!c.ok){let e=await c.json().catch(()=>({message:"Error desconocido"}));if(401===c.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de Cohere en los ajustes de usuario.");throw Error("Error de Cohere: ".concat(e.message||"No se pudo generar el contenido"))}return(await c.json()).generations[0].text}case"mistral":{let r=t||"mistral-large-latest",i=s||"https://api.mistral.ai/v1/chat/completions",c=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],max_tokens:n||2048,temperature:a||.7})});if(!c.ok){let e=await c.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===c.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de Mistral en los ajustes de usuario.");throw Error("Error de Mistral: ".concat((null==(g=e.error)?void 0:g.message)||"No se pudo generar el contenido"))}return(await c.json()).choices[0].message.content}default:throw Error("Proveedor de IA no soportado")}}catch(e){if(console.error("Error en generateScriptWithAI:",e),e.message.includes("API key"))throw e;throw Error("Error al conectar con el servicio de IA: ".concat(e.message,". Por favor verifica tu API key e int\xe9ntalo de nuevo."))}}o.d(r,{generateScriptWithAI:()=>t})}}]);