(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4225],{3192:(e,s,a)=>{"use strict";a.d(s,{ScriptsView:()=>L});var t=a(95155),r=a(12115),l=a(68991),n=a(90112),i=a(74143),c=a(69074),d=a(57434),o=a(38564),m=a(38443),x=a(36118);function u(e){let{scripts:s,onScriptSelect:a,selectedScript:r}=e,l=e=>{switch(e){case"draft":return"bg-yellow-500/20 text-yellow-700 dark:text-yellow-400";case"review":return"bg-blue-500/20 text-blue-700 dark:text-blue-400";case"final":return"bg-green-500/20 text-green-700 dark:text-green-400";default:return"bg-gray-500/20 text-gray-700 dark:text-gray-400"}};return(0,t.jsx)(n.F,{className:"h-[calc(100vh-300px)]",children:(0,t.jsx)("div",{className:"space-y-2 pr-4",children:s.map(e=>(0,t.jsxs)("div",{className:(0,i.cn)("border rounded-lg p-4 cursor-pointer transition-colors",(null==r?void 0:r.id)===e.id?"bg-accent":"hover:bg-accent/50"),onClick:()=>a(e),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.eventId?(0,t.jsx)(c.A,{className:"h-4 w-4 text-primary"}):(0,t.jsx)(d.A,{className:"h-4 w-4 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium line-clamp-1",children:e.title}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Updated ",(0,m.Y)(e.updatedAt)]})]})]}),e.aiGenerated&&(0,t.jsx)(o.A,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,t.jsx)(x.E,{variant:"secondary",className:(0,i.cn)("text-xs",l(e.status)),children:e.status}),e.category&&(0,t.jsx)(x.E,{variant:"outline",className:"text-xs",children:e.category})]})]},e.id))})})}var h=a(18949),j=a(59202),p=a(71961),v=a(2202),g=a(14186),f=a(56287),N=a(2775),w=a(53817),y=a(1842);function b(e){let{script:s,onEdit:a}=e,r=(e,s)=>{if(!s)return null;let a=(0,y.Pp)(s.content,e.content);return(0,t.jsx)("div",{className:"font-mono text-sm whitespace-pre-wrap",children:a.map((e,s)=>e.added?(0,t.jsx)("div",{className:"bg-green-500/20 text-green-700",children:e.value},s):e.removed?(0,t.jsx)("div",{className:"bg-red-500/20 text-red-700",children:e.value},s):(0,t.jsx)("div",{children:e.value},s))})};return(0,t.jsxs)("div",{className:"border rounded-lg",children:[(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:s.title}),s.aiGenerated&&(0,t.jsx)(o.A,{className:"h-5 w-5 text-yellow-500 fill-yellow-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(g.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Updated ",(0,m.Y)(s.updatedAt)]})]}),s.eventId&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Linked to event"})]})]})]}),(0,t.jsxs)(h.$,{onClick:()=>a(s),children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Edit Script"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[(0,t.jsx)(x.E,{variant:"secondary",className:"capitalize",children:s.status}),(0,t.jsx)(x.E,{variant:"outline",children:s.category}),s.tags.map(e=>(0,t.jsx)(x.E,{variant:"outline",children:e},e))]}),s.assignees&&s.assignees.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Assignees:"}),(0,t.jsx)("div",{className:"flex -space-x-2",children:s.assignees.map(e=>(0,t.jsxs)(v.eu,{className:"h-8 w-8 border-2 border-background",children:[(0,t.jsx)(v.BK,{src:e.avatarUrl}),(0,t.jsx)(v.q5,{children:e.name.charAt(0).toUpperCase()})]},e.id))})]})]}),(0,t.jsx)(j.w,{}),(0,t.jsxs)(p.tU,{defaultValue:"content",className:"p-6",children:[(0,t.jsxs)(p.j7,{children:[(0,t.jsxs)(p.Xi,{value:"content",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Content"]}),(0,t.jsxs)(p.Xi,{value:"versions",children:[(0,t.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Versions"]}),(0,t.jsxs)(p.Xi,{value:"metadata",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Metadata"]})]}),(0,t.jsx)(p.av,{value:"content",className:"mt-4",children:(0,t.jsx)(n.F,{className:"h-[400px] rounded-md border p-4",children:(0,t.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:s.content})})}),(0,t.jsx)(p.av,{value:"versions",className:"mt-4",children:(0,t.jsx)(n.F,{className:"h-[400px]",children:(0,t.jsx)("div",{className:"space-y-4",children:s.versions.map((e,a)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.eu,{className:"h-6 w-6",children:(0,t.jsx)(v.q5,{children:e.createdBy.name.charAt(0).toUpperCase()})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:e.createdBy.name}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,m.Y)(e.createdAt)})]}),(0,t.jsxs)(x.E,{variant:"outline",children:["v",s.versions.length-a]})]}),e.comment&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.comment}),(0,t.jsx)("div",{className:"text-sm",children:r(e,s.versions[a+1])})]},e.id))})})}),(0,t.jsx)(p.av,{value:"metadata",className:"mt-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[s.seoKeywords&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-2",children:"SEO Keywords"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:s.seoKeywords.map(e=>(0,t.jsx)(x.E,{variant:"secondary",children:e},e))})]}),s.platforms&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Target Platforms"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:s.platforms.map(e=>(0,t.jsx)(x.E,{variant:"outline",children:e},e))})]})]})})]})]})}var C=a(86371),S=a(47924),A=a(54416);function E(e){let{scripts:s,onFilter:a}=e,[l,n]=(0,r.useState)(""),[i,c]=(0,r.useState)("all"),[d,o]=(0,r.useState)([]),m=[...new Set(s.flatMap(e=>e.tags))];(0,r.useEffect)(()=>{a(s.filter(e=>{let s=""===l||e.title.toLowerCase().includes(l.toLowerCase())||e.content.toLowerCase().includes(l.toLowerCase()),a="all"===i||e.status===i,t=0===d.length||d.some(s=>e.tags.includes(s));return s&&a&&t}))},[l,i,d,s,a]);let u=e=>{o(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(S.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(C.p,{type:"search",placeholder:"Search scripts...",className:"pl-8",value:l,onChange:e=>n(e.target.value)})]}),(0,t.jsxs)(h.$,{variant:"outline",size:"sm",className:"h-10",onClick:()=>{n(""),c("all"),o([])},children:[(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Clear filters"]})]}),(0,t.jsx)(p.tU,{value:i,onValueChange:c,children:(0,t.jsxs)(p.j7,{className:"w-full justify-start overflow-auto",children:[(0,t.jsx)(p.Xi,{value:"all",children:"All"}),(0,t.jsx)(p.Xi,{value:"draft",children:"Draft"}),(0,t.jsx)(p.Xi,{value:"review",children:"Review"}),(0,t.jsx)(p.Xi,{value:"final",children:"Final"})]})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map(e=>(0,t.jsx)(x.E,{variant:d.includes(e)?"default":"outline",className:"cursor-pointer",onClick:()=>u(e),children:e},e))})]})}var I=a(59087),z=a(20125),k=a(90221),M=a(62177),B=a(71153),G=a(97859),R=a(94487),F=a(91385),V=a(9436),K=a(67624),P=a(53311),q=a(24328),O=a(33458),D=a(29419);let J=B.z.object({title:B.z.string().min(1,"El t\xedtulo es requerido"),description:B.z.string().optional(),content:B.z.string().min(1,"El contenido es requerido"),status:B.z.enum(["draft","review","final"]),category:B.z.string().min(1,"La categor\xeda es requerida"),tags:B.z.string(),platforms:B.z.string(),seoKeywords:B.z.string()});function T(e){let{script:s,onSave:a}=e,{toast:l}=(0,V.dj)(),[n,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)(!1),m=(0,M.mN)({resolver:(0,k.u)(J),defaultValues:{title:"",content:"",status:"draft",category:"",tags:"",platforms:"",seoKeywords:""}});(0,r.useEffect)(()=>{if(s){var e,a;m.reset({title:s.title,content:s.content,status:s.status,category:s.category,tags:s.tags.join(", "),platforms:(null==(e=s.platforms)?void 0:e.join(", "))||"",seoKeywords:(null==(a=s.seoKeywords)?void 0:a.join(", "))||""})}},[s,m]);let x=async()=>{let e=m.getValues("title"),s=m.getValues("category"),a=m.getValues("description");if(!e||!s)return void l({title:"Campos requeridos",description:"Por favor, ingresa el t\xedtulo y la categor\xeda antes de generar el guion",variant:"destructive"});if(!localStorage.getItem("aiSettings"))return void o(!0);c(!0);try{let t="Genera un guion detallado para ".concat(s,' con el t\xedtulo "').concat(e,'"').concat(a?" y la siguiente descripci\xf3n: ".concat(a):"",". El guion debe ser profesional, creativo y estar bien estructurado."),r=await (0,q.generateScriptWithAI)(t);m.setValue("content",r),l({title:"Guion generado",description:"Se ha generado un nuevo guion con IA"})}catch(e){l({title:"Error",description:e.message||"No se pudo generar el guion. Por favor, verifica tu configuraci\xf3n de IA.",variant:"destructive"})}finally{c(!1)}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(R.lV,{...m,children:(0,t.jsxs)("form",{onSubmit:m.handleSubmit(e=>{a({id:(null==s?void 0:s.id)||(0,i.v4)(),title:e.title,content:e.content,status:e.status,category:e.category,tags:e.tags.split(",").map(e=>e.trim()).filter(Boolean),platforms:e.platforms?e.platforms.split(",").map(e=>e.trim()).filter(Boolean):void 0,seoKeywords:e.seoKeywords?e.seoKeywords.split(",").map(e=>e.trim()).filter(Boolean):void 0,createdAt:(null==s?void 0:s.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),versions:[{id:(0,i.v4)(),content:e.content,createdAt:new Date().toISOString(),createdBy:{id:"1",name:"Demo User"},comment:s?"Actualizaci\xf3n del guion":"Versi\xf3n inicial"},...(null==s?void 0:s.versions)||[]],aiGenerated:(null==s?void 0:s.aiGenerated)||!1})}),className:"space-y-4",children:[(0,t.jsx)(R.zB,{control:m.control,name:"title",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"T\xedtulo"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(C.p,{placeholder:"T\xedtulo del guion",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(R.zB,{control:m.control,name:"status",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Estado"}),(0,t.jsxs)(F.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(R.MJ,{children:(0,t.jsx)(F.bq,{children:(0,t.jsx)(F.yv,{placeholder:"Seleccionar estado"})})}),(0,t.jsxs)(F.gC,{children:[(0,t.jsx)(F.eb,{value:"draft",children:"Borrador"}),(0,t.jsx)(F.eb,{value:"review",children:"Revisi\xf3n"}),(0,t.jsx)(F.eb,{value:"final",children:"Final"})]})]}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:m.control,name:"category",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Categor\xeda"}),(0,t.jsxs)(F.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(R.MJ,{children:(0,t.jsx)(F.bq,{children:(0,t.jsx)(F.yv,{placeholder:"Seleccionar categor\xeda"})})}),(0,t.jsxs)(F.gC,{children:[(0,t.jsx)(F.eb,{value:"Marketing",children:"Marketing"}),(0,t.jsx)(F.eb,{value:"Education",children:"Educaci\xf3n"}),(0,t.jsx)(F.eb,{value:"Entertainment",children:"Entretenimiento"}),(0,t.jsx)(F.eb,{value:"Social Media",children:"Redes Sociales"})]})]}),(0,t.jsx)(R.C5,{})]})}})]}),(0,t.jsx)(R.zB,{control:m.control,name:"content",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Contenido"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.$,{type:"button",variant:"outline",className:"w-full",onClick:x,disabled:n,children:[n?(0,t.jsx)(K.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(P.A,{className:"mr-2 h-4 w-4"}),n?"Generando...":"Generar con IA"]}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(G.T,{placeholder:"Escribe el contenido del guion aqu\xed...",className:"min-h-[400px] font-mono",...s})})]}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:m.control,name:"tags",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Etiquetas (separadas por comas)"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(C.p,{placeholder:"video, tutorial, producto",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:m.control,name:"platforms",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Plataformas (separadas por comas)"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(C.p,{placeholder:"YouTube, Instagram, TikTok",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:m.control,name:"seoKeywords",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Palabras clave SEO (separadas por comas)"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(C.p,{placeholder:"tutorial, c\xf3mo hacer, educaci\xf3n",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(h.$,{type:"submit",className:"w-full",children:s?"Actualizar Guion":"Crear Guion"})]})}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(O.A,{})}),(0,t.jsx)(D.g,{open:d,onOpenChange:o,onContinue:x})]})}var U=a(44625);function X(){let[e,s]=(0,r.useState)(l.j),[a,n]=(0,r.useState)(l.j),[i,c]=(0,r.useState)(null),[d,o]=(0,r.useState)(!1),{toast:m}=(0,V.dj)();(0,U.jv)();let x=(0,r.useCallback)(e=>{n(e)},[]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Biblioteca de Guiones"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Gestiona y organiza tus guiones de video y contenido."})]}),(0,t.jsxs)(h.$,{onClick:()=>{c(null),o(!0)},className:"gap-2",children:[(0,t.jsx)(I.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Nuevo Guion"})]})]}),(0,t.jsx)(E,{scripts:e,onFilter:x}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsx)(u,{scripts:a,onScriptSelect:e=>{c(e)},selectedScript:i})}),(0,t.jsx)("div",{className:"col-span-1 lg:col-span-2",children:i?(0,t.jsx)(b,{script:i,onEdit:e=>{c(e),o(!0)}}):(0,t.jsx)("div",{className:"border rounded-lg p-8 text-center text-muted-foreground",children:"Selecciona un guion para ver los detalles"})})]}),(0,t.jsx)(z.lG,{open:d,onOpenChange:o,children:(0,t.jsx)(z.Cf,{className:"sm:max-w-[800px]",children:(0,t.jsx)(T,{script:i,onSave:t=>{i?(s(e.map(e=>e.id===t.id?t:e)),n(a.map(e=>e.id===t.id?t:e))):(s([...e,t]),n([...a,t])),o(!1),c(null),m({title:i?"Guion actualizado":"Guion creado",description:"Se ha ".concat(i?"actualizado":"creado",' exitosamente "').concat(t.title,'"')})}})})})]})}function L(){return(0,U.jv)(),(0,t.jsx)(X,{})}},28475:(e,s,a)=>{Promise.resolve().then(a.bind(a,90866)),Promise.resolve().then(a.bind(a,3192))},38443:(e,s,a)=>{"use strict";a.d(s,{Y:()=>i});var t=a(19616),r=a(35135),l=a(86054),n=a(83013);function i(e){let s=new Date(e);return(0,t.c)(s)?"Today":(0,r.P)(s)?"Yesterday":(0,l.e)(s)?"Tomorrow":(0,n.GP)(s,"MMM d")}},94487:(e,s,a)=>{"use strict";a.d(s,{C5:()=>g,MJ:()=>p,Rr:()=>v,eI:()=>h,lR:()=>j,lV:()=>d,zB:()=>m});var t=a(95155),r=a(12115),l=a(99708),n=a(62177),i=a(74143),c=a(56201);let d=n.Op,o=r.createContext({}),m=e=>{let{...s}=e;return(0,t.jsx)(o.Provider,{value:{name:s.name},children:(0,t.jsx)(n.xI,{...s})})},x=()=>{let e=r.useContext(o),s=r.useContext(u),{getFieldState:a,formState:t}=(0,n.xW)(),l=a(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=s;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},u=r.createContext({}),h=r.forwardRef((e,s)=>{let{className:a,...l}=e,n=r.useId();return(0,t.jsx)(u.Provider,{value:{id:n},children:(0,t.jsx)("div",{ref:s,className:(0,i.cn)("space-y-2",a),...l})})});h.displayName="FormItem";let j=r.forwardRef((e,s)=>{let{className:a,...r}=e,{error:l,formItemId:n}=x();return(0,t.jsx)(c.J,{ref:s,className:(0,i.cn)(l&&"text-destructive",a),htmlFor:n,...r})});j.displayName="FormLabel";let p=r.forwardRef((e,s)=>{let{...a}=e,{error:r,formItemId:n,formDescriptionId:i,formMessageId:c}=x();return(0,t.jsx)(l.DX,{ref:s,id:n,"aria-describedby":r?"".concat(i," ").concat(c):"".concat(i),"aria-invalid":!!r,...a})});p.displayName="FormControl";let v=r.forwardRef((e,s)=>{let{className:a,...r}=e,{formDescriptionId:l}=x();return(0,t.jsx)("p",{ref:s,id:l,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",a),...r})});v.displayName="FormDescription";let g=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e,{error:n,formMessageId:c}=x(),d=n?String(null==n?void 0:n.message):r;return d?(0,t.jsx)("p",{ref:s,id:c,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",a),...l,children:d}):null});g.displayName="FormMessage"}},e=>{var s=s=>e(e.s=s);e.O(0,[5264,5105,3322,8483,4060,3226,2587,861,8745,3380,8794,6401,866,7075,8035,8441,1684,7358],()=>s(28475)),_N_E=e.O()}]);