(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7256],{1554:(e,s,a)=>{"use strict";a.d(s,{VideoEditor:()=>eq});var i=a(95155),t=a(12115),l=a(35695),r=a(18949),n=a(17471),c=a(71961),d=a(54073),o=a(74143);let m=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsxs)(d.bL,{ref:s,className:(0,o.cn)("relative flex w-full touch-none select-none items-center",a),...t,children:[(0,i.jsx)(d.CC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,i.jsx)(d.Q6,{className:"absolute h-full bg-primary"})}),(0,i.jsx)(d.zi,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});m.displayName=d.bL.displayName;var x=a(36118),h=a(59202),u=a(90112),j=a(2965),p=a(91027),f=a(93500),v=a(71539),g=a(5040),N=a(33127),b=a(69074),w=a(57434),y=a(53311),A=a(27213),C=a(34576),k=a(81497),z=a(87949),M=a(14395),R=a(42118),S=a(2925),E=a(71007),T=a(9803),V=a(13052),B=a(42355),D=a(381),P=a(91788),$=a(92657),F=a(78749),_=a(15273),L=a(9389),q=a(82178),J=a(85690),I=a(18979),Z=a(96675),W=a(6262),O=a(54481);let X=[{width:1920,height:1080,label:"Full HD (1920x1080)"},{width:1280,height:720,label:"HD (1280x720)"},{width:1080,height:1920,label:"Vertical 1080p (1080x1920)"},{width:720,height:1280,label:"Vertical 720p (720x1280)"},{width:1920,height:1080,label:"YouTube (1920x1080)"},{width:1080,height:1080,label:"Instagram Square (1080x1080)"},{width:1080,height:1920,label:"Instagram Stories (1080x1920)"},{width:1200,height:630,label:"Facebook Cover (1200x630)"},{width:1280,height:720,label:"Twitter Video (1280x720)"}],U=[24,25,30,50,60];var G=a(86371),H=a(30227),Q=a(99890),K=a(29869),Y=a(47924),ee=a(14186),es=a(95880),ea=a(96286),ei=a(62525),et=a(88334);function el(e){let{assets:s,onAssetsChange:a,onAddToTimeline:l}=e,[c,d]=(0,t.useState)(""),[o,m]=(0,t.useState)(null),[h,j]=(0,t.useState)("all"),p=(0,t.useRef)(null),f=s.filter(e=>{let s=e.name.toLowerCase().includes(c.toLowerCase()),a="all"===h||e.type===h;return s&&a}),v=e=>{let i=e.target.files;if(!i||0===i.length)return void console.log("No files selected");console.log("Files selected:",i.length);let t=[],l=0,r=i.length,n=()=>{l++,console.log("Processed ".concat(l,"/").concat(r," files")),l===r&&(console.log("All files processed, updating assets:",t),a([...s,...t]))};Array.from(i).forEach((e,s)=>{console.log("Processing file:",e.name,e.type);let a={id:"asset_".concat(Date.now(),"_").concat(s),name:e.name,type:g(e.type),url:URL.createObjectURL(e),duration:0,size:e.size,format:e.type,createdAt:new Date,thumbnail:null};if(t.push(a),"video"===a.type||"audio"===a.type){let s="video"===a.type?document.createElement("video"):document.createElement("audio");s.src=a.url,s.preload="metadata",s.onloadedmetadata=()=>{if(console.log("Metadata loaded for:",a.name,"duration:",s.duration),a.duration=s.duration,"audio"===a.type){var i;a.audioInfo={channels:(null==(i=s.audioTracks)?void 0:i.length)||2,sampleRate:44100,bitrate:Math.round(8*e.size/s.duration/1e3)}}n()},s.onerror=e=>{console.warn("Error loading ".concat(a.type,":"),a.name,e),n()},setTimeout(()=>{l<r&&(console.warn("Timeout loading metadata for:",a.name),n())},5e3)}else console.log("Image file processed:",a.name),n()}),p.current&&(p.current.value="")},g=e=>e.startsWith("video/")?"video":e.startsWith("audio/")?"audio":e.startsWith("image/")?"image":"video",N=e=>{switch(e){case"video":return T.A;case"audio":return H.A;case"image":return A.A;default:return Q.A}},b=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},w=e=>{if(!e||0===e)return"--:--";let s=Math.floor(e/60),a=Math.floor(e%60);return"".concat(s,":").concat(a.toString().padStart(2,"0"))},y=e=>{a(s.filter(s=>s.id!==e)),(null==o?void 0:o.id)===e&&m(null)};return(0,i.jsxs)("div",{className:"h-full flex flex-col",children:[(0,i.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h3",{className:"font-medium",children:"Biblioteca de Medios"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(r.$,{size:"sm",onClick:()=>{var e;return null==(e=p.current)?void 0:e.click()},children:[(0,i.jsx)(K.A,{className:"w-4 h-4 mr-2"}),"Subir"]}),(0,i.jsxs)(r.$,{onClick:()=>{let e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="audio/*",e.onchange=v,e.click()},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,i.jsx)(H.A,{className:"w-4 h-4"}),"Solo Audio"]}),(0,i.jsxs)(r.$,{onClick:()=>{let e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="video/*",e.onchange=v,e.click()},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,i.jsx)(T.A,{className:"w-4 h-4"}),"Solo Video"]})]})]}),(0,i.jsxs)("div",{className:"relative mb-4",children:[(0,i.jsx)(Y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,i.jsx)(G.p,{placeholder:"Buscar archivos...",value:c,onChange:e=>d(e.target.value),className:"pl-10 bg-muted border-border"})]}),(0,i.jsx)("div",{className:"flex space-x-2",children:[{id:"all",label:"Todos",icon:Q.A},{id:"video",label:"Videos",icon:T.A},{id:"audio",label:"Audio",icon:H.A},{id:"image",label:"Im\xe1genes",icon:A.A}].map(e=>(0,i.jsxs)(r.$,{variant:h===e.id?"default":"ghost",size:"sm",onClick:()=>j(e.id),children:[(0,i.jsx)(e.icon,{className:"w-4 h-4 mr-1"}),e.label]},e.id))})]}),(0,i.jsx)(u.F,{className:"flex-1",children:(0,i.jsx)("div",{className:"p-4",children:0===f.length?(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)(K.A,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,i.jsx)("p",{className:"text-muted-foreground mb-2",children:c?"No se encontraron archivos":"No hay archivos en la biblioteca"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:c?"Intenta con otros t\xe9rminos de b\xfasqueda":"Sube archivos para comenzar"}),!c&&(0,i.jsxs)(r.$,{onClick:()=>{var e;return null==(e=p.current)?void 0:e.click()},children:[(0,i.jsx)(K.A,{className:"w-4 h-4 mr-2"}),"Subir Archivos"]})]}):(0,i.jsx)("div",{className:"grid grid-cols-1 gap-3",children:f.map(e=>{let s=N(e.type);return(0,i.jsx)(n.Zp,{className:"cursor-pointer transition-colors hover:bg-muted ".concat((null==o?void 0:o.id)===e.id?"ring-2 ring-primary bg-muted":"bg-card"),onClick:()=>m(e),children:(0,i.jsx)(n.Wu,{className:"p-3",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-muted rounded flex items-center justify-center flex-shrink-0",children:e.thumbnail?(0,i.jsx)("img",{src:e.thumbnail,alt:e.name,className:"w-full h-full object-cover rounded"}):(0,i.jsx)(s,{className:"w-6 h-6 text-muted-foreground"})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"font-medium text-sm truncate",children:e.name}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,i.jsx)(x.E,{variant:"secondary",className:"text-xs",children:e.type.toUpperCase()}),e.duration>0&&(0,i.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,i.jsx)(ee.A,{className:"w-3 h-3 mr-1"}),w(e.duration)]}),(0,i.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,i.jsx)(es.A,{className:"w-3 h-3 mr-1"}),b(e.size)]})]}),"audio"===e.type&&e.audioInfo&&(0,i.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{children:[e.audioInfo.channels," canales"]}),(0,i.jsx)("span",{children:"•"}),(0,i.jsxs)("span",{children:[e.audioInfo.bitrate," kbps"]}),(0,i.jsx)("span",{children:"•"}),(0,i.jsxs)("span",{children:[(e.audioInfo.sampleRate/1e3).toFixed(1)," kHz"]})]})})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,i.jsx)(r.$,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),l(e)},title:"Agregar a timeline",children:(0,i.jsx)(J.A,{className:"w-4 h-4"})}),(0,i.jsxs)(et.rI,{children:[(0,i.jsx)(et.ty,{asChild:!0,children:(0,i.jsx)(r.$,{size:"sm",variant:"ghost",onClick:e=>e.stopPropagation(),children:(0,i.jsx)(ea.A,{className:"w-4 h-4"})})}),(0,i.jsxs)(et.SQ,{children:[(0,i.jsxs)(et._2,{onClick:()=>l(e),children:[(0,i.jsx)(J.A,{className:"w-4 h-4 mr-2"}),"Agregar a Timeline"]}),(0,i.jsxs)(et._2,{children:[(0,i.jsx)(P.A,{className:"w-4 h-4 mr-2"}),"Descargar"]}),(0,i.jsxs)(et._2,{onClick:()=>y(e.id),className:"text-red-400",children:[(0,i.jsx)(ei.A,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})]})]})]})})},e.id)})})})}),o&&(0,i.jsxs)("div",{className:"border-t border-border p-4",children:[(0,i.jsx)("h4",{className:"font-medium mb-2",children:"Detalles del Archivo"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-muted-foreground",children:"Nombre:"}),(0,i.jsx)("span",{className:"truncate ml-2",children:o.name})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-muted-foreground",children:"Tipo:"}),(0,i.jsx)("span",{children:o.type.toUpperCase()})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-muted-foreground",children:"Tama\xf1o:"}),(0,i.jsx)("span",{children:b(o.size)})]}),o.duration>0&&(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-muted-foreground",children:"Duraci\xf3n:"}),(0,i.jsx)("span",{children:w(o.duration)})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-muted-foreground",children:"Formato:"}),(0,i.jsx)("span",{children:o.format})]})]})]}),(0,i.jsx)("input",{ref:p,type:"file",multiple:!0,accept:"video/*,audio/*,image/*",onChange:v,className:"hidden"})]})}var er=a(84616),en=a(48021),ec=a(32919),ed=a(39184),eo=a(24357);function em(e){let{project:s,timeline:a,onTimelineChange:l,onProjectChange:n}=e,[c,d]=(0,t.useState)(null),[o,m]=(0,t.useState)(0),h=(0,t.useRef)(null),j=(0,t.useRef)(null),f=50*a.zoom,v=s.tracks.flatMap(e=>e.clips.map(e=>(e.startTime||0)+(e.duration||0))).filter(e=>!isNaN(e)),g=Math.max(s.duration||0,...v,60),N=(e,s)=>{s.stopPropagation(),d(e);let a=s.currentTarget.getBoundingClientRect();m(s.clientX-a.left)},b=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=s?a.selectedClips.includes(e)?a.selectedClips.filter(s=>s!==e):[...a.selectedClips,e]:[e];l({...a,selectedClips:i})},w=e=>{let a=s.tracks.map(s=>s.id===e?{...s,isVisible:!s.isVisible}:s);n({...s,tracks:a})},y=e=>{let a=s.tracks.map(s=>s.id===e?{...s,isLocked:!s.isLocked}:s);n({...s,tracks:a})},A=e=>{let a={id:"".concat(e,"_track_").concat(Date.now()),type:e,name:"".concat("video"===e?"Video":"Audio"," ").concat(s.tracks.filter(s=>s.type===e).length+1),clips:[],isVisible:!0,isLocked:!1,order:s.tracks.length,..."audio"===e&&{volume:100}};n({...s,tracks:[...s.tracks,a]})},C=e=>{let i=s.tracks.map(s=>({...s,clips:s.clips.filter(s=>s.id!==e)}));n({...s,tracks:i}),l({...a,selectedClips:a.selectedClips.filter(s=>s!==e)})},k=e=>{let a={...e,id:"clip_".concat(Date.now()),startTime:e.startTime+e.duration},i=s.tracks.map(s=>s.clips.some(s=>s.id===e.id)?{...s,clips:[...s.clips,a]}:s);n({...s,tracks:i})},z=(()=>{let e=[],s=a.zoom>2?1:a.zoom>1?5:10;for(let a=0;a<=g;a+=s)e.push({time:a,position:a*f,label:"".concat(Math.floor(a/60),":").concat((a%60).toFixed(0).padStart(2,"0"))});return e})();return(0,i.jsxs)("div",{className:"h-full flex flex-col bg-card",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-2 border-b border-border",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("h3",{className:"font-medium text-sm",children:"Timeline"}),(0,i.jsxs)(x.E,{variant:"outline",className:"text-xs",children:[a.zoom.toFixed(1),"x"]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,i.jsxs)(r.$,{size:"sm",variant:"ghost",onClick:()=>A("video"),title:"Agregar pista de video",children:[(0,i.jsx)(er.A,{className:"w-4 h-4"}),"Video"]}),(0,i.jsxs)(r.$,{size:"sm",variant:"ghost",onClick:()=>A("audio"),title:"Agregar pista de audio",children:[(0,i.jsx)(er.A,{className:"w-4 h-4"}),"Audio"]})]})]}),(0,i.jsxs)("div",{className:"flex-1 flex",children:[(0,i.jsxs)("div",{className:"w-48 bg-background border-r border-border",children:[(0,i.jsx)("div",{className:"h-8 border-b border-border bg-card"}),(0,i.jsx)(u.F,{className:"h-full",children:s.tracks.map(e=>(0,i.jsxs)("div",{className:"h-15 border-b border-border p-2 flex items-center justify-between",style:{height:60},children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[(0,i.jsx)(en.A,{className:"w-4 h-4 text-muted-foreground cursor-move"}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"text-sm font-medium truncate",children:e.name}),(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.clips.length," clip",1!==e.clips.length?"s":""]})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,i.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>w(e.id),title:e.isVisible?"Ocultar":"Mostrar",children:e.isVisible?(0,i.jsx)($.A,{className:"w-4 h-4"}):(0,i.jsx)(F.A,{className:"w-4 h-4"})}),(0,i.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>y(e.id),title:e.isLocked?"Desbloquear":"Bloquear",children:e.isLocked?(0,i.jsx)(ec.A,{className:"w-4 h-4"}):(0,i.jsx)(ed.A,{className:"w-4 h-4"})}),"audio"===e.type&&(0,i.jsx)(r.$,{size:"sm",variant:"ghost",title:"Volumen",children:(0,i.jsx)(_.A,{className:"w-4 h-4"})})]})]},e.id))})]}),(0,i.jsxs)("div",{className:"flex-1 relative overflow-hidden",children:[(0,i.jsx)("div",{className:"h-8 bg-card border-b border-border relative",style:{height:30},children:(0,i.jsx)("div",{className:"relative h-full",children:z.map(e=>(0,i.jsxs)("div",{className:"absolute top-0 h-full flex flex-col justify-center",style:{left:e.position},children:[(0,i.jsx)("div",{className:"w-px h-full bg-border"}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground absolute top-1 left-1",children:e.label})]},e.time))})}),(0,i.jsx)(u.F,{className:"h-full",children:(0,i.jsxs)("div",{ref:h,className:"relative cursor-pointer",onClick:e=>{if(!h.current)return;let s=h.current.getBoundingClientRect(),i=Math.max(0,(e.clientX-s.left)/f);l({...a,currentTime:Math.min(i,g)})},onMouseMove:c?e=>{if(!c||!h.current)return;let i=h.current.getBoundingClientRect(),t=Math.max(0,(e.clientX-i.left-o)/f),l=a.snapToGrid?Math.round(t):t,r=s.tracks.map(e=>({...e,clips:e.clips.map(e=>e.id===c.id?{...e,startTime:l}:e)}));n({...s,tracks:r})}:void 0,onMouseUp:()=>{d(null),m(0)},style:{width:Math.max(800,g*f)},children:[s.tracks.map(e=>(0,i.jsxs)("div",{className:"border-b border-border relative",style:{height:60},children:[(0,i.jsx)("div",{className:"w-full h-full ".concat("video"===e.type?"bg-blue-900/20":"bg-green-900/20"," ").concat(e.isVisible?"":"opacity-50")}),e.clips.map(s=>{let t=s.duration*f,l=s.startTime*f,n=a.selectedClips.includes(s.id);return(0,i.jsxs)("div",{className:"absolute top-1 h-14 rounded cursor-move border-2 ".concat(n?"border-blue-400 bg-blue-600":"video"===e.type?"border-blue-500 bg-blue-500":"border-green-500 bg-green-500"," ").concat(e.isLocked?"cursor-not-allowed opacity-50":""),style:{left:l,width:Math.max(t,20),height:52},onMouseDown:a=>!e.isLocked&&N(s,a),onClick:e=>{e.stopPropagation(),b(s.id,e.ctrlKey||e.metaKey)},children:[(0,i.jsxs)("div",{className:"p-2 h-full flex flex-col justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-xs font-medium text-white truncate",children:s.name}),(0,i.jsxs)(et.rI,{children:[(0,i.jsx)(et.ty,{asChild:!0,children:(0,i.jsx)(r.$,{size:"sm",variant:"ghost",className:"h-4 w-4 p-0 text-white hover:bg-white/20",onClick:e=>e.stopPropagation(),children:(0,i.jsx)(ea.A,{className:"w-3 h-3"})})}),(0,i.jsxs)(et.SQ,{children:[(0,i.jsxs)(et._2,{onClick:()=>k(s),children:[(0,i.jsx)(eo.A,{className:"w-4 h-4 mr-2"}),"Duplicar"]}),(0,i.jsxs)(et._2,{children:[(0,i.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Cortar"]}),(0,i.jsxs)(et._2,{onClick:()=>C(s.id),className:"text-red-400",children:[(0,i.jsx)(ei.A,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})]})]}),(0,i.jsxs)("div",{className:"text-xs text-white/70",children:[Math.floor(s.duration),"s"]})]}),!e.isLocked&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute left-0 top-0 w-2 h-full cursor-ew-resize bg-white/20"}),(0,i.jsx)("div",{className:"absolute right-0 top-0 w-2 h-full cursor-ew-resize bg-white/20"})]})]},s.id)})]},e.id)),(0,i.jsx)("div",{ref:j,className:"absolute top-0 w-0.5 bg-red-500 z-10 pointer-events-none",style:{left:a.currentTime*f,height:60*s.tracks.length+30},children:(0,i.jsx)("div",{className:"w-3 h-3 bg-red-500 -translate-x-1/2 -translate-y-1"})})]})})]})]})]})}var ex=a(54653),eh=a(22580),eu=a(57918),ej=a(9771);function ep(e){let{project:s,currentTime:a,isPlaying:l,onTimeUpdate:n}=e,c=(0,t.useRef)(null),d=(0,t.useRef)(null),o=(0,t.useRef)(),h=(0,t.useRef)(0),[u,j]=(0,t.useState)(100),[p,f]=(0,t.useState)(!1),[v,g]=(0,t.useState)(1),[N,b]=(0,t.useState)(!1),[w,y]=(0,t.useState)(!1),[A,C]=(0,t.useState)({width:0,height:0}),[k,z]=(0,t.useState)(new Map),M=(0,t.useRef)(new Map),R=(0,t.useRef)(new Set);(0,t.useEffect)(()=>{let e,a;if(!d.current)return;let i=d.current.getBoundingClientRect(),t=s.resolution.width/s.resolution.height,l=Math.max(i.width-100,400),r=Math.max(i.height-100,300);(a=(e=l)/t)>r&&(e=(a=r)*t),C({width:e=Math.min(e,800),height:a=Math.min(a,500)})},[s.resolution]);let S=(0,t.useRef)(l),E=(0,t.useRef)(a),T=(0,t.useRef)(s),V=(0,t.useRef)(N),B=(0,t.useRef)(w),D=(0,t.useRef)(k),P=(0,t.useRef)(n);(0,t.useEffect)(()=>{S.current=l},[l]),(0,t.useEffect)(()=>{E.current=a},[a]),(0,t.useEffect)(()=>{T.current=s},[s]),(0,t.useEffect)(()=>{V.current=N},[N]),(0,t.useEffect)(()=>{B.current=w},[w]),(0,t.useEffect)(()=>{D.current=k},[k]),(0,t.useEffect)(()=>{P.current=n},[n]),(0,t.useEffect)(()=>{let e=0,s=0,a=i=>{if(S.current&&i-e>=41.666666666666664){let s=(i-h.current)/1e3;if(h.current=i,s>0&&s<.1){let e=E.current+s;e<=T.current.duration?P.current(e):P.current(0)}e=i}else S.current||(h.current=i);if(c.current&&i-s>=83.33333333333333){let e=c.current,a=e.getContext("2d");if(a){var t,l,r;if(null==(t=a.getContextAttributes())?void 0:t.willReadFrequently)a.clearRect(0,0,e.width,e.height),a.fillStyle=(null==(r=T.current.settings)?void 0:r.backgroundColor)||"#000000",a.fillRect(0,0,e.width,e.height),T.current.tracks.forEach(e=>{e.isVisible&&e.clips.forEach(e=>{let s=e.startTime||0,i=s+(e.duration||0);E.current>=s&&E.current<i&&$(a,e,E.current-s)})}),V.current&&F(a,e.width,e.height),B.current&&L(a,e.width,e.height);else{let s=e.getContext("2d",{willReadFrequently:!0});s&&(s.clearRect(0,0,e.width,e.height),s.fillStyle=(null==(l=T.current.settings)?void 0:l.backgroundColor)||"#000000",s.fillRect(0,0,e.width,e.height),T.current.tracks.forEach(e=>{e.isVisible&&e.clips.forEach(e=>{let a=e.startTime||0,i=a+(e.duration||0);E.current>=a&&E.current<i&&$(s,e,E.current-a)})}),V.current&&F(s,e.width,e.height),B.current&&L(s,e.width,e.height))}}s=i}o.current=requestAnimationFrame(a)};return o.current=requestAnimationFrame(a),()=>{o.current&&cancelAnimationFrame(o.current)}},[]);let $=(e,s,a)=>{if("video"===s.type||"image"===s.type){let i="".concat(s.source,"_").concat(s.type),t=M.current.get(i);if(!t){if("video"===s.type){let e=document.createElement("video");e.src=s.source,e.muted=!0,e.crossOrigin="anonymous",e.preload="metadata",e.playsInline=!0,M.current.set(i,e),e.addEventListener("loadeddata",()=>{}),e.addEventListener("error",()=>{R.current.add(i)}),e.load(),t=e}else{let e=document.createElement("img");e.src=s.source,e.crossOrigin="anonymous",M.current.set(i,e),e.addEventListener("load",()=>{}),e.addEventListener("error",()=>{R.current.add(i)}),t=e}let{x:a=0,y:l=0,width:r=e.canvas.width,height:n=e.canvas.height}=s.position||{};e.fillStyle="#1a1a1a",e.fillRect(a,l,r,n);return}if(R.current.has(i)){let{x:a=0,y:i=0,width:t=e.canvas.width,height:l=e.canvas.height}=s.position||{};e.fillStyle="#2a2a2a",e.fillRect(a,i,t,l);return}if(t instanceof HTMLImageElement?t.complete&&t.naturalWidth>0:t.readyState>=2){if(t instanceof HTMLVideoElement){let e=Math.max(0,Math.min(a+(s.trimStart||0),t.duration||0));Math.abs(t.currentTime-e)>.15&&(t.currentTime=e)}let{x:i=0,y:l=0,width:r=e.canvas.width,height:n=e.canvas.height}=s.position||{};e.save();try{e.drawImage(t,i,l,r,n)}catch(s){e.fillStyle="#1a1a1a",e.fillRect(i,l,r,n)}finally{e.restore()}}else{let{x:a=0,y:i=0,width:t=e.canvas.width,height:l=e.canvas.height}=s.position||{};e.fillStyle="#1a1a1a",e.fillRect(a,i,t,l)}}else if("audio"===s.type)return;else if("text"===s.type){var i,t,l;let{x:a=50,y:r=50}=s.position||{};e.save(),e.fillStyle=(null==(i=s.style)?void 0:i.color)||"#ffffff",e.font="".concat((null==(t=s.style)?void 0:t.fontSize)||24,"px ").concat((null==(l=s.style)?void 0:l.fontFamily)||"Arial"),e.fillText(s.content||"Texto",a,r),e.restore()}},F=(e,s,a)=>{e.strokeStyle="rgba(255, 255, 255, 0.3)",e.lineWidth=1;for(let i=0;i<=s;i+=50)e.beginPath(),e.moveTo(i,0),e.lineTo(i,a),e.stroke();for(let i=0;i<=a;i+=50)e.beginPath(),e.moveTo(0,i),e.lineTo(s,i),e.stroke()},L=(e,s,a)=>{let i=.8*s,t=.8*a;e.strokeStyle="rgba(255, 255, 0, 0.8)",e.lineWidth=2,e.setLineDash([5,5]),e.strokeRect((s-i)/2,(a-t)/2,i,t),e.setLineDash([])};return(0,i.jsxs)("div",{ref:d,className:"h-full flex flex-col bg-black relative",children:[(0,i.jsxs)("div",{className:"absolute top-4 right-4 z-10 flex flex-col space-y-2",children:[(0,i.jsxs)("div",{className:"bg-black/50 rounded-lg p-2 flex items-center space-x-2",children:[(0,i.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>g(e=>Math.max(e-.1,.1)),children:(0,i.jsx)(W.A,{className:"w-4 h-4"})}),(0,i.jsxs)("span",{className:"text-white text-sm min-w-[50px] text-center",children:[Math.round(100*v),"%"]}),(0,i.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>g(e=>Math.min(e+.1,3)),children:(0,i.jsx)(O.A,{className:"w-4 h-4"})}),(0,i.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>g(1),children:(0,i.jsx)(I.A,{className:"w-4 h-4"})})]}),(0,i.jsxs)("div",{className:"bg-black/50 rounded-lg p-2 flex flex-col space-y-1",children:[(0,i.jsx)(r.$,{size:"sm",variant:N?"default":"ghost",onClick:()=>b(!N),title:"Mostrar grilla",children:(0,i.jsx)(ex.A,{className:"w-4 h-4"})}),(0,i.jsx)(r.$,{size:"sm",variant:w?"default":"ghost",onClick:()=>y(!w),title:"Mostrar zonas seguras",children:(0,i.jsx)(eh.A,{className:"w-4 h-4"})}),(0,i.jsx)(r.$,{size:"sm",variant:"ghost",title:"Pantalla completa",children:(0,i.jsx)(eu.A,{className:"w-4 h-4"})})]})]}),(0,i.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,i.jsxs)("div",{className:"bg-black/50 rounded-lg p-2 flex items-center space-x-2",children:[(0,i.jsx)(x.E,{variant:"secondary",children:s.resolution.label}),(0,i.jsxs)(x.E,{variant:"outline",children:[s.frameRate,"fps"]}),(0,i.jsxs)(x.E,{variant:"outline",children:[Math.floor(a/60),":",(a%60).toFixed(0).padStart(2,"0")]})]})}),(0,i.jsx)("div",{className:"flex-1 flex items-center justify-center p-8 bg-gray-900",children:(0,i.jsxs)("div",{className:"relative border-2 border-gray-600 rounded-lg shadow-2xl bg-black overflow-hidden",style:{transform:"scale(".concat(v,")"),transformOrigin:"center",width:A.width,height:A.height},children:[(0,i.jsx)("canvas",{ref:c,width:s.resolution.width,height:s.resolution.height,style:{width:"100%",height:"100%",display:"block"},className:"cursor-crosshair",onClick:e=>{if(!c.current)return;let s=c.current.getBoundingClientRect();e.clientX,s.left,e.clientY,s.top}}),(0,i.jsxs)("div",{className:"absolute bottom-2 left-2 bg-background/70 rounded px-2 py-1 text-xs text-foreground",children:[s.resolution.width," \xd7 ",s.resolution.height]})]})}),(0,i.jsx)("div",{className:"absolute bottom-4 right-4 z-10",children:(0,i.jsxs)("div",{className:"bg-black/50 rounded-lg p-2 flex items-center space-x-2",children:[(0,i.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>f(!p),children:p||0===u?(0,i.jsx)(ej.A,{className:"w-4 h-4"}):(0,i.jsx)(_.A,{className:"w-4 h-4"})}),(0,i.jsx)("div",{className:"w-20",children:(0,i.jsx)(m,{value:[p?0:u],onValueChange:e=>{let[s]=e;j(s),s>0&&f(!1)},max:100,step:1,className:"w-full"})}),(0,i.jsxs)("span",{className:"text-white text-xs min-w-[30px]",children:[p?0:u,"%"]})]})}),0===s.tracks.length&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center text-white/70",children:[(0,i.jsx)(J.A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,i.jsx)("p",{className:"text-lg mb-2",children:"Vista Previa"}),(0,i.jsx)("p",{className:"text-sm",children:"Agrega clips a la timeline para ver la vista previa"})]})})]})}var ef=a(62098),ev=a(12102),eg=a(48691),eN=a(84355),eb=a(93509),ew=a(9428),ey=a(7574),eA=a(40133),eC=a(99424),ek=a(41066),ez=a(97207);function eM(e){let s,{selectedClips:a,onApplyEffect:l}=e,[d,o]=(0,t.useState)(""),[h,f]=(0,t.useState)("all"),[g,b]=(0,t.useState)("effects"),w={color:{name:"Color",icon:N.A,effects:[{id:"brightness",name:"Brillo",icon:ef.A,description:"Ajusta el brillo del video"},{id:"contrast",name:"Contraste",icon:ev.A,description:"Modifica el contraste"},{id:"saturation",name:"Saturaci\xf3n",icon:eg.A,description:"Intensidad de colores"},{id:"hue",name:"Matiz",icon:N.A,description:"Cambia el tono de color"},{id:"sepia",name:"Sepia",icon:eN.A,description:"Efecto vintage sepia"},{id:"grayscale",name:"Escala de Grises",icon:eb.A,description:"Convierte a blanco y negro"}]},blur:{name:"Desenfoque",icon:ew.A,effects:[{id:"gaussian_blur",name:"Desenfoque Gaussiano",icon:ew.A,description:"Desenfoque suave"},{id:"motion_blur",name:"Desenfoque de Movimiento",icon:ey.A,description:"Simula movimiento r\xe1pido"},{id:"radial_blur",name:"Desenfoque Radial",icon:$.A,description:"Desenfoque desde el centro"},{id:"zoom_blur",name:"Desenfoque de Zoom",icon:O.A,description:"Efecto de zoom din\xe1mico"}]},distortion:{name:"Distorsi\xf3n",icon:j.A,effects:[{id:"fisheye",name:"Ojo de Pez",icon:$.A,description:"Distorsi\xf3n esf\xe9rica"},{id:"wave",name:"Ondas",icon:eg.A,description:"Distorsi\xf3n ondulada"},{id:"twist",name:"Torsi\xf3n",icon:eA.A,description:"Efecto de torsi\xf3n"},{id:"pinch",name:"Pellizco",icon:j.A,description:"Compresi\xf3n central"}]},artistic:{name:"Art\xedstico",icon:y.A,effects:[{id:"oil_painting",name:"Pintura al \xd3leo",icon:N.A,description:"Efecto de pintura"},{id:"cartoon",name:"Caricatura",icon:eC.A,description:"Estilo de dibujo animado"},{id:"sketch",name:"Boceto",icon:p.A,description:"Efecto de dibujo a l\xe1piz"},{id:"vintage",name:"Vintage",icon:ek.A,description:"Efecto retro"},{id:"neon",name:"Ne\xf3n",icon:v.A,description:"Bordes brillantes"},{id:"glitch",name:"Glitch",icon:v.A,description:"Efecto de error digital"}]}},A=(e,s)=>{if(0===a.length)return void alert("Selecciona al menos un clip para aplicar el efecto");l({id:"effect_".concat(Date.now()),type:e,name:s,parameters:{},enabled:!0})},C=[{id:"reverb",name:"Reverb",icon:H.A,description:"A\xf1ade eco y ambiente"},{id:"echo",name:"Eco",icon:_.A,description:"Repetici\xf3n del sonido"},{id:"distortion",name:"Distorsi\xf3n",icon:v.A,description:"Distorsiona el audio"},{id:"pitch_shift",name:"Cambio de Tono",icon:ez.A,description:"Modifica la altura del sonido"},{id:"noise_reduction",name:"Reducci\xf3n de Ruido",icon:_.A,description:"Elimina ruido de fondo"},{id:"normalize",name:"Normalizar",icon:_.A,description:"Ajusta el volumen"}],k=(s=[],Object.entries(w).forEach(e=>{let[a,i]=e;("all"===h||h===a)&&(s=[...s,...i.effects.map(e=>({...e,category:a}))])}),d&&(s=s.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())||e.description.toLowerCase().includes(d.toLowerCase()))),s);return(0,i.jsxs)("div",{className:"h-full flex flex-col",children:[(0,i.jsxs)(c.tU,{value:g,onValueChange:b,className:"h-full",children:[(0,i.jsxs)(c.j7,{className:"grid w-full grid-cols-3 bg-muted mx-4 mt-4",children:[(0,i.jsx)(c.Xi,{value:"effects",children:"Efectos"}),(0,i.jsx)(c.Xi,{value:"transitions",children:"Transiciones"}),(0,i.jsx)(c.Xi,{value:"audio",children:"Audio"})]}),(0,i.jsx)(c.av,{value:"effects",className:"flex-1 mt-0",children:(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsxs)("div",{className:"relative mb-4",children:[(0,i.jsx)(Y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,i.jsx)(G.p,{placeholder:"Buscar efectos...",value:d,onChange:e=>o(e.target.value),className:"pl-10 bg-muted border-border"})]}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,i.jsx)(r.$,{size:"sm",variant:"all"===h?"default":"ghost",onClick:()=>f("all"),children:"Todos"}),Object.entries(w).map(e=>{let[s,a]=e;return(0,i.jsxs)(r.$,{size:"sm",variant:h===s?"default":"ghost",onClick:()=>f(s),children:[(0,i.jsx)(a.icon,{className:"w-4 h-4 mr-1"}),a.name]},s)})]}),a.length>0&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-blue-900/20 border border-blue-500/30 rounded",children:(0,i.jsxs)("p",{className:"text-sm text-blue-300",children:[a.length," clip",1!==a.length?"s":""," seleccionado",1!==a.length?"s":""]})}),(0,i.jsx)(u.F,{className:"h-96",children:(0,i.jsx)("div",{className:"grid grid-cols-1 gap-3",children:k.map(e=>{let s=e.icon;return(0,i.jsx)(n.Zp,{className:"bg-card hover:bg-muted transition-colors",children:(0,i.jsx)(n.Wu,{className:"p-3",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-muted rounded flex items-center justify-center",children:(0,i.jsx)(s,{className:"w-5 h-5 text-blue-400"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-sm",children:e.name}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description}),(0,i.jsx)(x.E,{variant:"outline",className:"text-xs mt-1",children:w[e.category].name})]})]}),(0,i.jsx)(r.$,{size:"sm",onClick:()=>A(e.id,e.name),disabled:0===a.length,children:"Aplicar"})]})})},e.id)})})})]})}),(0,i.jsx)(c.av,{value:"transitions",className:"flex-1 mt-0",children:(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("h3",{className:"font-medium mb-4",children:"Transiciones"}),(0,i.jsx)(u.F,{className:"h-96",children:(0,i.jsx)("div",{className:"space-y-4",children:Object.entries({basic:{name:"B\xe1sicas",transitions:[{id:"fade",name:"Fundido",description:"Transici\xf3n suave"},{id:"cut",name:"Corte",description:"Cambio instant\xe1neo"},{id:"dissolve",name:"Disoluci\xf3n",description:"Mezcla gradual"}]},slide:{name:"Deslizamiento",transitions:[{id:"slide_left",name:"Deslizar Izquierda",description:"Desliza hacia la izquierda"},{id:"slide_right",name:"Deslizar Derecha",description:"Desliza hacia la derecha"},{id:"slide_up",name:"Deslizar Arriba",description:"Desliza hacia arriba"},{id:"slide_down",name:"Deslizar Abajo",description:"Desliza hacia abajo"}]},creative:{name:"Creativas",transitions:[{id:"zoom_in",name:"Zoom In",description:"Acercamiento"},{id:"zoom_out",name:"Zoom Out",description:"Alejamiento"},{id:"rotate",name:"Rotaci\xf3n",description:"Giro de transici\xf3n"},{id:"flip",name:"Volteo",description:"Efecto de volteo"}]}}).map(e=>{let[s,t]=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-sm mb-2 text-muted-foreground",children:t.name}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-2",children:t.transitions.map(e=>(0,i.jsx)(n.Zp,{className:"bg-slate-800 hover:bg-slate-700 transition-colors",children:(0,i.jsx)(n.Wu,{className:"p-3",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{className:"font-medium text-sm",children:e.name}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]}),(0,i.jsx)(r.$,{size:"sm",onClick:()=>A(e.id,e.name),disabled:0===a.length,children:"Aplicar"})]})})},e.id))})]},s)})})})]})}),(0,i.jsx)(c.av,{value:"audio",className:"flex-1 mt-0",children:(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("h3",{className:"font-medium mb-4",children:"Efectos de Audio"}),(0,i.jsx)(u.F,{className:"h-96",children:(0,i.jsx)("div",{className:"grid grid-cols-1 gap-3",children:C.map(e=>{let s=e.icon;return(0,i.jsx)(n.Zp,{className:"bg-card hover:bg-muted transition-colors",children:(0,i.jsx)(n.Wu,{className:"p-3",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-muted rounded flex items-center justify-center",children:(0,i.jsx)(s,{className:"w-5 h-5 text-green-400"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-sm",children:e.name}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]}),(0,i.jsx)(r.$,{size:"sm",onClick:()=>A(e.id,e.name),disabled:0===a.length,children:"Aplicar"})]})})},e.id)})})})]})})]}),a.length>0&&(0,i.jsxs)("div",{className:"border-t border-slate-700 p-4",children:[(0,i.jsx)("h4",{className:"font-medium mb-3",children:"Par\xe1metros del Efecto"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Intensidad"}),(0,i.jsx)(m,{defaultValue:[50],max:100,step:1})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Opacidad"}),(0,i.jsx)(m,{defaultValue:[100],max:100,step:1})]}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)(r.$,{size:"sm",variant:"outline",children:"Restablecer"}),(0,i.jsx)(r.$,{size:"sm",children:"Aplicar Cambios"})]})]})]})]})}var eR=a(56201),eS=a(44728),eE=a(73032),eT=a(22915),eV=a(20125),eB=a(91385);function eD(e){let{project:s,onClose:a,onExport:l}=e,[d,o]=(0,t.useState)({format:"mp4",resolution:s.resolution,frameRate:s.frameRate,quality:"high",bitrate:8e3,audioQuality:"high",audioBitrate:320,filename:s.name||"video_export"}),[x,u]=(0,t.useState)(!1),[j,p]=(0,t.useState)(0),[f,g]=(0,t.useState)("idle"),[N,b]=(0,t.useState)(null),[w,y]=(0,t.useState)(null),A={low:{bitrate:2e3,audioBitrate:128,label:"Baja (2 Mbps)",description:"Archivos peque\xf1os"},medium:{bitrate:5e3,audioBitrate:192,label:"Media (5 Mbps)",description:"Equilibrio calidad/tama\xf1o"},high:{bitrate:8e3,audioBitrate:320,label:"Alta (8 Mbps)",description:"Buena calidad"},ultra:{bitrate:15e3,audioBitrate:320,label:"Ultra (15 Mbps)",description:"M\xe1xima calidad"}},C=()=>{let e=s.duration,a=1e3*d.bitrate;return(a+1e3*d.audioBitrate)*e/8},k=(e,s)=>{o(a=>({...a,[e]:s}))},z=e=>{let s=A[e];o(a=>({...a,quality:e,bitrate:s.bitrate,audioBitrate:s.audioBitrate}))},M=async()=>{u(!0),g("exporting"),p(0);for(let e=0;e<=100;e++)await new Promise(e=>setTimeout(e,50)),p(e/100*100);g("completed"),u(!1),l(d)};return t.useEffect(()=>{b(s.duration/2),y(C())},[s.duration,d]),(0,i.jsx)(eV.lG,{open:!0,onOpenChange:a,children:(0,i.jsxs)(eV.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,i.jsx)(eV.c7,{children:(0,i.jsxs)(eV.L3,{className:"flex items-center space-x-2",children:[(0,i.jsx)(P.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Exportar Video"})]})}),(0,i.jsxs)("div",{className:"space-y-6",children:["idle"===f&&(0,i.jsxs)(c.tU,{defaultValue:"basic",className:"w-full",children:[(0,i.jsxs)(c.j7,{className:"grid w-full grid-cols-3",children:[(0,i.jsx)(c.Xi,{value:"basic",children:"B\xe1sico"}),(0,i.jsx)(c.Xi,{value:"advanced",children:"Avanzado"}),(0,i.jsx)(c.Xi,{value:"preview",children:"Vista Previa"})]}),(0,i.jsxs)(c.av,{value:"basic",className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{htmlFor:"filename",children:"Nombre del archivo"}),(0,i.jsx)(G.p,{id:"filename",value:d.filename,onChange:e=>k("filename",e.target.value),placeholder:"nombre_del_video"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Formato"}),(0,i.jsxs)(eB.l6,{value:d.format,onValueChange:e=>k("format",e),children:[(0,i.jsx)(eB.bq,{children:(0,i.jsx)(eB.yv,{})}),(0,i.jsx)(eB.gC,{children:[{value:"mp4",label:"MP4 (H.264)",description:"Mejor compatibilidad"},{value:"webm",label:"WebM (VP9)",description:"Optimizado para web"},{value:"mov",label:"MOV (QuickTime)",description:"Para edici\xf3n profesional"},{value:"avi",label:"AVI",description:"Formato cl\xe1sico"},{value:"mkv",label:"MKV (Matroska)",description:"Contenedor flexible"}].map(e=>(0,i.jsx)(eB.eb,{value:e.value,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium",children:e.label}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})},e.value))})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Calidad"}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(A).map(e=>{let[s,a]=e;return(0,i.jsx)(r.$,{variant:d.quality===s?"default":"outline",onClick:()=>z(s),className:"h-auto p-3 text-left",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium",children:a.label}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:a.description})]})},s)})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Resoluci\xf3n"}),(0,i.jsxs)(eB.l6,{value:"".concat(d.resolution.width,"x").concat(d.resolution.height),onValueChange:e=>{let s=X.find(s=>"".concat(s.width,"x").concat(s.height)===e);s&&k("resolution",s)},children:[(0,i.jsx)(eB.bq,{children:(0,i.jsx)(eB.yv,{})}),(0,i.jsx)(eB.gC,{children:X.map((e,s)=>(0,i.jsxs)(eB.eb,{value:"".concat(e.width,"x").concat(e.height),children:[e.label," (",e.width,"\xd7",e.height,")"]},"export-resolution-".concat(s)))})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"FPS"}),(0,i.jsxs)(eB.l6,{value:d.frameRate.toString(),onValueChange:e=>k("frameRate",parseInt(e)),children:[(0,i.jsx)(eB.bq,{children:(0,i.jsx)(eB.yv,{})}),(0,i.jsx)(eB.gC,{children:U.map(e=>(0,i.jsxs)(eB.eb,{value:e.toString(),children:[e," fps"]},e))})]})]})]})]}),(0,i.jsxs)(c.av,{value:"advanced",className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Bitrate de Video (kbps)"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(m,{value:[d.bitrate],onValueChange:e=>{let[s]=e;return k("bitrate",s)},min:1e3,max:5e4,step:500}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[d.bitrate," kbps"]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Bitrate de Audio (kbps)"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(m,{value:[d.audioBitrate],onValueChange:e=>{let[s]=e;return k("audioBitrate",s)},min:64,max:320,step:32}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[d.audioBitrate," kbps"]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Calidad de Audio"}),(0,i.jsxs)(eB.l6,{value:d.audioQuality,onValueChange:e=>k("audioQuality",e),children:[(0,i.jsx)(eB.bq,{children:(0,i.jsx)(eB.yv,{})}),(0,i.jsxs)(eB.gC,{children:[(0,i.jsx)(eB.eb,{value:"low",children:"Baja (64-128 kbps)"}),(0,i.jsx)(eB.eb,{value:"medium",children:"Media (128-192 kbps)"}),(0,i.jsx)(eB.eb,{value:"high",children:"Alta (192-320 kbps)"})]})]})]})]}),(0,i.jsx)(c.av,{value:"preview",className:"space-y-4",children:(0,i.jsxs)(n.Zp,{children:[(0,i.jsx)(n.aR,{children:(0,i.jsx)(n.ZB,{className:"text-lg",children:"Resumen de Exportaci\xf3n"})}),(0,i.jsxs)(n.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(eE.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"font-medium",children:"Archivo"})]}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[d.filename,".",d.format]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(T.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"font-medium",children:"Resoluci\xf3n"})]}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[d.resolution.width,"\xd7",d.resolution.height," @ ",d.frameRate,"fps"]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(v.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"font-medium",children:"Bitrate"})]}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Video: ",d.bitrate," kbps",(0,i.jsx)("br",{}),"Audio: ",d.audioBitrate," kbps"]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(ee.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"font-medium",children:"Duraci\xf3n"})]}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[Math.floor(s.duration/60),":",(s.duration%60).toFixed(0).padStart(2,"0")]})]})]}),(0,i.jsx)(h.w,{}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(es.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"font-medium",children:"Tama\xf1o Estimado"})]}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:w?(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(w):"Calculando..."})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(ee.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"font-medium",children:"Tiempo Estimado"})]}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:N?"".concat(Math.ceil(N)," segundos"):"Calculando..."})]})]})]})]})})]}),"exporting"===f&&(0,i.jsx)(n.Zp,{children:(0,i.jsx)(n.Wu,{className:"p-6",children:(0,i.jsxs)("div",{className:"text-center space-y-4",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto bg-blue-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(T.A,{className:"w-8 h-8 text-blue-600 animate-pulse"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium",children:"Exportando Video..."}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Procesando ",d.filename,".",d.format]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eS.k,{value:j,className:"w-full"}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[Math.round(j),"% completado"]})]})]})})}),"completed"===f&&(0,i.jsx)(n.Zp,{children:(0,i.jsx)(n.Wu,{className:"p-6",children:(0,i.jsxs)("div",{className:"text-center space-y-4",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(eT.A,{className:"w-8 h-8 text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium",children:"\xa1Exportaci\xf3n Completada!"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tu video ha sido exportado exitosamente"})]}),(0,i.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,i.jsxs)(r.$,{variant:"outline",children:[(0,i.jsx)(J.A,{className:"w-4 h-4 mr-2"}),"Reproducir"]}),(0,i.jsxs)(r.$,{children:[(0,i.jsx)(P.A,{className:"w-4 h-4 mr-2"}),"Descargar"]})]})]})})})]}),"idle"===f&&(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(r.$,{variant:"outline",onClick:a,children:"Cancelar"}),(0,i.jsxs)(r.$,{onClick:M,disabled:!d.filename,children:[(0,i.jsx)(P.A,{className:"w-4 h-4 mr-2"}),"Exportar Video"]})]}),"completed"===f&&(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(r.$,{onClick:a,children:"Cerrar"})})]})})}var eP=a(97859),e$=a(81284),eF=a(4229);function e_(e){let{project:s,onClose:a,onSave:l}=e,[d,o]=(0,t.useState)({...s}),[m,u]=(0,t.useState)(!1),j=e=>{o(s=>({...s,...e})),u(!0)},p=(e,s)=>{o(a=>({...a,settings:{...a.settings,[e]:s}})),u(!0)};return(0,i.jsx)(eV.lG,{open:!0,onOpenChange:a,children:(0,i.jsxs)(eV.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,i.jsx)(eV.c7,{children:(0,i.jsxs)(eV.L3,{className:"flex items-center space-x-2",children:[(0,i.jsx)(D.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Configuraci\xf3n del Proyecto"}),m&&(0,i.jsx)(x.E,{variant:"secondary",className:"ml-2",children:"Cambios sin guardar"})]})}),(0,i.jsxs)(c.tU,{defaultValue:"general",className:"w-full",children:[(0,i.jsxs)(c.j7,{className:"grid w-full grid-cols-4 bg-muted",children:[(0,i.jsx)(c.Xi,{value:"general",children:"General"}),(0,i.jsx)(c.Xi,{value:"video",children:"Video"}),(0,i.jsx)(c.Xi,{value:"audio",children:"Audio"}),(0,i.jsx)(c.Xi,{value:"export",children:"Exportaci\xf3n"})]}),(0,i.jsx)(c.av,{value:"general",className:"space-y-4",children:(0,i.jsxs)(n.Zp,{children:[(0,i.jsx)(n.aR,{children:(0,i.jsxs)(n.ZB,{className:"text-lg flex items-center space-x-2",children:[(0,i.jsx)(e$.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Informaci\xf3n del Proyecto"})]})}),(0,i.jsxs)(n.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{htmlFor:"project-name",children:"Nombre del Proyecto"}),(0,i.jsx)(G.p,{id:"project-name",value:d.name,onChange:e=>j({name:e.target.value}),placeholder:"Mi Proyecto de Video"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{htmlFor:"project-status",children:"Estado"}),(0,i.jsxs)(eB.l6,{value:d.status,onValueChange:e=>j({status:e}),children:[(0,i.jsx)(eB.bq,{children:(0,i.jsx)(eB.yv,{})}),(0,i.jsxs)(eB.gC,{children:[(0,i.jsx)(eB.eb,{value:"draft",children:"Borrador"}),(0,i.jsx)(eB.eb,{value:"in_progress",children:"En Progreso"}),(0,i.jsx)(eB.eb,{value:"completed",children:"Completado"}),(0,i.jsx)(eB.eb,{value:"archived",children:"Archivado"})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{htmlFor:"project-description",children:"Descripci\xf3n"}),(0,i.jsx)(eP.T,{id:"project-description",value:d.description||"",onChange:e=>j({description:e.target.value}),placeholder:"Descripci\xf3n del proyecto...",rows:3})]}),(0,i.jsx)(h.w,{}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(eR.J,{className:"text-muted-foreground",children:"Creado"}),(0,i.jsx)("p",{children:d.createdAt.toLocaleDateString()})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(eR.J,{className:"text-muted-foreground",children:"Modificado"}),(0,i.jsx)("p",{children:d.updatedAt.toLocaleDateString()})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(eR.J,{className:"text-muted-foreground",children:"Pistas"}),(0,i.jsxs)("p",{children:[d.tracks.length," pistas"]})]})]})]})]})}),(0,i.jsx)(c.av,{value:"video",className:"space-y-4",children:(0,i.jsxs)(n.Zp,{children:[(0,i.jsx)(n.aR,{children:(0,i.jsxs)(n.ZB,{className:"text-lg flex items-center space-x-2",children:[(0,i.jsx)(T.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Configuraci\xf3n de Video"})]})}),(0,i.jsxs)(n.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Resoluci\xf3n"}),(0,i.jsxs)(eB.l6,{value:"".concat(d.resolution.width,"x").concat(d.resolution.height),onValueChange:e=>{let s=X.find(s=>"".concat(s.width,"x").concat(s.height)===e);s&&(j({resolution:s}),p("resolution",s))},children:[(0,i.jsx)(eB.bq,{children:(0,i.jsx)(eB.yv,{})}),(0,i.jsx)(eB.gC,{children:X.map((e,s)=>(0,i.jsx)(eB.eb,{value:"".concat(e.width,"x").concat(e.height),children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium",children:e.label}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.width,"\xd7",e.height]})]})},"resolution-".concat(s)))})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Fotogramas por Segundo"}),(0,i.jsxs)(eB.l6,{value:d.frameRate.toString(),onValueChange:e=>{let s=parseInt(e);j({frameRate:s}),p("frameRate",s)},children:[(0,i.jsx)(eB.bq,{children:(0,i.jsx)(eB.yv,{})}),(0,i.jsx)(eB.gC,{children:U.map(e=>(0,i.jsxs)(eB.eb,{value:e.toString(),children:[e," fps"]},e))})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Color de Fondo"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(G.p,{type:"color",value:d.settings.backgroundColor,onChange:e=>p("backgroundColor",e.target.value),className:"w-16 h-10 p-1 border rounded"}),(0,i.jsx)(G.p,{value:d.settings.backgroundColor,onChange:e=>p("backgroundColor",e.target.value),placeholder:"#000000",className:"flex-1"})]})]}),(0,i.jsx)(h.w,{}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(eR.J,{className:"text-muted-foreground",children:"Aspecto"}),(0,i.jsxs)("p",{children:[(d.resolution.width/d.resolution.height).toFixed(2),":1"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(eR.J,{className:"text-muted-foreground",children:"P\xedxeles Totales"}),(0,i.jsxs)("p",{children:[(d.resolution.width*d.resolution.height/1e6).toFixed(1),"MP"]})]})]})]})]})}),(0,i.jsx)(c.av,{value:"audio",className:"space-y-4",children:(0,i.jsxs)(n.Zp,{children:[(0,i.jsx)(n.aR,{children:(0,i.jsxs)(n.ZB,{className:"text-lg flex items-center space-x-2",children:[(0,i.jsx)(es.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Configuraci\xf3n de Audio"})]})}),(0,i.jsxs)(n.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Frecuencia de Muestreo"}),(0,i.jsxs)(eB.l6,{value:d.settings.audioSampleRate.toString(),onValueChange:e=>p("audioSampleRate",parseInt(e)),children:[(0,i.jsx)(eB.bq,{children:(0,i.jsx)(eB.yv,{})}),(0,i.jsx)(eB.gC,{children:[22050,44100,48e3,96e3].map(e=>(0,i.jsxs)(eB.eb,{value:e.toString(),children:[e," Hz ",44100===e?"(CD Quality)":48e3===e?"(DVD Quality)":""]},e))})]})]}),(0,i.jsx)(h.w,{}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(eR.J,{className:"text-sm font-medium",children:"Pistas de Audio"}),d.tracks.filter(e=>"audio"===e.type).map(e=>(0,i.jsx)("div",{className:"p-3 bg-muted rounded border",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium",children:e.name}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.clips.length," clip",1!==e.clips.length?"s":""]})]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Volumen: ",e.volume||100,"%"]})]})},e.id)),0===d.tracks.filter(e=>"audio"===e.type).length&&(0,i.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay pistas de audio en el proyecto"})]})]})]})}),(0,i.jsx)(c.av,{value:"export",className:"space-y-4",children:(0,i.jsxs)(n.Zp,{children:[(0,i.jsx)(n.aR,{children:(0,i.jsxs)(n.ZB,{className:"text-lg flex items-center space-x-2",children:[(0,i.jsx)(N.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Configuraci\xf3n de Exportaci\xf3n"})]})}),(0,i.jsxs)(n.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Formato por Defecto"}),(0,i.jsxs)(eB.l6,{value:d.settings.exportFormat,onValueChange:e=>p("exportFormat",e),children:[(0,i.jsx)(eB.bq,{children:(0,i.jsx)(eB.yv,{})}),(0,i.jsx)(eB.gC,{children:[{value:"mp4",label:"MP4 (H.264)"},{value:"webm",label:"WebM (VP9)"},{value:"mov",label:"MOV (QuickTime)"},{value:"avi",label:"AVI"},{value:"mkv",label:"MKV (Matroska)"}].map(e=>(0,i.jsx)(eB.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eR.J,{children:"Calidad por Defecto"}),(0,i.jsxs)(eB.l6,{value:d.settings.quality,onValueChange:e=>p("quality",e),children:[(0,i.jsx)(eB.bq,{children:(0,i.jsx)(eB.yv,{})}),(0,i.jsx)(eB.gC,{children:[{value:"low",label:"Baja"},{value:"medium",label:"Media"},{value:"high",label:"Alta"},{value:"ultra",label:"Ultra"}].map(e=>(0,i.jsx)(eB.eb,{value:e.value,children:e.label},e.value))})]})]})]}),(0,i.jsx)(h.w,{}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(eR.J,{className:"text-sm font-medium",children:"Informaci\xf3n del Proyecto"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(eR.J,{className:"text-muted-foreground",children:"Duraci\xf3n Total"}),(0,i.jsxs)("p",{children:[Math.floor(d.duration/60),":",(d.duration%60).toFixed(0).padStart(2,"0")]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(eR.J,{className:"text-muted-foreground",children:"Total de Clips"}),(0,i.jsx)("p",{children:d.tracks.reduce((e,s)=>e+s.clips.length,0)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(eR.J,{className:"text-muted-foreground",children:"Pistas de Video"}),(0,i.jsx)("p",{children:d.tracks.filter(e=>"video"===e.type).length})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(eR.J,{className:"text-muted-foreground",children:"Pistas de Audio"}),(0,i.jsx)("p",{children:d.tracks.filter(e=>"audio"===e.type).length})]})]})]})]})]})})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)(r.$,{variant:"outline",onClick:a,children:"Cancelar"}),m&&(0,i.jsxs)(r.$,{variant:"outline",onClick:()=>{o({...s}),u(!1)},children:[(0,i.jsx)(eA.A,{className:"w-4 h-4 mr-2"}),"Restablecer"]})]}),(0,i.jsxs)(r.$,{onClick:()=>{l({...d,updatedAt:new Date})},disabled:!m,children:[(0,i.jsx)(eF.A,{className:"w-4 h-4 mr-2"}),"Guardar Cambios"]})]})]})})}var eL=a(72363);function eq(){let e=(0,l.useRouter)(),[s,a]=(0,t.useState)(null),[d,o]=(0,t.useState)({currentTime:0,zoom:1,selectedClips:[],playbackRate:1,isPlaying:!1,loop:!1,snapToGrid:!0}),[U,G]=(0,t.useState)([]),[H,Q]=(0,t.useState)("select"),[K,Y]=(0,t.useState)("media"),[ee,es]=(0,t.useState)(!1),[ea,ei]=(0,t.useState)(!1),[et,er]=(0,t.useState)(!0),[en,ec]=(0,t.useState)(!1),ed=(0,t.useRef)(null),eo=()=>{a({id:"project_".concat(Date.now()),name:"Nuevo Proyecto",duration:0,resolution:X[0],frameRate:30,createdAt:new Date,updatedAt:new Date,status:"draft",tracks:[{id:"video_track_1",type:"video",name:"Video 1",clips:[],isVisible:!0,isLocked:!1,order:0},{id:"audio_track_1",type:"audio",name:"Audio 1",clips:[],isVisible:!0,isLocked:!1,volume:100,order:1}],settings:{resolution:X[0],frameRate:30,audioSampleRate:44100,backgroundColor:"#000000",exportFormat:"mp4",quality:"high"}})},ex=[{id:"select",icon:j.A,label:"Seleccionar"},{id:"cut",icon:p.A,label:"Cortar"},{id:"text",icon:f.A,label:"Texto"},{id:"effects",icon:v.A,label:"Efectos"}],eh=[{title:"Blog",icon:g.A,path:"/blog",color:"text-blue-600"},{title:"Recursos",icon:N.A,path:"/recursos",color:"text-purple-600"},{title:"Calendario",icon:b.A,path:"/calendario",color:"text-green-600"},{title:"Guiones",icon:w.A,path:"/scripts",color:"text-orange-600"},{title:"Prompts",icon:y.A,path:"/prompts",color:"text-yellow-600"},{title:"Miniaturas",icon:A.A,path:"/miniaturas",color:"text-pink-600"},{title:"Tareas",icon:C.A,path:"/tareas",color:"text-indigo-600"},{title:"Chat",icon:k.A,path:"/chat",color:"text-cyan-600"},{title:"Aprendizaje",icon:z.A,path:"/aprendizaje",color:"text-emerald-600"},{title:"Proyectos",icon:M.A,path:"/proyectos",color:"text-slate-600"},{title:"SVG Viewer",icon:R.A,path:"/svg-viewer",color:"text-teal-600"},{title:"Sobre Red Creativa",icon:S.A,path:"/sobre-red-creativa",color:"text-red-600"},{title:"Sobre el Creador",icon:E.A,path:"/sobre-el-creador",color:"text-gray-600"}],eu=s=>{try{e.push(s)}catch(e){console.error("Error al navegar:",e),alert("La p\xe1gina ".concat(s," no est\xe1 disponible a\xfan. Funcionalidad en desarrollo."))}};return((0,t.useEffect)(()=>{eo()},[]),s)?(0,i.jsxs)("div",{className:"h-screen flex bg-background text-foreground",children:[(0,i.jsx)("div",{className:"".concat(et?"w-16":"w-64"," transition-all duration-300 ease-in-out bg-card border-r border-border flex-shrink-0 z-30"),onMouseEnter:()=>{ed.current&&clearTimeout(ed.current),ec(!0),er(!1)},onMouseLeave:()=>{ec(!1),ed.current=setTimeout(()=>{er(!0)},1e3)},children:(0,i.jsxs)("div",{className:"h-full flex flex-col",children:[(0,i.jsx)("div",{className:"p-4 border-b border-border",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,i.jsx)(T.A,{className:"w-5 h-5 text-white"})}),!et&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"font-bold text-sm",children:"Red Creativa Pro"}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:"Herramientas"})]})]})}),(0,i.jsx)(u.F,{className:"flex-1 p-2",children:(0,i.jsx)("div",{className:"space-y-1",children:eh.map(e=>(0,i.jsxs)(r.$,{variant:"ghost",size:"sm",className:"w-full justify-start h-10 ".concat(et?"px-2":"px-3"),onClick:()=>eu(e.path),title:et?e.title:void 0,children:[(0,i.jsx)(e.icon,{className:"w-4 h-4 ".concat(e.color," ").concat(et?"":"mr-3")}),!et&&(0,i.jsx)("span",{className:"text-sm",children:e.title})]},e.path))})}),(0,i.jsx)("div",{className:"p-2 border-t border-border",children:(0,i.jsx)(r.$,{variant:"ghost",size:"sm",className:"w-full ".concat(et?"px-2":"justify-start px-3"),onClick:()=>er(!et),children:et?(0,i.jsx)(V.A,{className:"w-4 h-4"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.A,{className:"w-4 h-4 mr-3"}),(0,i.jsx)("span",{className:"text-sm",children:"Colapsar"})]})})})]})}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-card border-b border-border",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("h1",{className:"text-xl font-bold",children:"Editor de Video"}),(0,i.jsx)(x.E,{variant:"secondary",children:s.name}),(0,i.jsxs)(x.E,{variant:"outline",className:"text-xs",children:[s.resolution.label," • ",s.frameRate,"fps"]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(eL.j,{}),(0,i.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>ei(!0),children:[(0,i.jsx)(D.A,{className:"w-4 h-4 mr-2"}),"Configuraci\xf3n"]}),(0,i.jsxs)(r.$,{variant:"default",size:"sm",onClick:()=>es(!0),children:[(0,i.jsx)(P.A,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]}),(0,i.jsxs)("div",{className:"flex-1 flex",children:[(0,i.jsx)("div",{className:"w-80 flex-shrink-0 bg-card border-r border-border",children:(0,i.jsxs)(c.tU,{value:K,onValueChange:Y,className:"h-full",children:[(0,i.jsxs)(c.j7,{className:"grid w-full grid-cols-3 bg-muted",children:[(0,i.jsx)(c.Xi,{value:"media",children:"Media"}),(0,i.jsx)(c.Xi,{value:"effects",children:"Efectos"}),(0,i.jsx)(c.Xi,{value:"audio",children:"Audio"})]}),(0,i.jsx)(c.av,{value:"media",className:"h-full mt-0",children:(0,i.jsx)(el,{assets:U,onAssetsChange:G,onAddToTimeline:e=>{if(!s)return;let i={id:"clip_".concat(Date.now()),type:e.type,name:e.name,source:e.url,startTime:s.duration,duration:e.duration||5,trimStart:0,trimEnd:e.duration||5,volume:"audio"===e.type?100:void 0,position:{x:0,y:0,width:s.resolution.width,height:s.resolution.height},effects:[],transitions:[]},t="audio"===e.type?"audio":"video",l=s.tracks.find(e=>e.type===t&&!e.isLocked);if(l){let e=i.startTime+i.duration;a({...s,duration:Math.max(s.duration,e),tracks:s.tracks.map(e=>e.id===l.id?{...e,clips:[...e.clips,i]}:e),updatedAt:new Date}),o(e=>({...e,currentTime:i.startTime,selectedClips:[i.id]}))}}})}),(0,i.jsx)(c.av,{value:"effects",className:"h-full mt-0",children:(0,i.jsx)(eM,{selectedClips:d.selectedClips,onApplyEffect:e=>{console.log("Applying effect:",e)}})}),(0,i.jsx)(c.av,{value:"audio",className:"h-full mt-0",children:(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("h3",{className:"font-medium mb-4",children:"Controles de Audio"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium",children:"Volumen Master"}),(0,i.jsx)(m,{defaultValue:[100],max:100,step:1,className:"mt-2"})]}),(0,i.jsx)(h.w,{}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Pistas de Audio"}),s.tracks.filter(e=>"audio"===e.type).map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[(0,i.jsx)("span",{className:"text-sm",children:e.name}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(r.$,{variant:"ghost",size:"sm",children:e.isVisible?(0,i.jsx)($.A,{className:"w-4 h-4"}):(0,i.jsx)(F.A,{className:"w-4 h-4"})}),(0,i.jsx)(r.$,{variant:"ghost",size:"sm",children:(0,i.jsx)(_.A,{className:"w-4 h-4"})})]})]},e.id))]})]})]})})]})}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,i.jsxs)("div",{className:"sticky top-0 z-20 bg-black border-b-2 border-gray-700",style:{height:"60vh",minHeight:"400px"},children:[(0,i.jsx)(ep,{project:s,currentTime:d.currentTime,isPlaying:d.isPlaying,onTimeUpdate:e=>o(s=>({...s,currentTime:e}))}),(0,i.jsx)("div",{className:"absolute top-4 left-4 flex space-x-2",children:ex.map(e=>(0,i.jsx)(r.$,{variant:H===e.id?"default":"secondary",size:"sm",onClick:()=>Q(e.id),title:e.label,children:(0,i.jsx)(e.icon,{className:"w-4 h-4"})},e.id))})]}),(0,i.jsx)("div",{className:"bg-card p-6 border-t border-border",children:(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-8",children:[(0,i.jsx)(r.$,{variant:"outline",size:"lg",onClick:()=>{o(e=>({...e,currentTime:Math.max(0,e.currentTime-5)}))},className:"w-14 h-14 rounded-full border-2 hover:scale-110 transition-transform",children:(0,i.jsx)(L.A,{className:"w-7 h-7"})}),(0,i.jsx)(r.$,{variant:d.isPlaying?"destructive":"default",size:"lg",onClick:()=>{o(e=>({...e,isPlaying:!e.isPlaying}))},className:"w-20 h-20 rounded-full border-2 shadow-lg hover:scale-110 transition-all duration-200 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white border-white/20",children:d.isPlaying?(0,i.jsx)(q.A,{className:"w-8 h-8"}):(0,i.jsx)(J.A,{className:"w-8 h-8 ml-1"})}),(0,i.jsx)(r.$,{variant:"outline",size:"lg",onClick:()=>{o(e=>({...e,isPlaying:!1,currentTime:0}))},className:"w-14 h-14 rounded-full border-2 hover:scale-110 transition-transform",children:(0,i.jsx)(I.A,{className:"w-7 h-7"})}),(0,i.jsx)(r.$,{variant:"outline",size:"lg",onClick:()=>{s&&o(e=>({...e,currentTime:Math.min(s.duration,e.currentTime+5)}))},className:"w-14 h-14 rounded-full border-2 hover:scale-110 transition-transform",children:(0,i.jsx)(Z.A,{className:"w-7 h-7"})}),(0,i.jsx)(h.w,{orientation:"vertical",className:"h-8"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3 bg-muted/50 px-4 py-2 rounded-lg",children:[(0,i.jsxs)("span",{className:"text-lg font-mono font-semibold text-foreground",children:[Math.floor(d.currentTime/60),":",(d.currentTime%60).toFixed(0).padStart(2,"0")]}),(0,i.jsx)("span",{className:"text-muted-foreground text-lg",children:"/"}),(0,i.jsxs)("span",{className:"text-lg font-mono font-semibold text-muted-foreground",children:[Math.floor(s.duration/60),":",(s.duration%60).toFixed(0).padStart(2,"0")]})]}),(0,i.jsx)(h.w,{orientation:"vertical",className:"h-6"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>o(e=>({...e,zoom:Math.max(.1,e.zoom-.1)})),children:(0,i.jsx)(W.A,{className:"w-4 h-4"})}),(0,i.jsxs)("span",{className:"text-sm text-muted-foreground min-w-[60px] text-center",children:[Math.round(100*d.zoom),"%"]}),(0,i.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>o(e=>({...e,zoom:Math.min(5,e.zoom+.1)})),children:(0,i.jsx)(O.A,{className:"w-4 h-4"})})]})]})}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto bg-card",children:[(0,i.jsx)("div",{className:"h-80 bg-card border-t border-border",children:(0,i.jsx)(em,{project:s,timeline:d,onTimelineChange:o,onProjectChange:a})}),(0,i.jsx)("div",{className:"h-40 bg-muted/20 border-t border-border/50",children:(0,i.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:(0,i.jsx)("p",{className:"text-sm",children:"Espacio adicional para m\xe1s pistas"})})})]})]})]})]}),ee&&(0,i.jsx)(eD,{project:s,onClose:()=>es(!1),onExport:e=>{console.log("Exporting with settings:",e),es(!1)}}),ea&&(0,i.jsx)(e_,{project:s,onClose:()=>ei(!1),onSave:e=>{a(e),ei(!1)}})]}):(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,i.jsxs)(n.Zp,{className:"w-96",children:[(0,i.jsx)(n.aR,{children:(0,i.jsx)(n.ZB,{className:"text-center",children:"Editor de Video"})}),(0,i.jsxs)(n.Wu,{className:"space-y-4",children:[(0,i.jsx)("p",{className:"text-center text-muted-foreground",children:"Crea un nuevo proyecto para comenzar a editar"}),(0,i.jsxs)(r.$,{onClick:eo,className:"w-full",children:[(0,i.jsx)(T.A,{className:"w-4 h-4 mr-2"}),"Nuevo Proyecto"]})]})]})})}},17471:(e,s,a)=>{"use strict";a.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>r,aR:()=>n,wL:()=>m});var i=a(95155),t=a(12115),l=a(74143);let r=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)("div",{ref:s,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...t})});r.displayName="Card";let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...t})});n.displayName="CardHeader";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)("h3",{ref:s,className:(0,l.cn)("font-semibold leading-none tracking-tight",a),...t})});c.displayName="CardTitle";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...t})});d.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...t})});o.displayName="CardContent";let m=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...t})});m.displayName="CardFooter"},44728:(e,s,a)=>{"use strict";a.d(s,{k:()=>n});var i=a(95155),t=a(12115),l=a(55863),r=a(74143);let n=t.forwardRef((e,s)=>{let{className:a,value:t,...n}=e;return(0,i.jsx)(l.bL,{ref:s,className:(0,r.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...n,children:(0,i.jsx)(l.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});n.displayName=l.bL.displayName},71961:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>n});var i=a(95155),t=a(12115),l=a(60704),r=a(74143);let n=l.bL,c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(l.B8,{ref:s,className:(0,r.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...t})});c.displayName=l.B8.displayName;let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(l.l9,{ref:s,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...t})});d.displayName=l.l9.displayName;let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(l.UC,{ref:s,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...t})});o.displayName=l.UC.displayName},72363:(e,s,a)=>{"use strict";a.d(s,{e:()=>p,j:()=>j});var i=a(95155);a(12115);var t=a(9295),l=a(18949),r=a(17471),n=a(36118),c=a(62098),d=a(93509),o=a(71539),m=a(33127),x=a(88334);let h={shadcn:c.A,black:d.A,white:c.A,neurobrutalismo:o.A},u={shadcn:"bg-blue-500",black:"bg-black",white:"bg-white border-2 border-gray-300",neurobrutalismo:"bg-gradient-to-r from-pink-500 via-green-500 to-purple-500"};function j(){let{theme:e,setTheme:s,themes:a}=(0,t.D)(),r=a.find(s=>s.id===e),c=h[e];return(0,i.jsxs)(x.rI,{children:[(0,i.jsx)(x.ty,{asChild:!0,children:(0,i.jsxs)(l.$,{variant:"outline",size:"sm",className:"gap-2",children:[(0,i.jsx)(c,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"hidden md:inline",children:null==r?void 0:r.name}),(0,i.jsx)(m.A,{className:"h-4 w-4"})]})}),(0,i.jsxs)(x.SQ,{align:"end",className:"w-64",children:[(0,i.jsx)(x.lp,{children:"Seleccionar Tema"}),(0,i.jsx)(x.mB,{}),a.map(a=>{let t=h[a.id],l=e===a.id;return(0,i.jsx)(x._2,{onClick:()=>s(a.id),className:"flex items-center gap-3 p-3 cursor-pointer",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,i.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(u[a.id])}),(0,i.jsx)(t,{className:"h-4 w-4"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("div",{className:"font-medium",children:a.name}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:a.description})]}),l&&(0,i.jsx)(n.E,{variant:"default",className:"text-xs",children:"Activo"})]})},a.id)})]})]})}function p(){let{themes:e,setTheme:s,theme:a}=(0,t.D)();return(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.map(e=>{let t=h[e.id],l=a===e.id;return(0,i.jsxs)(r.Zp,{className:"cursor-pointer transition-all hover:scale-105 ".concat(l?"ring-2 ring-primary":""),onClick:()=>s(e.id),children:[(0,i.jsxs)(r.aR,{className:"pb-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"w-8 h-8 rounded-full ".concat(u[e.id]," flex items-center justify-center"),children:(0,i.jsx)(t,{className:"h-4 w-4 text-white"})}),l&&(0,i.jsx)(n.E,{variant:"default",children:"Activo"})]}),(0,i.jsx)(r.ZB,{className:"text-lg",children:e.name})]}),(0,i.jsxs)(r.Wu,{children:[(0,i.jsx)(r.BT,{className:"text-sm",children:e.description}),(0,i.jsx)("div",{className:"mt-4 p-3 border rounded-md bg-muted/50",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{className:"h-2 bg-primary rounded w-3/4"}),(0,i.jsx)("div",{className:"h-2 bg-muted-foreground rounded w-1/2"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"h-6 w-12 bg-secondary rounded text-xs flex items-center justify-center",children:"Btn"}),(0,i.jsx)("div",{className:"h-6 w-12 bg-accent rounded text-xs flex items-center justify-center",children:"Btn"})]})]})})]})]},e.id)})})}},78696:(e,s,a)=>{Promise.resolve().then(a.bind(a,1554))},97859:(e,s,a)=>{"use strict";a.d(s,{T:()=>r});var i=a(95155),t=a(12115),l=a(74143);let r=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...t})});r.displayName="Textarea"}},e=>{var s=s=>e(e.s=s);e.O(0,[5264,5105,3322,8483,3226,7217,6401,8441,1684,7358],()=>s(78696)),_N_E=e.O()}]);