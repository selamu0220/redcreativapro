(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{2873:(e,t,a)=>{Promise.resolve().then(a.bind(a,26671))},26671:(e,t,a)=>{"use strict";a.d(t,{AuthPage:()=>g});var s=a(95155),i=a(12115),r=a(8794),n=a(62177),o=a(90221),l=a(71153),c=a(35695),d=a(18949),u=a(94487),m=a(86371),p=a(9436),v=a(67624);let f=l.Ik({email:l.Yj().email("Direcci\xf3n de email inv\xe1lida"),password:l.Yj().min(6,"La contrase\xf1a debe tener al menos 6 caracteres")});function h(){let[e,t]=(0,i.useState)(!1),{login:a,signup:l}=(0,r.A)(),{toast:h}=(0,p.dj)(),x=(0,c.useRouter)(),g=async e=>{console.log("Activating demo mode"),h({title:"\uD83C\uDFAD Modo Demo Activado",description:"Accediendo en modo demostraci\xf3n. Docker/Supabase no disponible."}),await new Promise(e=>setTimeout(e,1500));let t={id:"demo-user",email:e.email,name:e.email.split("@")[0],subscriptionType:"free",subscriptionEndDate:null,dailyUsage:{date:new Date().toISOString().split("T")[0],aiRequests:0,promptsUsed:0,scriptsGenerated:0},dailyLimits:{aiRequests:100,promptsUsed:20,scriptsGenerated:5}};localStorage.setItem("demo_user",JSON.stringify(t)),localStorage.setItem("demo_auth","true"),setTimeout(()=>{x.push("/blog")},1e3)},j=(0,n.mN)({resolver:(0,o.u)(f),defaultValues:{email:"",password:""}}),b=async e=>{var s,i,r,n,o,c,d,u,m,p,v,f,j;console.log("Form submitted with values:",e),t(!0);try{let t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJva2xvZW9iemxhaHF5dXB5am51Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3Mjc3ODgsImV4cCI6MjA2NDMwMzc4OH0.abQNOIdUlu2JtrsNcfhaZFhM8t7ZhNEo-Dri1H0IBOc";if(!t||t.includes("example")){console.log("Supabase not configured, using demo mode"),await g(e);return}if(!a||!l){console.error("Auth functions not available, falling back to demo mode"),await g(e);return}try{console.log("Attempting real authentication..."),await Promise.race([a(e.email,e.password),new Promise((e,t)=>setTimeout(()=>t(Error("Login timeout")),1e4))]),console.log("Login successful"),h({title:"\xa1Bienvenido de vuelta!",description:"Has iniciado sesi\xf3n correctamente."}),setTimeout(()=>{x.push("/blog")},1e3);return}catch(t){if(console.log("Login failed:",t.message),null==(s=t.message)?void 0:s.includes("Email not confirmed")){h({title:"\uD83D\uDCE7 Email no verificado",description:"Tu cuenta existe pero necesitas verificar tu email. Revisa tu bandeja de entrada y haz clic en el enlace de verificaci\xf3n.",duration:8e3}),setTimeout(()=>{h({title:"\uD83D\uDCA1 \xbfNo encuentras el email?",description:"Revisa spam o solicita un nuevo enlace desde tu proveedor de email.",duration:6e3})},3e3);return}if(null==(i=t.message)?void 0:i.includes("Invalid login credentials"))return void h({variant:"destructive",title:"❌ Credenciales incorrectas",description:"El email o la contrase\xf1a son incorrectos. Verifica tus datos e int\xe9ntalo de nuevo."});if((null==(r=t.message)?void 0:r.includes("Invalid"))||(null==(n=t.message)?void 0:n.includes("not found"))||(null==(o=t.message)?void 0:o.includes("User not found")))try{console.log("User not found, attempting signup..."),await Promise.race([l(e.email,e.password,e.email.split("@")[0]),new Promise((e,t)=>setTimeout(()=>t(Error("Signup timeout")),1e4))]),console.log("Signup successful"),h({title:"\uD83D\uDCE7 \xa1Cuenta creada! Verifica tu email",description:"Hemos enviado un enlace de verificaci\xf3n a tu correo. Revisa tu bandeja de entrada y haz clic en el enlace para activar tu cuenta.",duration:8e3}),setTimeout(()=>{h({title:"\uD83D\uDCEC \xbfNo ves el email?",description:"Revisa tu carpeta de spam o correo no deseado. El email puede tardar unos minutos en llegar.",duration:6e3})},3e3);return}catch(e){throw console.error("Signup failed:",e),e}throw null==(c=t.message)||c.includes("timeout"),t}}catch(a){if(console.error("Auth error:",a),(null==(d=a.message)?void 0:d.includes("timeout"))||(null==(u=a.message)?void 0:u.includes("fetch"))||(null==(m=a.message)?void 0:m.includes("network"))||!navigator.onLine){console.log("Connection issues detected, falling back to demo mode"),await g(e);return}let t="Ha ocurrido un error. Por favor, int\xe9ntalo de nuevo.";if(null==(p=a.message)?void 0:p.includes("User already registered"))t="Este email ya est\xe1 registrado. Verifica tu contrase\xf1a.";else if(null==(v=a.message)?void 0:v.includes("Invalid login credentials"))t="Email o contrase\xf1a incorrectos.";else if(null==(f=a.message)?void 0:f.includes("Email not confirmed"))t="\uD83D\uDCE7 Debes verificar tu email antes de iniciar sesi\xf3n. Revisa tu bandeja de entrada y haz clic en el enlace de verificaci\xf3n.",setTimeout(()=>{h({title:"\uD83D\uDCA1 \xbfNecesitas ayuda con la verificaci\xf3n?",description:"Si no encuentras el email, revisa spam o solicita un nuevo enlace desde tu cuenta.",duration:6e3})},2e3);else if(null==(j=a.message)?void 0:j.includes("Missing Supabase environment variables")){t="Error de configuraci\xf3n del servidor. Usando modo demo.",await g(e);return}else a.message&&(t=a.message);h({variant:"destructive",title:"Error de autenticaci\xf3n",description:t})}finally{t(!1)}};return(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{className:"space-y-3 text-center",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-primary",children:"Accede a Red Creativa Pro"}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg",children:"Inicia sesi\xf3n con tu email y contrase\xf1a"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground bg-muted/50 p-3 rounded-lg",children:["\uD83D\uDCA1 ",(0,s.jsx)("strong",{children:"Tip:"})," Si no tienes cuenta, se crear\xe1 autom\xe1ticamente al usar un email nuevo"]}),(0,s.jsxs)("p",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded border border-amber-200",children:["\uD83D\uDCE7 ",(0,s.jsx)("strong",{children:"Importante:"})," Despu\xe9s de registrarte, deber\xe1s verificar tu email antes de poder acceder"]})]}),(0,s.jsx)(u.lV,{...j,children:(0,s.jsxs)("form",{onSubmit:j.handleSubmit(b),className:"space-y-4",children:[(0,s.jsx)(u.zB,{control:j.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.eI,{children:[(0,s.jsx)(u.lR,{children:"Email"}),(0,s.jsx)(u.MJ,{children:(0,s.jsx)(m.p,{type:"email",placeholder:"tu@email.com",...t})}),(0,s.jsx)(u.C5,{})]})}}),(0,s.jsx)(u.zB,{control:j.control,name:"password",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.eI,{children:[(0,s.jsx)(u.lR,{children:"Contrase\xf1a"}),(0,s.jsx)(u.MJ,{children:(0,s.jsx)(m.p,{type:"password",placeholder:"••••••",...t})}),(0,s.jsx)(u.C5,{})]})}}),(0,s.jsx)(d.$,{type:"submit",className:"w-full h-12 text-lg font-semibold",disabled:e,children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.A,{className:"mr-2 h-5 w-5 animate-spin"}),"Procesando..."]}):"Acceder a Red Creativa Pro"}),(0,s.jsx)(d.$,{type:"button",variant:"outline",className:"w-full",onClick:()=>{console.log("Test button clicked"),h({title:"Bot\xf3n funcionando",description:"El bot\xf3n responde correctamente."})},children:"\uD83E\uDDEA Probar Bot\xf3n (Temporal)"})]})}),(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"\uD83D\uDD12 Tus datos est\xe1n seguros y protegidos"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Al continuar, aceptas nuestros t\xe9rminos de servicio"})]})]})}var x=a(23409);function g(e){let{onClose:t}=e,{isAuthenticated:a}=(0,r.A)();return(0,i.useEffect)(()=>{a&&t&&t()},[a,t]),(0,s.jsx)("div",{className:"min-h-[80vh] flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Red Creativa"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Gestiona tu contenido creativo en un solo lugar"})]}),(0,s.jsx)(x.o,{}),(0,s.jsx)(h,{})]})})}},28883:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},53904:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54416:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},67624:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},94487:(e,t,a)=>{"use strict";a.d(t,{C5:()=>g,MJ:()=>h,Rr:()=>x,eI:()=>v,lR:()=>f,lV:()=>c,zB:()=>u});var s=a(95155),i=a(12115),r=a(99708),n=a(62177),o=a(74143),l=a(56201);let c=n.Op,d=i.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(d.Provider,{value:{name:t.name},children:(0,s.jsx)(n.xI,{...t})})},m=()=>{let e=i.useContext(d),t=i.useContext(p),{getFieldState:a,formState:s}=(0,n.xW)(),r=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...r}},p=i.createContext({}),v=i.forwardRef((e,t)=>{let{className:a,...r}=e,n=i.useId();return(0,s.jsx)(p.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",a),...r})})});v.displayName="FormItem";let f=i.forwardRef((e,t)=>{let{className:a,...i}=e,{error:r,formItemId:n}=m();return(0,s.jsx)(l.J,{ref:t,className:(0,o.cn)(r&&"text-destructive",a),htmlFor:n,...i})});f.displayName="FormLabel";let h=i.forwardRef((e,t)=>{let{...a}=e,{error:i,formItemId:n,formDescriptionId:o,formMessageId:l}=m();return(0,s.jsx)(r.DX,{ref:t,id:n,"aria-describedby":i?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!i,...a})});h.displayName="FormControl";let x=i.forwardRef((e,t)=>{let{className:a,...i}=e,{formDescriptionId:r}=m();return(0,s.jsx)("p",{ref:t,id:r,className:(0,o.cn)("text-[0.8rem] text-muted-foreground",a),...i})});x.displayName="FormDescription";let g=i.forwardRef((e,t)=>{let{className:a,children:i,...r}=e,{error:n,formMessageId:l}=m(),c=n?String(null==n?void 0:n.message):i;return c?(0,s.jsx)("p",{ref:t,id:l,className:(0,o.cn)("text-[0.8rem] font-medium text-destructive",a),...r,children:c}):null});g.displayName="FormMessage"}},e=>{var t=t=>e(e.s=t);e.O(0,[60,542,242,23,441,684,358],()=>t(2873)),_N_E=e.O()}]);