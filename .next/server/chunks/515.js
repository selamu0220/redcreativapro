"use strict";exports.id=515,exports.ids=[96,515],exports.modules={19489:(e,r,a)=>{a.d(r,{g:()=>u});var t=a(60687),o=a(43210),i=a(4785),n=a(56167),s=a(95269),l=a(13785),d=a(84361),c=a(7566);function u({open:e,onOpenChange:r,onContinue:a}){let[u,p]=(0,o.useState)("gemini"),[m,g]=(0,o.useState)(""),[h,f]=(0,o.useState)("gemini-2.0-flash"),{toast:v}=(0,c.dj)(),x=async e=>{if(e?.preventDefault(),e?.stopPropagation(),console.log("=== INICIO handleSave ==="),console.log("Provider:",u),console.log("API Key:",m?`${m.substring(0,5)}...`:"vac\xeda"),console.log("API Key length:",m.length),!m||0===m.trim().length){console.log("ERROR: API key vac\xeda"),v({title:"Error",description:"Por favor ingresa una API key",variant:"destructive"});return}let t=m.trim(),o=!1;switch(u){case"gemini":o=t.startsWith("AI")&&t.length>=30;break;case"openai":o=t.startsWith("sk-")&&t.length>=40;break;case"anthropic":o=t.startsWith("sk-ant-")&&t.length>=40}if(!o){console.log("ERROR: API key inv\xe1lida para",u),v({title:"API Key inv\xe1lida",description:`La API key de ${u} no tiene el formato correcto`,variant:"destructive"});return}console.log("Validaci\xf3n exitosa");try{let e={provider:u,apiKey:t,model:"gemini"===u?h:void 0};console.log("Guardando configuraci\xf3n:",e),localStorage.setItem("aiSettings",JSON.stringify(e)),console.log("Configuraci\xf3n guardada exitosamente"),v({title:"\xa1Configuraci\xf3n guardada!",description:"Ya puedes usar el chat de IA"}),setTimeout(()=>{console.log("Cerrando di\xe1logo..."),a(),r(!1)},500)}catch(e){console.error("Error guardando configuraci\xf3n:",e),v({title:"Error",description:"No se pudo guardar la configuraci\xf3n",variant:"destructive"})}console.log("=== FIN handleSave ===")};return(0,t.jsx)(i.lG,{open:e,onOpenChange:r,children:(0,t.jsxs)(i.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsx)(i.c7,{children:(0,t.jsx)(i.L3,{children:"Configurar Proveedor de IA"})}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.J,{children:"Proveedor de IA"}),(0,t.jsxs)(d.l6,{value:u,onValueChange:e=>p(e),children:[(0,t.jsx)(d.bq,{children:(0,t.jsx)(d.yv,{placeholder:"Selecciona un proveedor"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"gemini",children:"Google Gemini"}),(0,t.jsx)(d.eb,{value:"openai",children:"OpenAI"}),(0,t.jsx)(d.eb,{value:"anthropic",children:"Anthropic/Claude"})]})]})]}),"gemini"===u&&(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.J,{children:"Modelo de Gemini"}),(0,t.jsxs)(d.l6,{value:h,onValueChange:e=>f(e),children:[(0,t.jsx)(d.bq,{children:(0,t.jsx)(d.yv,{placeholder:"Selecciona un modelo"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"gemini-2.0-flash",children:"Gemini 2.0 Flash (Recomendado)"}),(0,t.jsx)(d.eb,{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro"}),(0,t.jsx)(d.eb,{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash"}),(0,t.jsx)(d.eb,{value:"gemini-pro",children:"Gemini Pro"})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.J,{children:"API Key"}),(0,t.jsx)(s.p,{type:"password",value:m,onChange:e=>g(e.target.value),placeholder:"Ingresa tu API key"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:(()=>{switch(u){case"gemini":return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"Obt\xe9n tu API key de Google AI Studio:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[(0,t.jsxs)("li",{children:["Ve a ",(0,t.jsx)("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Google AI Studio"})]}),(0,t.jsx)("li",{children:"Inicia sesi\xf3n con tu cuenta de Google"}),(0,t.jsx)("li",{children:"Crea una nueva API key o usa una existente"}),(0,t.jsx)("li",{children:"La key debe comenzar con 'AI'"})]})]});case"openai":return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"Obt\xe9n tu API key del panel de OpenAI:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[(0,t.jsxs)("li",{children:["Ve a ",(0,t.jsx)("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"OpenAI Dashboard"})]}),(0,t.jsx)("li",{children:"Crea una nueva API key"}),(0,t.jsx)("li",{children:"La key debe comenzar con 'sk-'"})]})]});case"anthropic":return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"Obt\xe9n tu API key del panel de Anthropic:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[(0,t.jsxs)("li",{children:["Ve a ",(0,t.jsx)("a",{href:"https://console.anthropic.com/account/keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Anthropic Console"})]}),(0,t.jsx)("li",{children:"Crea una nueva API key"}),(0,t.jsx)("li",{children:"La key debe comenzar con 'sk-ant-'"})]})]})}})()})]}),(0,t.jsx)(l.$,{onClick:x,className:"w-full",type:"button",children:"Guardar y Continuar"})]})]})})}},26439:(e,r,a)=>{a.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>s,wL:()=>u});var t=a(60687),o=a(43210),i=a(22857);let n=o.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));n.displayName="Card";let s=o.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));s.displayName="CardHeader";let l=o.forwardRef(({className:e,...r},a)=>(0,t.jsx)("h3",{ref:a,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let d=o.forwardRef(({className:e,...r},a)=>(0,t.jsx)("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let c=o.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let u=o.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},45583:(e,r,a)=>{a.d(r,{A:()=>t});let t=(0,a(18962).A)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},48730:(e,r,a)=>{a.d(r,{A:()=>t});let t=(0,a(18962).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},64398:(e,r,a)=>{a.d(r,{A:()=>t});let t=(0,a(18962).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},67048:(e,r,a)=>{a.d(r,{k:()=>b});var t=a(60687),o=a(43210),i=a(11273),n=a(14163),s="Progress",[l,d]=(0,i.A)(s),[c,u]=l(s),p=o.forwardRef((e,r)=>{var a,o;let{__scopeProgress:i,value:s=null,max:l,getValueLabel:d=h,...u}=e;(l||0===l)&&!x(l)&&console.error((a=`${l}`,`Invalid prop \`max\` of value \`${a}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let p=x(l)?l:100;null===s||y(s,p)||console.error((o=`${s}`,`Invalid prop \`value\` of value \`${o}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let m=y(s,p)?s:null,g=v(m)?d(m,p):void 0;return(0,t.jsx)(c,{scope:i,value:m,max:p,children:(0,t.jsx)(n.sG.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":v(m)?m:void 0,"aria-valuetext":g,role:"progressbar","data-state":f(m,p),"data-value":m??void 0,"data-max":p,...u,ref:r})})});p.displayName=s;var m="ProgressIndicator",g=o.forwardRef((e,r)=>{let{__scopeProgress:a,...o}=e,i=u(m,a);return(0,t.jsx)(n.sG.div,{"data-state":f(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...o,ref:r})});function h(e,r){return`${Math.round(e/r*100)}%`}function f(e,r){return null==e?"indeterminate":e===r?"complete":"loading"}function v(e){return"number"==typeof e}function x(e){return v(e)&&!isNaN(e)&&e>0}function y(e,r){return v(e)&&!isNaN(e)&&e<=r&&e>=0}g.displayName=m;var j=a(22857);let b=o.forwardRef(({className:e,value:r,...a},o)=>(0,t.jsx)(p,{ref:o,className:(0,j.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...a,children:(0,t.jsx)(g,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));b.displayName=p.displayName},67628:(e,r,a)=>{a.d(r,{tU:()=>S,av:()=>O,j7:()=>E,Xi:()=>R});var t=a(60687),o=a(43210),i=a(70569),n=a(11273),s=a(72942),l=a(46059),d=a(14163),c=a(43),u=a(65551),p=a(96963),m="Tabs",[g,h]=(0,n.A)(m,[s.RG]),f=(0,s.RG)(),[v,x]=g(m),y=o.forwardRef((e,r)=>{let{__scopeTabs:a,value:o,onValueChange:i,defaultValue:n,orientation:s="horizontal",dir:l,activationMode:g="automatic",...h}=e,f=(0,c.jH)(l),[x,y]=(0,u.i)({prop:o,onChange:i,defaultProp:n??"",caller:m});return(0,t.jsx)(v,{scope:a,baseId:(0,p.B)(),value:x,onValueChange:y,orientation:s,dir:f,activationMode:g,children:(0,t.jsx)(d.sG.div,{dir:f,"data-orientation":s,...h,ref:r})})});y.displayName=m;var j="TabsList",b=o.forwardRef((e,r)=>{let{__scopeTabs:a,loop:o=!0,...i}=e,n=x(j,a),l=f(a);return(0,t.jsx)(s.bL,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:o,children:(0,t.jsx)(d.sG.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:r})})});b.displayName=j;var I="TabsTrigger",A=o.forwardRef((e,r)=>{let{__scopeTabs:a,value:o,disabled:n=!1,...l}=e,c=x(I,a),u=f(a),p=N(c.baseId,o),m=P(c.baseId,o),g=o===c.value;return(0,t.jsx)(s.q7,{asChild:!0,...u,focusable:!n,active:g,children:(0,t.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":m,"data-state":g?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:p,...l,ref:r,onMouseDown:(0,i.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(o)}),onKeyDown:(0,i.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(o)}),onFocus:(0,i.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;g||n||!e||c.onValueChange(o)})})})});A.displayName=I;var k="TabsContent",w=o.forwardRef((e,r)=>{let{__scopeTabs:a,value:i,forceMount:n,children:s,...c}=e,u=x(k,a),p=N(u.baseId,i),m=P(u.baseId,i),g=i===u.value,h=o.useRef(g);return o.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(l.C,{present:n||g,children:({present:a})=>(0,t.jsx)(d.sG.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":p,hidden:!a,id:m,tabIndex:0,...c,ref:r,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&s})})});function N(e,r){return`${e}-trigger-${r}`}function P(e,r){return`${e}-content-${r}`}w.displayName=k;var C=a(22857);let S=y,E=o.forwardRef(({className:e,...r},a)=>(0,t.jsx)(b,{ref:a,className:(0,C.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...r}));E.displayName=b.displayName;let R=o.forwardRef(({className:e,...r},a)=>(0,t.jsx)(A,{ref:a,className:(0,C.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...r}));R.displayName=A.displayName;let O=o.forwardRef(({className:e,...r},a)=>(0,t.jsx)(w,{ref:a,className:(0,C.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));O.displayName=w.displayName},70526:(e,r,a)=>{a.d(r,{A:()=>t}),a(60687),a(43210),a(26439),a(67048),a(45583),a(10022),a(80375),a(48730);let t=()=>null},80375:(e,r,a)=>{a.d(r,{A:()=>t});let t=(0,a(18962).A)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},85096:(e,r,a)=>{async function t(e,r,a,t,o,i,n){if(!a||!r){let e=localStorage.getItem("aiSettings");if(e){let s=JSON.parse(e);r=r||s.provider,a=a||s.apiKey,t=t||s.model,o=o??s.temperature,i=i??s.maxTokens,n=n||s.baseUrl}}if(!r)throw Error("Se requiere seleccionar un proveedor de IA. Por favor configura tus ajustes de IA en el men\xfa de usuario.");if(!a)throw Error("Se requiere una API key. Por favor configura tus ajustes de IA en el men\xfa de usuario.");if("string"!=typeof a||!a.trim())throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica que hayas ingresado una API key v\xe1lida en los ajustes de usuario.");a=a.trim();try{switch(r){case"gemini":{let r=t||"gemini-2.0-flash",n=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${r}:generateContent?key=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],generationConfig:{temperature:o||.7,maxOutputTokens:i||2048}})});if(!n.ok){let e=await n.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===n.status)throw localStorage.removeItem("aiSettings"),Error(`La API key de Google AI Studio no es v\xe1lida para el modelo ${r}. Por favor, verifica que la API key tenga los permisos necesarios.`);throw Error(`Error de Gemini: ${e.error?.message||"No se pudo generar el contenido"}`)}let s=await n.json();if(!s.candidates?.[0]?.content?.parts?.[0]?.text)throw Error("No se recibi\xf3 una respuesta v\xe1lida del servicio de IA");return s.candidates[0].content.parts[0].text}case"openai":{let r=t||"gpt-4o",n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],temperature:o||.7,max_tokens:i||2048})});if(!n.ok){let e=await n.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===n.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de OpenAI en los ajustes de usuario.");throw Error(`Error de OpenAI: ${e.error?.message||"No se pudo generar el contenido"}`)}return(await n.json()).choices[0].message.content}case"anthropic":{let r=t||"claude-3-5-sonnet-20241022",n=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":a,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],max_tokens:i||2048,temperature:o||.7})});if(!n.ok){let e=await n.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===n.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de Anthropic en los ajustes de usuario.");throw Error(`Error de Anthropic: ${e.error?.message||"No se pudo generar el contenido"}`)}return(await n.json()).content[0].text}case"cohere":{let r=t||"command-r-plus",s=n||"https://api.cohere.ai/v1/generate",l=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({model:r,prompt:e,max_tokens:i||2048,temperature:o||.7})});if(!l.ok){let e=await l.json().catch(()=>({message:"Error desconocido"}));if(401===l.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de Cohere en los ajustes de usuario.");throw Error(`Error de Cohere: ${e.message||"No se pudo generar el contenido"}`)}return(await l.json()).generations[0].text}case"mistral":{let r=t||"mistral-large-latest",s=n||"https://api.mistral.ai/v1/chat/completions",l=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],max_tokens:i||2048,temperature:o||.7})});if(!l.ok){let e=await l.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===l.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de Mistral en los ajustes de usuario.");throw Error(`Error de Mistral: ${e.error?.message||"No se pudo generar el contenido"}`)}return(await l.json()).choices[0].message.content}default:throw Error("Proveedor de IA no soportado")}}catch(e){if(console.error("Error en generateScriptWithAI:",e),e.message.includes("API key"))throw e;throw Error(`Error al conectar con el servicio de IA: ${e.message}. Por favor verifica tu API key e int\xe9ntalo de nuevo.`)}}a.d(r,{generateScriptWithAI:()=>t})}};