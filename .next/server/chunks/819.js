exports.id=819,exports.ids=[819],exports.modules={84:(e,r,t)=>{"use strict";t.d(r,{N:()=>a});var s=t(4370);let i="https://rokloeobzlahqyupyjnu.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJva2xvZW9iemxhaHF5dXB5am51Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3Mjc3ODgsImV4cCI6MjA2NDMwMzc4OH0.abQNOIdUlu2JtrsNcfhaZFhM8t7ZhNEo-Dri1H0IBOc";if(!i||!o)throw Error("Supabase environment variables NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are missing. Please check your .env file or environment configuration.");let a=(0,s.UU)(i,o)},638:(e,r,t)=>{"use strict";t.d(r,{ThemeProvider:()=>a});var s=t(687),i=t(3210);let o=(0,i.createContext)({theme:"system",setTheme:()=>null});function a({children:e,defaultTheme:r="system"}){let[t,a]=(0,i.useState)(()=>r);return(0,s.jsx)(o.Provider,{value:{theme:t,setTheme:e=>{a(e)}},children:e})}},1424:(e,r,t)=>{Promise.resolve().then(t.bind(t,3772)),Promise.resolve().then(t.bind(t,638))},2704:()=>{},3280:(e,r,t)=>{Promise.resolve().then(t.bind(t,3918)),Promise.resolve().then(t.bind(t,8584))},3603:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6444,23)),Promise.resolve().then(t.t.bind(t,6042,23)),Promise.resolve().then(t.t.bind(t,8170,23)),Promise.resolve().then(t.t.bind(t,9477,23)),Promise.resolve().then(t.t.bind(t,9345,23)),Promise.resolve().then(t.t.bind(t,2089,23)),Promise.resolve().then(t.t.bind(t,6577,23)),Promise.resolve().then(t.t.bind(t,1307,23))},3772:(e,r,t)=>{"use strict";t.d(r,{A:()=>l,AuthProvider:()=>n});var s=t(687),i=t(3210),o=t(84);let a=(0,i.createContext)(void 0),n=({children:e})=>{let[r,t]=(0,i.useState)(null),[n,l]=(0,i.useState)(!0),[u,d]=(0,i.useState)(!1),[c,m]=(0,i.useState)(null);console.log("AuthProvider: Rendering with loading:",n,"user:",r?"exists":"null");let h=(0,i.useCallback)(async e=>{try{let r;l(!0);let{data:s,error:i}=await o.N.from("users").select("*").eq("id",e.id).single();if(i&&"PGRST116"!==i.code)return void console.error("Error loading profile:",i);if(s)r=s;else{let t={id:e.id,email:e.email,full_name:e.user_metadata?.full_name||e.email.split("@")[0],subscription_tier:"free",subscription_status:"free",subscription_end_date:null},{data:s,error:i}=await o.N.from("users").insert(t).select().single();if(i)return void console.error("Error creating profile:",i);r=s}let a={id:r.id,email:r.email,name:r.full_name,subscriptionType:r.subscription_tier,subscriptionEndDate:r.subscription_end_date?new Date(r.subscription_end_date):null,dailyUsage:{date:new Date().toISOString().split("T")[0],aiRequests:0,promptsUsed:0,scriptsGenerated:0},dailyLimits:{aiRequests:100,promptsUsed:20,scriptsGenerated:5}};t(a)}catch(e){console.error("Error in loadUserProfile:",e),t(null)}finally{l(!1)}},[]);(0,i.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("demo_auth"),r=localStorage.getItem("demo_user");if("true"===e&&r)try{let e=JSON.parse(r);t(e),l(!1),console.log("AuthProvider: Demo mode initialized with user:",e);return}catch(e){console.error("Error parsing demo user:",e),localStorage.removeItem("demo_auth"),localStorage.removeItem("demo_user")}let{data:{session:s}}=await o.N.auth.getSession();if(s?.user)try{await h(s.user)}catch(e){console.error("Error loading user profile on session check:",e)}}catch(e){console.error("Error initializing auth:",e)}finally{l(!1)}})();let{data:{subscription:e}}=o.N.auth.onAuthStateChange(async(e,r)=>{if("SIGNED_IN"===e&&r?.user)try{await h(r.user),d(!1),m(null)}catch(e){console.error("Error loading user profile on auth change:",e)}else"SIGNED_OUT"===e&&(t(null),d(!1),m(null))});return()=>e.unsubscribe()},[h]);let p=(0,i.useCallback)(()=>!!r&&("free"===r.subscriptionType||!r.subscriptionEndDate||new Date<r.subscriptionEndDate),[r]),v=(0,i.useCallback)(()=>{if(!r||!r.subscriptionEndDate)return 0;let e=new Date;return Math.max(0,Math.ceil((r.subscriptionEndDate.getTime()-e.getTime())/864e5))},[r]),f=(0,i.useCallback)(async(e,r)=>{try{let{data:t,error:s}=await o.N.auth.signInWithPassword({email:e,password:r});if(s){if(s.message.includes("Email not confirmed"))throw d(!0),m(e),Error("Email not confirmed");if(s.message.includes("Invalid login credentials"))throw Error("Invalid login credentials");throw s}t.user&&(d(!1),m(null),await h(t.user))}catch(e){throw console.error("Login error:",e),Error(e.message||"Error al iniciar sesi\xf3n")}},[h]),b=(0,i.useCallback)(async()=>{try{let e=localStorage.getItem("demo_auth");if("true"===e){localStorage.removeItem("demo_auth"),localStorage.removeItem("demo_user"),t(null);return}let{error:r}=await o.N.auth.signOut();if(r)throw r;t(null)}catch(e){throw console.error("Logout error:",e),Error(e.message||"Error al cerrar sesi\xf3n")}},[]),g=(0,i.useCallback)(async(e,r,t)=>{try{let{data:s,error:i}=await o.N.auth.signUp({email:e,password:r,options:{data:{full_name:t}}});if(i)throw i;console.log("Signup successful, verification email sent to:",e),d(!0),m(e),s.user&&s.user.email_confirmed_at&&(await h(s.user),d(!1),m(null))}catch(e){throw console.error("Signup error:",e),Error(e.message||"Error al crear la cuenta")}},[h]),y=(0,i.useCallback)((e,s)=>{r&&(t(r=>{if(!r)return null;let t={...r,subscriptionType:e,subscriptionEndDate:s||null};return o.N.from("users").update({subscription_tier:e,subscription_status:"free"===e?"free":"active"}).eq("id",r.id).then(({error:e})=>{e&&console.error("Error updating subscription:",e)}),t}),window.dispatchEvent(new CustomEvent("subscriptionUpdated",{detail:{subscriptionType:e,endDate:s}})))},[r]),P=(0,i.useCallback)(()=>{d(!1),m(null)},[]),C=(0,i.useCallback)(e=>{if(!r)return 0;let s=new Date().toISOString().split("T")[0];return r.dailyUsage.date!==s?(t(e=>e?{...e,dailyUsage:{date:s,aiRequests:0,promptsUsed:0,scriptsGenerated:0}}:null),r.dailyLimits[e]):Math.max(0,r.dailyLimits[e]-r.dailyUsage[e])},[r]),E=(0,i.useCallback)(e=>{if(!r)return;let s=new Date().toISOString().split("T")[0];t(r=>r?r.dailyUsage.date!==s?{...r,dailyUsage:{date:s,aiRequests:+("aiRequests"===e),promptsUsed:+("promptsUsed"===e),scriptsGenerated:+("scriptsGenerated"===e)}}:{...r,dailyUsage:{...r.dailyUsage,[e]:r.dailyUsage[e]+1}}:null)},[r]),w=(0,i.useCallback)(e=>{if(!r)return!1;if("free"!==r.subscriptionType)return!0;let t=new Date().toISOString().split("T")[0];return r.dailyUsage.date!==t||r.dailyUsage[e]<r.dailyLimits[e]},[r]);return(0,s.jsx)(a.Provider,{value:{user:r,loading:n,isAuthenticated:!!r,needsEmailVerification:u,pendingVerificationEmail:c,login:f,logout:b,signup:g,hasActiveSubscription:p,getRemainingSubscriptionDays:v,updateSubscriptionStatus:y,clearEmailVerification:P,getRemainingUsage:C,incrementUsage:E,canUseFeature:w},children:e})},l=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useAuth debe ser usado dentro de un AuthProvider");return e}},3851:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6346,23)),Promise.resolve().then(t.t.bind(t,7924,23)),Promise.resolve().then(t.t.bind(t,5656,23)),Promise.resolve().then(t.t.bind(t,99,23)),Promise.resolve().then(t.t.bind(t,8243,23)),Promise.resolve().then(t.t.bind(t,8827,23)),Promise.resolve().then(t.t.bind(t,2763,23)),Promise.resolve().then(t.t.bind(t,7173,23))},3918:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>i});var s=t(2907);let i=(0,s.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\contexts\\AuthContext.tsx","AuthProvider");(0,s.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\contexts\\AuthContext.tsx","useAuth")},7990:()=>{},8014:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u,metadata:()=>l});var s=t(7413),i=t(1421),o=t.n(i),a=t(8584),n=t(3918);t(2704);let l={title:"Red Creativa Pro",description:"Plataforma integral para creativos y profesionales",keywords:"creatividad, productividad, blog, recursos, proyectos",authors:[{name:"Red Creativa Pro"}],openGraph:{title:"Red Creativa Pro",description:"Plataforma integral para creativos y profesionales",type:"website",locale:"es_ES"}};function u({children:e}){return(0,s.jsx)("html",{lang:"es",suppressHydrationWarning:!0,children:(0,s.jsx)("body",{className:o().className,children:(0,s.jsx)(a.ThemeProvider,{defaultTheme:"light",children:(0,s.jsx)(n.AuthProvider,{children:e})})})})}},8584:(e,r,t)=>{"use strict";t.d(r,{ThemeProvider:()=>i});var s=t(2907);let i=(0,s.registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\ui\\theme-provider.tsx","ThemeProvider");(0,s.registerClientReference)(function(){throw Error("Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\ui\\theme-provider.tsx","useTheme")},9727:()=>{}};