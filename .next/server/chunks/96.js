"use strict";exports.id=96,exports.ids=[96],exports.modules={85096:(e,r,o)=>{async function t(e,r,o,t,a,s,i){if(!o||!r){let e=localStorage.getItem("aiSettings");if(e){let n=JSON.parse(e);r=r||n.provider,o=o||n.apiKey,t=t||n.model,a=a??n.temperature,s=s??n.maxTokens,i=i||n.baseUrl}}if(!r)throw Error("Se requiere seleccionar un proveedor de IA. Por favor configura tus ajustes de IA en el men\xfa de usuario.");if(!o)throw Error("Se requiere una API key. Por favor configura tus ajustes de IA en el men\xfa de usuario.");if("string"!=typeof o||!o.trim())throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica que hayas ingresado una API key v\xe1lida en los ajustes de usuario.");o=o.trim();try{switch(r){case"gemini":{let r=t||"gemini-2.0-flash",i=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${r}:generateContent?key=${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],generationConfig:{temperature:a||.7,maxOutputTokens:s||2048}})});if(!i.ok){let e=await i.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===i.status)throw localStorage.removeItem("aiSettings"),Error(`La API key de Google AI Studio no es v\xe1lida para el modelo ${r}. Por favor, verifica que la API key tenga los permisos necesarios.`);throw Error(`Error de Gemini: ${e.error?.message||"No se pudo generar el contenido"}`)}let n=await i.json();if(!n.candidates?.[0]?.content?.parts?.[0]?.text)throw Error("No se recibi\xf3 una respuesta v\xe1lida del servicio de IA");return n.candidates[0].content.parts[0].text}case"openai":{let r=t||"gpt-4o",i=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],temperature:a||.7,max_tokens:s||2048})});if(!i.ok){let e=await i.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===i.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de OpenAI en los ajustes de usuario.");throw Error(`Error de OpenAI: ${e.error?.message||"No se pudo generar el contenido"}`)}return(await i.json()).choices[0].message.content}case"anthropic":{let r=t||"claude-3-5-sonnet-20241022",i=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":o,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],max_tokens:s||2048,temperature:a||.7})});if(!i.ok){let e=await i.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===i.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de Anthropic en los ajustes de usuario.");throw Error(`Error de Anthropic: ${e.error?.message||"No se pudo generar el contenido"}`)}return(await i.json()).content[0].text}case"cohere":{let r=t||"command-r-plus",n=i||"https://api.cohere.ai/v1/generate",c=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({model:r,prompt:e,max_tokens:s||2048,temperature:a||.7})});if(!c.ok){let e=await c.json().catch(()=>({message:"Error desconocido"}));if(401===c.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de Cohere en los ajustes de usuario.");throw Error(`Error de Cohere: ${e.message||"No se pudo generar el contenido"}`)}return(await c.json()).generations[0].text}case"mistral":{let r=t||"mistral-large-latest",n=i||"https://api.mistral.ai/v1/chat/completions",c=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],max_tokens:s||2048,temperature:a||.7})});if(!c.ok){let e=await c.json().catch(()=>({error:{message:"Error desconocido"}}));if(401===c.status)throw localStorage.removeItem("aiSettings"),Error("API key inv\xe1lida. Por favor verifica tu API key de Mistral en los ajustes de usuario.");throw Error(`Error de Mistral: ${e.error?.message||"No se pudo generar el contenido"}`)}return(await c.json()).choices[0].message.content}default:throw Error("Proveedor de IA no soportado")}}catch(e){if(console.error("Error en generateScriptWithAI:",e),e.message.includes("API key"))throw e;throw Error(`Error al conectar con el servicio de IA: ${e.message}. Por favor verifica tu API key e int\xe9ntalo de nuevo.`)}}o.d(r,{generateScriptWithAI:()=>t})}};