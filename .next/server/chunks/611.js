exports.id=611,exports.ids=[611],exports.modules={3851:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,86346,23)),Promise.resolve().then(t.t.bind(t,27924,23)),Promise.resolve().then(t.t.bind(t,35656,23)),Promise.resolve().then(t.t.bind(t,40099,23)),Promise.resolve().then(t.t.bind(t,38243,23)),Promise.resolve().then(t.t.bind(t,28827,23)),Promise.resolve().then(t.t.bind(t,62763,23)),Promise.resolve().then(t.t.bind(t,97173,23))},8359:(e,r,t)=>{"use strict";t.d(r,{D:()=>l,ThemeProvider:()=>n});var i=t(60687),s=t(43210);let o=(0,s.createContext)(void 0),a=[{id:"white",name:"Blanco",description:"Tema claro y limpio con tonos blancos puros"},{id:"black",name:"Negro",description:"Tema oscuro minimalista con tonos negros profundos"},{id:"neurobrutalismo",name:"Neurobrutalismo",description:"Tema experimental con dise\xf1o brutalista y colores vibrantes"}];function n({children:e}){let[r,t]=(0,s.useState)("white");return(0,i.jsx)(o.Provider,{value:{theme:r,setTheme:e=>{t(e)},themes:a},children:e})}function l(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},13625:(e,r,t)=>{Promise.resolve().then(t.bind(t,73918)),Promise.resolve().then(t.bind(t,38565))},38565:(e,r,t)=>{"use strict";t.d(r,{ThemeProvider:()=>s});var i=t(12907);let s=(0,i.registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\contexts\\ThemeContext.tsx","ThemeProvider");(0,i.registerClientReference)(function(){throw Error("Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\contexts\\ThemeContext.tsx","useTheme")},39727:()=>{},43603:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,16444,23)),Promise.resolve().then(t.t.bind(t,16042,23)),Promise.resolve().then(t.t.bind(t,88170,23)),Promise.resolve().then(t.t.bind(t,49477,23)),Promise.resolve().then(t.t.bind(t,29345,23)),Promise.resolve().then(t.t.bind(t,12089,23)),Promise.resolve().then(t.t.bind(t,46577,23)),Promise.resolve().then(t.t.bind(t,31307,23))},47990:()=>{},50073:(e,r,t)=>{Promise.resolve().then(t.bind(t,63772)),Promise.resolve().then(t.bind(t,8359))},58014:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u,metadata:()=>l});var i=t(37413),s=t(61421),o=t.n(s),a=t(38565),n=t(73918);t(82704),t(85227);let l={title:"Red Creativa Pro Beta",description:"Plataforma integral para creativos y profesionales - Versi\xf3n Beta",keywords:"creatividad, productividad, blog, recursos, proyectos",authors:[{name:"Red Creativa Pro Beta"}],openGraph:{title:"Red Creativa Pro Beta",description:"Plataforma integral para creativos y profesionales - Versi\xf3n Beta",type:"website",locale:"es_ES"}};function u({children:e}){return(0,i.jsx)("html",{lang:"es",suppressHydrationWarning:!0,children:(0,i.jsx)("body",{className:o().className,children:(0,i.jsx)(a.ThemeProvider,{children:(0,i.jsx)(n.AuthProvider,{children:e})})})})}},63772:(e,r,t)=>{"use strict";t.d(r,{A:()=>l,AuthProvider:()=>n});var i=t(60687),s=t(43210),o=t(80084);let a=(0,s.createContext)(void 0),n=({children:e})=>{let[r,t]=(0,s.useState)(null),[n,l]=(0,s.useState)(!0),[u,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null);console.log("AuthProvider: Rendering with loading:",n,"user:",r?"exists":"null");let p=(0,s.useCallback)(async e=>{try{let r;if(l(!0),console.log("Loading profile for user:",e.id),!o.N)return void console.error("Supabase client not initialized");let i=o.N.from("users").select("*").eq("id",e.id).single(),s=new Promise((e,r)=>setTimeout(()=>r(Error("Profile query timeout")),5e3)),{data:a,error:n}=await Promise.race([i,s]);if(console.log("Profile query result:",{profile:a,error:n}),n)if("PGRST116"===n.code)console.log("No existing profile found for user, will create new one");else if("42P01"===n.code){console.error("Users table does not exist in Supabase database. Please run the database migrations."),console.log("Creating temporary profile due to missing table");let r={id:e.id,email:e.email||"",full_name:e.user_metadata?.full_name||e.email?.split("@")[0]||"Usuario",subscription_tier:"free",subscription_end_date:null},i={id:r.id,email:r.email,name:r.full_name,subscriptionType:r.subscription_tier,subscriptionEndDate:r.subscription_end_date?new Date(r.subscription_end_date):null,dailyUsage:{date:new Date().toISOString().split("T")[0],aiRequests:0,promptsUsed:0,scriptsGenerated:0},dailyLimits:{aiRequests:100,promptsUsed:20,scriptsGenerated:5}};t(i);return}else{if("42501"===n.code)return void console.error("Insufficient privileges to access users table. Please check RLS policies.");if("Profile query timeout"!==n.message)return void console.error("Error loading profile:",{message:n.message,code:n.code,details:n.details,hint:n.hint,fullError:n});console.error("Profile query timed out - database may be slow or unavailable");let r={id:e.id,email:e.email||"",full_name:e.user_metadata?.full_name||e.email?.split("@")[0]||"Usuario",subscription_tier:"free",subscription_end_date:null},i={id:r.id,email:r.email,name:r.full_name,subscriptionType:r.subscription_tier,subscriptionEndDate:r.subscription_end_date?new Date(r.subscription_end_date):null,dailyUsage:{date:new Date().toISOString().split("T")[0],aiRequests:0,promptsUsed:0,scriptsGenerated:0},dailyLimits:{aiRequests:100,promptsUsed:20,scriptsGenerated:5}};t(i);return}if(a)r=a;else{let t={id:e.id,email:e.email,full_name:e.user_metadata?.full_name||e.email.split("@")[0],subscription_tier:"free",subscription_status:"free",subscription_end_date:null},{data:i,error:s}=await o.N.from("users").insert(t).select().single();if(s)return void console.error("Error creating profile:",{message:s.message,code:s.code,details:s.details,hint:s.hint,fullError:s});r=i}let u={id:r.id,email:r.email,name:r.full_name,subscriptionType:r.subscription_tier,subscriptionEndDate:r.subscription_end_date?new Date(r.subscription_end_date):null,dailyUsage:{date:new Date().toISOString().split("T")[0],aiRequests:0,promptsUsed:0,scriptsGenerated:0},dailyLimits:{aiRequests:100,promptsUsed:20,scriptsGenerated:5}};t(u)}catch(e){console.error("Error in loadUserProfile:",{message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0,fullError:e}),t(null)}finally{l(!1)}},[]);(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("demo_auth"),r=localStorage.getItem("demo_user");if("true"===e&&r)try{let e=JSON.parse(r);t(e),l(!1),console.log("AuthProvider: Demo mode initialized with user:",e);return}catch(e){console.error("Error parsing demo user:",e),localStorage.removeItem("demo_auth"),localStorage.removeItem("demo_user")}let{data:{session:i}}=await o.N.auth.getSession();if(i?.user)try{await p(i.user)}catch(e){console.error("Error loading user profile on session check:",e)}}catch(e){console.error("Error initializing auth:",e)}finally{l(!1)}})();let{data:{subscription:e}}=o.N.auth.onAuthStateChange(async(e,r)=>{if("SIGNED_IN"===e&&r?.user)try{await p(r.user),d(!1),m(null)}catch(e){console.error("Error loading user profile on auth change:",e)}else"SIGNED_OUT"===e&&(t(null),d(!1),m(null))});return()=>e.unsubscribe()},[p]);let h=(0,s.useCallback)(()=>!!r&&("free"===r.subscriptionType||!r.subscriptionEndDate||new Date<r.subscriptionEndDate),[r]),b=(0,s.useCallback)(()=>{if(!r||!r.subscriptionEndDate)return 0;let e=new Date;return Math.max(0,Math.ceil((r.subscriptionEndDate.getTime()-e.getTime())/864e5))},[r]),f=(0,s.useCallback)(async(e,r)=>{try{let{data:t,error:i}=await o.N.auth.signInWithPassword({email:e,password:r});if(i){if(i.message.includes("Email not confirmed"))throw d(!0),m(e),Error("Email not confirmed");if(i.message.includes("Invalid login credentials"))throw Error("Invalid login credentials");throw i}t.user&&(d(!1),m(null),await p(t.user))}catch(e){throw console.error("Login error:",e),Error(e.message||"Error al iniciar sesi\xf3n")}},[p]),g=(0,s.useCallback)(async()=>{try{let e=localStorage.getItem("demo_auth");if("true"===e){localStorage.removeItem("demo_auth"),localStorage.removeItem("demo_user"),t(null);return}let{error:r}=await o.N.auth.signOut();if(r)throw r;t(null)}catch(e){throw console.error("Logout error:",e),Error(e.message||"Error al cerrar sesi\xf3n")}},[]),v=(0,s.useCallback)(async(e,r,t)=>{try{let{data:i,error:s}=await o.N.auth.signUp({email:e,password:r,options:{data:{full_name:t}}});if(s)throw s;console.log("Signup successful, verification email sent to:",e),d(!0),m(e),i.user&&i.user.email_confirmed_at&&(await p(i.user),d(!1),m(null))}catch(e){throw console.error("Signup error:",e),Error(e.message||"Error al crear la cuenta")}},[p]),y=(0,s.useCallback)((e,i)=>{r&&(t(r=>{if(!r)return null;let t={...r,subscriptionType:e,subscriptionEndDate:i||null};return o.N.from("users").update({subscription_tier:e,subscription_status:"free"===e?"free":"active"}).eq("id",r.id).then(({error:e})=>{e&&console.error("Error updating subscription:",e)}),t}),window.dispatchEvent(new CustomEvent("subscriptionUpdated",{detail:{subscriptionType:e,endDate:i}})))},[r]),P=(0,s.useCallback)(()=>{d(!1),m(null)},[]),_=(0,s.useCallback)(e=>{if(!r)return 0;let i=new Date().toISOString().split("T")[0];return r.dailyUsage.date!==i?(t(e=>e?{...e,dailyUsage:{date:i,aiRequests:0,promptsUsed:0,scriptsGenerated:0}}:null),r.dailyLimits[e]):Math.max(0,r.dailyLimits[e]-r.dailyUsage[e])},[r]),w=(0,s.useCallback)(e=>{if(!r)return;let i=new Date().toISOString().split("T")[0];t(r=>r?r.dailyUsage.date!==i?{...r,dailyUsage:{date:i,aiRequests:+("aiRequests"===e),promptsUsed:+("promptsUsed"===e),scriptsGenerated:+("scriptsGenerated"===e)}}:{...r,dailyUsage:{...r.dailyUsage,[e]:r.dailyUsage[e]+1}}:null)},[r]),C=(0,s.useCallback)(e=>{if(!r)return!1;if("free"!==r.subscriptionType)return!0;let t=new Date().toISOString().split("T")[0];return r.dailyUsage.date!==t||r.dailyUsage[e]<r.dailyLimits[e]},[r]);return(0,i.jsx)(a.Provider,{value:{user:r,loading:n,isAuthenticated:!!r,needsEmailVerification:u,pendingVerificationEmail:c,login:f,logout:g,signup:v,hasActiveSubscription:h,getRemainingSubscriptionDays:b,updateSubscriptionStatus:y,clearEmailVerification:P,getRemainingUsage:_,incrementUsage:w,canUseFeature:C},children:e})},l=()=>{let e=(0,s.useContext)(a);if(void 0===e)throw Error("useAuth debe ser usado dentro de un AuthProvider");return e}},73918:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>s});var i=t(12907);let s=(0,i.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\contexts\\AuthContext.tsx","AuthProvider");(0,i.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\contexts\\AuthContext.tsx","useAuth")},80084:(e,r,t)=>{"use strict";t.d(r,{N:()=>a});var i=t(74370);let s="https://orqbkacsbpbybmnaabzo.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ycWJrYWNzYnBieWJtbmFhYnpvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTAxMDYsImV4cCI6MjA2NDcyNjEwNn0.5P7z_rOneANw9OZl8eoml5h4s4QtpcfCYy-FVL_uU2s";if(!s||!o)throw Error("Supabase environment variables NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are missing. Please check your .env file or environment configuration.");let a=(0,i.UU)(s,o)},82704:()=>{},85227:()=>{}};