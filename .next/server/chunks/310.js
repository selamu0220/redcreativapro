exports.id=310,exports.ids=[310],exports.modules={638:(e,r,t)=>{"use strict";t.d(r,{ThemeProvider:()=>i});var o=t(687),s=t(3210);let a=(0,s.createContext)({theme:"system",setTheme:()=>null});function i({children:e,defaultTheme:r="system"}){let[t,i]=(0,s.useState)(()=>r);return(0,o.jsx)(a.Provider,{value:{theme:t,setTheme:e=>{i(e)}},children:e})}},1424:(e,r,t)=>{Promise.resolve().then(t.bind(t,3772)),Promise.resolve().then(t.bind(t,638))},2704:()=>{},3280:(e,r,t)=>{Promise.resolve().then(t.bind(t,3918)),Promise.resolve().then(t.bind(t,8584))},3603:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6444,23)),Promise.resolve().then(t.t.bind(t,6042,23)),Promise.resolve().then(t.t.bind(t,8170,23)),Promise.resolve().then(t.t.bind(t,9477,23)),Promise.resolve().then(t.t.bind(t,9345,23)),Promise.resolve().then(t.t.bind(t,2089,23)),Promise.resolve().then(t.t.bind(t,6577,23)),Promise.resolve().then(t.t.bind(t,1307,23))},3772:(e,r,t)=>{"use strict";t.d(r,{A:()=>n,AuthProvider:()=>i});var o=t(687),s=t(3210);!function(){var e=Error("Cannot find module './c:UsersprogramarDocumentsGitHub\redcreativaproapplibsupabase'");throw e.code="MODULE_NOT_FOUND",e}();let a=(0,s.createContext)(void 0),i=({children:e})=>{let[r,t]=(0,s.useState)(null),[i,n]=(0,s.useState)(!0),[l,u]=(0,s.useState)(!1),[d,c]=(0,s.useState)(null);console.log("AuthProvider: Rendering with loading:",i,"user:",r?"exists":"null");let p=(0,s.useCallback)(async e=>{try{let r;n(!0);let{data:o,error:s}=await Object(function(){var e=Error("Cannot find module './c:UsersprogramarDocumentsGitHub\redcreativaproapplibsupabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("users").select("*").eq("id",e.id).single();if(s&&"PGRST116"!==s.code)return void console.error("Error loading profile:",s);if(o)r=o;else{let t={id:e.id,email:e.email,full_name:e.user_metadata?.full_name||e.email.split("@")[0],subscription_tier:"free",subscription_status:"free",subscription_end_date:null},{data:o,error:s}=await Object(function(){var e=Error("Cannot find module './c:UsersprogramarDocumentsGitHub\redcreativaproapplibsupabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("users").insert(t).select().single();if(s)return void console.error("Error creating profile:",s);r=o}let a={id:r.id,email:r.email,name:r.full_name,subscriptionType:r.subscription_tier,subscriptionEndDate:r.subscription_end_date?new Date(r.subscription_end_date):null,dailyUsage:{date:new Date().toISOString().split("T")[0],aiRequests:0,promptsUsed:0,scriptsGenerated:0},dailyLimits:{aiRequests:100,promptsUsed:20,scriptsGenerated:5}};t(a)}catch(e){console.error("Error in loadUserProfile:",e),t(null)}finally{n(!1)}},[]);(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("demo_auth"),r=localStorage.getItem("demo_user");if("true"===e&&r)try{let e=JSON.parse(r);t(e),n(!1),console.log("AuthProvider: Demo mode initialized with user:",e);return}catch(e){console.error("Error parsing demo user:",e),localStorage.removeItem("demo_auth"),localStorage.removeItem("demo_user")}let{data:{session:o}}=await Object(function(){var e=Error("Cannot find module './c:UsersprogramarDocumentsGitHub\redcreativaproapplibsupabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.getSession();if(o?.user)try{await p(o.user)}catch(e){console.error("Error loading user profile on session check:",e)}}catch(e){console.error("Error initializing auth:",e)}finally{n(!1)}})();let{data:{subscription:e}}=Object(function(){var e=Error("Cannot find module './c:UsersprogramarDocumentsGitHub\redcreativaproapplibsupabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.onAuthStateChange(async(e,r)=>{if("SIGNED_IN"===e&&r?.user)try{await p(r.user),u(!1),c(null)}catch(e){console.error("Error loading user profile on auth change:",e)}else"SIGNED_OUT"===e&&(t(null),u(!1),c(null))});return()=>e.unsubscribe()},[p]);let m=(0,s.useCallback)(()=>!!r&&("free"===r.subscriptionType||!r.subscriptionEndDate||new Date<r.subscriptionEndDate),[r]),h=(0,s.useCallback)(()=>{if(!r||!r.subscriptionEndDate)return 0;let e=new Date;return Math.max(0,Math.ceil((r.subscriptionEndDate.getTime()-e.getTime())/864e5))},[r]),b=(0,s.useCallback)(async(e,r)=>{try{let{data:t,error:o}=await Object(function(){var e=Error("Cannot find module './c:UsersprogramarDocumentsGitHub\redcreativaproapplibsupabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.signInWithPassword({email:e,password:r});if(o){if(o.message.includes("Email not confirmed"))throw u(!0),c(e),Error("Email not confirmed");if(o.message.includes("Invalid login credentials"))throw Error("Invalid login credentials");throw o}t.user&&(u(!1),c(null),await p(t.user))}catch(e){throw console.error("Login error:",e),Error(e.message||"Error al iniciar sesi\xf3n")}},[p]),v=(0,s.useCallback)(async()=>{try{let e=localStorage.getItem("demo_auth");if("true"===e){localStorage.removeItem("demo_auth"),localStorage.removeItem("demo_user"),t(null);return}let{error:r}=await Object(function(){var e=Error("Cannot find module './c:UsersprogramarDocumentsGitHub\redcreativaproapplibsupabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.signOut();if(r)throw r;t(null)}catch(e){throw console.error("Logout error:",e),Error(e.message||"Error al cerrar sesi\xf3n")}},[]),f=(0,s.useCallback)(async(e,r,t)=>{try{let{data:o,error:s}=await Object(function(){var e=Error("Cannot find module './c:UsersprogramarDocumentsGitHub\redcreativaproapplibsupabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.signUp({email:e,password:r,options:{data:{full_name:t}}});if(s)throw s;console.log("Signup successful, verification email sent to:",e),u(!0),c(e),o.user&&o.user.email_confirmed_at&&(await p(o.user),u(!1),c(null))}catch(e){throw console.error("Signup error:",e),Error(e.message||"Error al crear la cuenta")}},[p]),g=(0,s.useCallback)((e,o)=>{r&&(t(r=>{if(!r)return null;let t={...r,subscriptionType:e,subscriptionEndDate:o||null};return Object(function(){var e=Error("Cannot find module './c:UsersprogramarDocumentsGitHub\redcreativaproapplibsupabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("users").update({subscription_tier:e,subscription_status:"free"===e?"free":"active"}).eq("id",r.id).then(({error:e})=>{e&&console.error("Error updating subscription:",e)}),t}),window.dispatchEvent(new CustomEvent("subscriptionUpdated",{detail:{subscriptionType:e,endDate:o}})))},[r]),E=(0,s.useCallback)(()=>{u(!1),c(null)},[]),U=(0,s.useCallback)(e=>{if(!r)return 0;let o=new Date().toISOString().split("T")[0];return r.dailyUsage.date!==o?(t(e=>e?{...e,dailyUsage:{date:o,aiRequests:0,promptsUsed:0,scriptsGenerated:0}}:null),r.dailyLimits[e]):Math.max(0,r.dailyLimits[e]-r.dailyUsage[e])},[r]),C=(0,s.useCallback)(e=>{if(!r)return;let o=new Date().toISOString().split("T")[0];t(r=>r?r.dailyUsage.date!==o?{...r,dailyUsage:{date:o,aiRequests:+("aiRequests"===e),promptsUsed:+("promptsUsed"===e),scriptsGenerated:+("scriptsGenerated"===e)}}:{...r,dailyUsage:{...r.dailyUsage,[e]:r.dailyUsage[e]+1}}:null)},[r]),w=(0,s.useCallback)(e=>{if(!r)return!1;if("free"!==r.subscriptionType)return!0;let t=new Date().toISOString().split("T")[0];return r.dailyUsage.date!==t||r.dailyUsage[e]<r.dailyLimits[e]},[r]);return(0,o.jsx)(a.Provider,{value:{user:r,loading:i,isAuthenticated:!!r,needsEmailVerification:l,pendingVerificationEmail:d,login:b,logout:v,signup:f,hasActiveSubscription:m,getRemainingSubscriptionDays:h,updateSubscriptionStatus:g,clearEmailVerification:E,getRemainingUsage:U,incrementUsage:C,canUseFeature:w},children:e})},n=()=>{let e=(0,s.useContext)(a);if(void 0===e)throw Error("useAuth debe ser usado dentro de un AuthProvider");return e}},3851:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6346,23)),Promise.resolve().then(t.t.bind(t,7924,23)),Promise.resolve().then(t.t.bind(t,5656,23)),Promise.resolve().then(t.t.bind(t,99,23)),Promise.resolve().then(t.t.bind(t,8243,23)),Promise.resolve().then(t.t.bind(t,8827,23)),Promise.resolve().then(t.t.bind(t,2763,23)),Promise.resolve().then(t.t.bind(t,7173,23))},3918:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>s});var o=t(2907);let s=(0,o.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\contexts\\AuthContext.tsx","AuthProvider");(0,o.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\contexts\\AuthContext.tsx","useAuth")},8014:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u,metadata:()=>l});var o=t(7413),s=t(1421),a=t.n(s),i=t(8584),n=t(3918);t(2704);let l={title:"Red Creativa Pro",description:"Plataforma integral para creativos y profesionales",keywords:"creatividad, productividad, blog, recursos, proyectos",authors:[{name:"Red Creativa Pro"}],openGraph:{title:"Red Creativa Pro",description:"Plataforma integral para creativos y profesionales",type:"website",locale:"es_ES"}};function u({children:e}){return(0,o.jsx)("html",{lang:"es",suppressHydrationWarning:!0,children:(0,o.jsx)("body",{className:a().className,children:(0,o.jsx)(i.ThemeProvider,{defaultTheme:"light",children:(0,o.jsx)(n.AuthProvider,{children:e})})})})}},8584:(e,r,t)=>{"use strict";t.d(r,{ThemeProvider:()=>s});var o=t(2907);let s=(0,o.registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\ui\\theme-provider.tsx","ThemeProvider");(0,o.registerClientReference)(function(){throw Error("Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\programar\\Documents\\GitHub\\redcreativapro\\app\\ui\\theme-provider.tsx","useTheme")}};