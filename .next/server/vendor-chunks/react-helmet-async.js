"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/react-helmet-async";
exports.ids = ["vendor-chunks/react-helmet-async"];
exports.modules = {

/***/ "(ssr)/./node_modules/react-helmet-async/lib/index.esm.js":
/*!**********************************************************!*\
  !*** ./node_modules/react-helmet-async/lib/index.esm.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Helmet: () => (/* binding */ Helmet),\n/* harmony export */   HelmetData: () => (/* binding */ HelmetData),\n/* harmony export */   HelmetProvider: () => (/* binding */ HelmetProvider)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_fast_compare__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-fast-compare */ \"(ssr)/./node_modules/react-fast-compare/index.js\");\n/* harmony import */ var react_fast_compare__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_fast_compare__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var invariant__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! invariant */ \"(ssr)/./node_modules/invariant/invariant.js\");\n/* harmony import */ var invariant__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(invariant__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var shallowequal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shallowequal */ \"(ssr)/./node_modules/shallowequal/index.js\");\n/* harmony import */ var shallowequal__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(shallowequal__WEBPACK_IMPORTED_MODULE_3__);\n// src/index.tsx\n\n\n\n\n// src/Provider.tsx\n\n\n// src/server.ts\n\n\n// src/constants.ts\nvar TAG_NAMES = /* @__PURE__ */ ((TAG_NAMES2) => {\n  TAG_NAMES2[\"BASE\"] = \"base\";\n  TAG_NAMES2[\"BODY\"] = \"body\";\n  TAG_NAMES2[\"HEAD\"] = \"head\";\n  TAG_NAMES2[\"HTML\"] = \"html\";\n  TAG_NAMES2[\"LINK\"] = \"link\";\n  TAG_NAMES2[\"META\"] = \"meta\";\n  TAG_NAMES2[\"NOSCRIPT\"] = \"noscript\";\n  TAG_NAMES2[\"SCRIPT\"] = \"script\";\n  TAG_NAMES2[\"STYLE\"] = \"style\";\n  TAG_NAMES2[\"TITLE\"] = \"title\";\n  TAG_NAMES2[\"FRAGMENT\"] = \"Symbol(react.fragment)\";\n  return TAG_NAMES2;\n})(TAG_NAMES || {});\nvar SEO_PRIORITY_TAGS = {\n  link: { rel: [\"amphtml\", \"canonical\", \"alternate\"] },\n  script: { type: [\"application/ld+json\"] },\n  meta: {\n    charset: \"\",\n    name: [\"generator\", \"robots\", \"description\"],\n    property: [\n      \"og:type\",\n      \"og:title\",\n      \"og:url\",\n      \"og:image\",\n      \"og:image:alt\",\n      \"og:description\",\n      \"twitter:url\",\n      \"twitter:title\",\n      \"twitter:description\",\n      \"twitter:image\",\n      \"twitter:image:alt\",\n      \"twitter:card\",\n      \"twitter:site\"\n    ]\n  }\n};\nvar VALID_TAG_NAMES = Object.values(TAG_NAMES);\nvar REACT_TAG_MAP = {\n  accesskey: \"accessKey\",\n  charset: \"charSet\",\n  class: \"className\",\n  contenteditable: \"contentEditable\",\n  contextmenu: \"contextMenu\",\n  \"http-equiv\": \"httpEquiv\",\n  itemprop: \"itemProp\",\n  tabindex: \"tabIndex\"\n};\nvar HTML_TAG_MAP = Object.entries(REACT_TAG_MAP).reduce(\n  (carry, [key, value]) => {\n    carry[value] = key;\n    return carry;\n  },\n  {}\n);\nvar HELMET_ATTRIBUTE = \"data-rh\";\n\n// src/utils.ts\nvar HELMET_PROPS = {\n  DEFAULT_TITLE: \"defaultTitle\",\n  DEFER: \"defer\",\n  ENCODE_SPECIAL_CHARACTERS: \"encodeSpecialCharacters\",\n  ON_CHANGE_CLIENT_STATE: \"onChangeClientState\",\n  TITLE_TEMPLATE: \"titleTemplate\",\n  PRIORITIZE_SEO_TAGS: \"prioritizeSeoTags\"\n};\nvar getInnermostProperty = (propsList, property) => {\n  for (let i = propsList.length - 1; i >= 0; i -= 1) {\n    const props = propsList[i];\n    if (Object.prototype.hasOwnProperty.call(props, property)) {\n      return props[property];\n    }\n  }\n  return null;\n};\nvar getTitleFromPropsList = (propsList) => {\n  let innermostTitle = getInnermostProperty(propsList, \"title\" /* TITLE */);\n  const innermostTemplate = getInnermostProperty(propsList, HELMET_PROPS.TITLE_TEMPLATE);\n  if (Array.isArray(innermostTitle)) {\n    innermostTitle = innermostTitle.join(\"\");\n  }\n  if (innermostTemplate && innermostTitle) {\n    return innermostTemplate.replace(/%s/g, () => innermostTitle);\n  }\n  const innermostDefaultTitle = getInnermostProperty(propsList, HELMET_PROPS.DEFAULT_TITLE);\n  return innermostTitle || innermostDefaultTitle || void 0;\n};\nvar getOnChangeClientState = (propsList) => getInnermostProperty(propsList, HELMET_PROPS.ON_CHANGE_CLIENT_STATE) || (() => {\n});\nvar getAttributesFromPropsList = (tagType, propsList) => propsList.filter((props) => typeof props[tagType] !== \"undefined\").map((props) => props[tagType]).reduce((tagAttrs, current) => ({ ...tagAttrs, ...current }), {});\nvar getBaseTagFromPropsList = (primaryAttributes, propsList) => propsList.filter((props) => typeof props[\"base\" /* BASE */] !== \"undefined\").map((props) => props[\"base\" /* BASE */]).reverse().reduce((innermostBaseTag, tag) => {\n  if (!innermostBaseTag.length) {\n    const keys = Object.keys(tag);\n    for (let i = 0; i < keys.length; i += 1) {\n      const attributeKey = keys[i];\n      const lowerCaseAttributeKey = attributeKey.toLowerCase();\n      if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && tag[lowerCaseAttributeKey]) {\n        return innermostBaseTag.concat(tag);\n      }\n    }\n  }\n  return innermostBaseTag;\n}, []);\nvar warn = (msg) => console && typeof console.warn === \"function\" && console.warn(msg);\nvar getTagsFromPropsList = (tagName, primaryAttributes, propsList) => {\n  const approvedSeenTags = {};\n  return propsList.filter((props) => {\n    if (Array.isArray(props[tagName])) {\n      return true;\n    }\n    if (typeof props[tagName] !== \"undefined\") {\n      warn(\n        `Helmet: ${tagName} should be of type \"Array\". Instead found type \"${typeof props[tagName]}\"`\n      );\n    }\n    return false;\n  }).map((props) => props[tagName]).reverse().reduce((approvedTags, instanceTags) => {\n    const instanceSeenTags = {};\n    instanceTags.filter((tag) => {\n      let primaryAttributeKey;\n      const keys2 = Object.keys(tag);\n      for (let i = 0; i < keys2.length; i += 1) {\n        const attributeKey = keys2[i];\n        const lowerCaseAttributeKey = attributeKey.toLowerCase();\n        if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && !(primaryAttributeKey === \"rel\" /* REL */ && tag[primaryAttributeKey].toLowerCase() === \"canonical\") && !(lowerCaseAttributeKey === \"rel\" /* REL */ && tag[lowerCaseAttributeKey].toLowerCase() === \"stylesheet\")) {\n          primaryAttributeKey = lowerCaseAttributeKey;\n        }\n        if (primaryAttributes.indexOf(attributeKey) !== -1 && (attributeKey === \"innerHTML\" /* INNER_HTML */ || attributeKey === \"cssText\" /* CSS_TEXT */ || attributeKey === \"itemprop\" /* ITEM_PROP */)) {\n          primaryAttributeKey = attributeKey;\n        }\n      }\n      if (!primaryAttributeKey || !tag[primaryAttributeKey]) {\n        return false;\n      }\n      const value = tag[primaryAttributeKey].toLowerCase();\n      if (!approvedSeenTags[primaryAttributeKey]) {\n        approvedSeenTags[primaryAttributeKey] = {};\n      }\n      if (!instanceSeenTags[primaryAttributeKey]) {\n        instanceSeenTags[primaryAttributeKey] = {};\n      }\n      if (!approvedSeenTags[primaryAttributeKey][value]) {\n        instanceSeenTags[primaryAttributeKey][value] = true;\n        return true;\n      }\n      return false;\n    }).reverse().forEach((tag) => approvedTags.push(tag));\n    const keys = Object.keys(instanceSeenTags);\n    for (let i = 0; i < keys.length; i += 1) {\n      const attributeKey = keys[i];\n      const tagUnion = {\n        ...approvedSeenTags[attributeKey],\n        ...instanceSeenTags[attributeKey]\n      };\n      approvedSeenTags[attributeKey] = tagUnion;\n    }\n    return approvedTags;\n  }, []).reverse();\n};\nvar getAnyTrueFromPropsList = (propsList, checkedTag) => {\n  if (Array.isArray(propsList) && propsList.length) {\n    for (let index = 0; index < propsList.length; index += 1) {\n      const prop = propsList[index];\n      if (prop[checkedTag]) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\nvar reducePropsToState = (propsList) => ({\n  baseTag: getBaseTagFromPropsList([\"href\" /* HREF */], propsList),\n  bodyAttributes: getAttributesFromPropsList(\"bodyAttributes\" /* BODY */, propsList),\n  defer: getInnermostProperty(propsList, HELMET_PROPS.DEFER),\n  encode: getInnermostProperty(propsList, HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),\n  htmlAttributes: getAttributesFromPropsList(\"htmlAttributes\" /* HTML */, propsList),\n  linkTags: getTagsFromPropsList(\n    \"link\" /* LINK */,\n    [\"rel\" /* REL */, \"href\" /* HREF */],\n    propsList\n  ),\n  metaTags: getTagsFromPropsList(\n    \"meta\" /* META */,\n    [\n      \"name\" /* NAME */,\n      \"charset\" /* CHARSET */,\n      \"http-equiv\" /* HTTPEQUIV */,\n      \"property\" /* PROPERTY */,\n      \"itemprop\" /* ITEM_PROP */\n    ],\n    propsList\n  ),\n  noscriptTags: getTagsFromPropsList(\"noscript\" /* NOSCRIPT */, [\"innerHTML\" /* INNER_HTML */], propsList),\n  onChangeClientState: getOnChangeClientState(propsList),\n  scriptTags: getTagsFromPropsList(\n    \"script\" /* SCRIPT */,\n    [\"src\" /* SRC */, \"innerHTML\" /* INNER_HTML */],\n    propsList\n  ),\n  styleTags: getTagsFromPropsList(\"style\" /* STYLE */, [\"cssText\" /* CSS_TEXT */], propsList),\n  title: getTitleFromPropsList(propsList),\n  titleAttributes: getAttributesFromPropsList(\"titleAttributes\" /* TITLE */, propsList),\n  prioritizeSeoTags: getAnyTrueFromPropsList(propsList, HELMET_PROPS.PRIORITIZE_SEO_TAGS)\n});\nvar flattenArray = (possibleArray) => Array.isArray(possibleArray) ? possibleArray.join(\"\") : possibleArray;\nvar checkIfPropsMatch = (props, toMatch) => {\n  const keys = Object.keys(props);\n  for (let i = 0; i < keys.length; i += 1) {\n    if (toMatch[keys[i]] && toMatch[keys[i]].includes(props[keys[i]])) {\n      return true;\n    }\n  }\n  return false;\n};\nvar prioritizer = (elementsList, propsToMatch) => {\n  if (Array.isArray(elementsList)) {\n    return elementsList.reduce(\n      (acc, elementAttrs) => {\n        if (checkIfPropsMatch(elementAttrs, propsToMatch)) {\n          acc.priority.push(elementAttrs);\n        } else {\n          acc.default.push(elementAttrs);\n        }\n        return acc;\n      },\n      { priority: [], default: [] }\n    );\n  }\n  return { default: elementsList, priority: [] };\n};\nvar without = (obj, key) => {\n  return {\n    ...obj,\n    [key]: void 0\n  };\n};\n\n// src/server.ts\nvar SELF_CLOSING_TAGS = [\"noscript\" /* NOSCRIPT */, \"script\" /* SCRIPT */, \"style\" /* STYLE */];\nvar encodeSpecialCharacters = (str, encode = true) => {\n  if (encode === false) {\n    return String(str);\n  }\n  return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#x27;\");\n};\nvar generateElementAttributesAsString = (attributes) => Object.keys(attributes).reduce((str, key) => {\n  const attr = typeof attributes[key] !== \"undefined\" ? `${key}=\"${attributes[key]}\"` : `${key}`;\n  return str ? `${str} ${attr}` : attr;\n}, \"\");\nvar generateTitleAsString = (type, title, attributes, encode) => {\n  const attributeString = generateElementAttributesAsString(attributes);\n  const flattenedTitle = flattenArray(title);\n  return attributeString ? `<${type} ${HELMET_ATTRIBUTE}=\"true\" ${attributeString}>${encodeSpecialCharacters(\n    flattenedTitle,\n    encode\n  )}</${type}>` : `<${type} ${HELMET_ATTRIBUTE}=\"true\">${encodeSpecialCharacters(\n    flattenedTitle,\n    encode\n  )}</${type}>`;\n};\nvar generateTagsAsString = (type, tags, encode = true) => tags.reduce((str, t) => {\n  const tag = t;\n  const attributeHtml = Object.keys(tag).filter(\n    (attribute) => !(attribute === \"innerHTML\" /* INNER_HTML */ || attribute === \"cssText\" /* CSS_TEXT */)\n  ).reduce((string, attribute) => {\n    const attr = typeof tag[attribute] === \"undefined\" ? attribute : `${attribute}=\"${encodeSpecialCharacters(tag[attribute], encode)}\"`;\n    return string ? `${string} ${attr}` : attr;\n  }, \"\");\n  const tagContent = tag.innerHTML || tag.cssText || \"\";\n  const isSelfClosing = SELF_CLOSING_TAGS.indexOf(type) === -1;\n  return `${str}<${type} ${HELMET_ATTRIBUTE}=\"true\" ${attributeHtml}${isSelfClosing ? `/>` : `>${tagContent}</${type}>`}`;\n}, \"\");\nvar convertElementAttributesToReactProps = (attributes, initProps = {}) => Object.keys(attributes).reduce((obj, key) => {\n  const mapped = REACT_TAG_MAP[key];\n  obj[mapped || key] = attributes[key];\n  return obj;\n}, initProps);\nvar generateTitleAsReactComponent = (_type, title, attributes) => {\n  const initProps = {\n    key: title,\n    [HELMET_ATTRIBUTE]: true\n  };\n  const props = convertElementAttributesToReactProps(attributes, initProps);\n  return [react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"title\" /* TITLE */, props, title)];\n};\nvar generateTagsAsReactComponent = (type, tags) => tags.map((tag, i) => {\n  const mappedTag = {\n    key: i,\n    [HELMET_ATTRIBUTE]: true\n  };\n  Object.keys(tag).forEach((attribute) => {\n    const mapped = REACT_TAG_MAP[attribute];\n    const mappedAttribute = mapped || attribute;\n    if (mappedAttribute === \"innerHTML\" /* INNER_HTML */ || mappedAttribute === \"cssText\" /* CSS_TEXT */) {\n      const content = tag.innerHTML || tag.cssText;\n      mappedTag.dangerouslySetInnerHTML = { __html: content };\n    } else {\n      mappedTag[mappedAttribute] = tag[attribute];\n    }\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(type, mappedTag);\n});\nvar getMethodsForTag = (type, tags, encode = true) => {\n  switch (type) {\n    case \"title\" /* TITLE */:\n      return {\n        toComponent: () => generateTitleAsReactComponent(type, tags.title, tags.titleAttributes),\n        toString: () => generateTitleAsString(type, tags.title, tags.titleAttributes, encode)\n      };\n    case \"bodyAttributes\" /* BODY */:\n    case \"htmlAttributes\" /* HTML */:\n      return {\n        toComponent: () => convertElementAttributesToReactProps(tags),\n        toString: () => generateElementAttributesAsString(tags)\n      };\n    default:\n      return {\n        toComponent: () => generateTagsAsReactComponent(type, tags),\n        toString: () => generateTagsAsString(type, tags, encode)\n      };\n  }\n};\nvar getPriorityMethods = ({ metaTags, linkTags, scriptTags, encode }) => {\n  const meta = prioritizer(metaTags, SEO_PRIORITY_TAGS.meta);\n  const link = prioritizer(linkTags, SEO_PRIORITY_TAGS.link);\n  const script = prioritizer(scriptTags, SEO_PRIORITY_TAGS.script);\n  const priorityMethods = {\n    toComponent: () => [\n      ...generateTagsAsReactComponent(\"meta\" /* META */, meta.priority),\n      ...generateTagsAsReactComponent(\"link\" /* LINK */, link.priority),\n      ...generateTagsAsReactComponent(\"script\" /* SCRIPT */, script.priority)\n    ],\n    toString: () => (\n      // generate all the tags as strings and concatenate them\n      `${getMethodsForTag(\"meta\" /* META */, meta.priority, encode)} ${getMethodsForTag(\n        \"link\" /* LINK */,\n        link.priority,\n        encode\n      )} ${getMethodsForTag(\"script\" /* SCRIPT */, script.priority, encode)}`\n    )\n  };\n  return {\n    priorityMethods,\n    metaTags: meta.default,\n    linkTags: link.default,\n    scriptTags: script.default\n  };\n};\nvar mapStateOnServer = (props) => {\n  const {\n    baseTag,\n    bodyAttributes,\n    encode = true,\n    htmlAttributes,\n    noscriptTags,\n    styleTags,\n    title = \"\",\n    titleAttributes,\n    prioritizeSeoTags\n  } = props;\n  let { linkTags, metaTags, scriptTags } = props;\n  let priorityMethods = {\n    toComponent: () => {\n    },\n    toString: () => \"\"\n  };\n  if (prioritizeSeoTags) {\n    ({ priorityMethods, linkTags, metaTags, scriptTags } = getPriorityMethods(props));\n  }\n  return {\n    priority: priorityMethods,\n    base: getMethodsForTag(\"base\" /* BASE */, baseTag, encode),\n    bodyAttributes: getMethodsForTag(\"bodyAttributes\" /* BODY */, bodyAttributes, encode),\n    htmlAttributes: getMethodsForTag(\"htmlAttributes\" /* HTML */, htmlAttributes, encode),\n    link: getMethodsForTag(\"link\" /* LINK */, linkTags, encode),\n    meta: getMethodsForTag(\"meta\" /* META */, metaTags, encode),\n    noscript: getMethodsForTag(\"noscript\" /* NOSCRIPT */, noscriptTags, encode),\n    script: getMethodsForTag(\"script\" /* SCRIPT */, scriptTags, encode),\n    style: getMethodsForTag(\"style\" /* STYLE */, styleTags, encode),\n    title: getMethodsForTag(\"title\" /* TITLE */, { title, titleAttributes }, encode)\n  };\n};\nvar server_default = mapStateOnServer;\n\n// src/HelmetData.ts\nvar instances = [];\nvar isDocument = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\nvar HelmetData = class {\n  instances = [];\n  canUseDOM = isDocument;\n  context;\n  value = {\n    setHelmet: (serverState) => {\n      this.context.helmet = serverState;\n    },\n    helmetInstances: {\n      get: () => this.canUseDOM ? instances : this.instances,\n      add: (instance) => {\n        (this.canUseDOM ? instances : this.instances).push(instance);\n      },\n      remove: (instance) => {\n        const index = (this.canUseDOM ? instances : this.instances).indexOf(instance);\n        (this.canUseDOM ? instances : this.instances).splice(index, 1);\n      }\n    }\n  };\n  constructor(context, canUseDOM) {\n    this.context = context;\n    this.canUseDOM = canUseDOM || false;\n    if (!canUseDOM) {\n      context.helmet = server_default({\n        baseTag: [],\n        bodyAttributes: {},\n        encodeSpecialCharacters: true,\n        htmlAttributes: {},\n        linkTags: [],\n        metaTags: [],\n        noscriptTags: [],\n        scriptTags: [],\n        styleTags: [],\n        title: \"\",\n        titleAttributes: {}\n      });\n    }\n  }\n};\n\n// src/Provider.tsx\nvar defaultValue = {};\nvar Context = react__WEBPACK_IMPORTED_MODULE_0___default().createContext(defaultValue);\nvar HelmetProvider = class _HelmetProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  static canUseDOM = isDocument;\n  helmetData;\n  constructor(props) {\n    super(props);\n    this.helmetData = new HelmetData(this.props.context || {}, _HelmetProvider.canUseDOM);\n  }\n  render() {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Context.Provider, { value: this.helmetData.value }, this.props.children);\n  }\n};\n\n// src/Dispatcher.tsx\n\n\n\n// src/client.ts\nvar updateTags = (type, tags) => {\n  const headElement = document.head || document.querySelector(\"head\" /* HEAD */);\n  const tagNodes = headElement.querySelectorAll(`${type}[${HELMET_ATTRIBUTE}]`);\n  const oldTags = [].slice.call(tagNodes);\n  const newTags = [];\n  let indexToDelete;\n  if (tags && tags.length) {\n    tags.forEach((tag) => {\n      const newElement = document.createElement(type);\n      for (const attribute in tag) {\n        if (Object.prototype.hasOwnProperty.call(tag, attribute)) {\n          if (attribute === \"innerHTML\" /* INNER_HTML */) {\n            newElement.innerHTML = tag.innerHTML;\n          } else if (attribute === \"cssText\" /* CSS_TEXT */) {\n            if (newElement.styleSheet) {\n              newElement.styleSheet.cssText = tag.cssText;\n            } else {\n              newElement.appendChild(document.createTextNode(tag.cssText));\n            }\n          } else {\n            const attr = attribute;\n            const value = typeof tag[attr] === \"undefined\" ? \"\" : tag[attr];\n            newElement.setAttribute(attribute, value);\n          }\n        }\n      }\n      newElement.setAttribute(HELMET_ATTRIBUTE, \"true\");\n      if (oldTags.some((existingTag, index) => {\n        indexToDelete = index;\n        return newElement.isEqualNode(existingTag);\n      })) {\n        oldTags.splice(indexToDelete, 1);\n      } else {\n        newTags.push(newElement);\n      }\n    });\n  }\n  oldTags.forEach((tag) => tag.parentNode?.removeChild(tag));\n  newTags.forEach((tag) => headElement.appendChild(tag));\n  return {\n    oldTags,\n    newTags\n  };\n};\nvar updateAttributes = (tagName, attributes) => {\n  const elementTag = document.getElementsByTagName(tagName)[0];\n  if (!elementTag) {\n    return;\n  }\n  const helmetAttributeString = elementTag.getAttribute(HELMET_ATTRIBUTE);\n  const helmetAttributes = helmetAttributeString ? helmetAttributeString.split(\",\") : [];\n  const attributesToRemove = [...helmetAttributes];\n  const attributeKeys = Object.keys(attributes);\n  for (const attribute of attributeKeys) {\n    const value = attributes[attribute] || \"\";\n    if (elementTag.getAttribute(attribute) !== value) {\n      elementTag.setAttribute(attribute, value);\n    }\n    if (helmetAttributes.indexOf(attribute) === -1) {\n      helmetAttributes.push(attribute);\n    }\n    const indexToSave = attributesToRemove.indexOf(attribute);\n    if (indexToSave !== -1) {\n      attributesToRemove.splice(indexToSave, 1);\n    }\n  }\n  for (let i = attributesToRemove.length - 1; i >= 0; i -= 1) {\n    elementTag.removeAttribute(attributesToRemove[i]);\n  }\n  if (helmetAttributes.length === attributesToRemove.length) {\n    elementTag.removeAttribute(HELMET_ATTRIBUTE);\n  } else if (elementTag.getAttribute(HELMET_ATTRIBUTE) !== attributeKeys.join(\",\")) {\n    elementTag.setAttribute(HELMET_ATTRIBUTE, attributeKeys.join(\",\"));\n  }\n};\nvar updateTitle = (title, attributes) => {\n  if (typeof title !== \"undefined\" && document.title !== title) {\n    document.title = flattenArray(title);\n  }\n  updateAttributes(\"title\" /* TITLE */, attributes);\n};\nvar commitTagChanges = (newState, cb) => {\n  const {\n    baseTag,\n    bodyAttributes,\n    htmlAttributes,\n    linkTags,\n    metaTags,\n    noscriptTags,\n    onChangeClientState,\n    scriptTags,\n    styleTags,\n    title,\n    titleAttributes\n  } = newState;\n  updateAttributes(\"body\" /* BODY */, bodyAttributes);\n  updateAttributes(\"html\" /* HTML */, htmlAttributes);\n  updateTitle(title, titleAttributes);\n  const tagUpdates = {\n    baseTag: updateTags(\"base\" /* BASE */, baseTag),\n    linkTags: updateTags(\"link\" /* LINK */, linkTags),\n    metaTags: updateTags(\"meta\" /* META */, metaTags),\n    noscriptTags: updateTags(\"noscript\" /* NOSCRIPT */, noscriptTags),\n    scriptTags: updateTags(\"script\" /* SCRIPT */, scriptTags),\n    styleTags: updateTags(\"style\" /* STYLE */, styleTags)\n  };\n  const addedTags = {};\n  const removedTags = {};\n  Object.keys(tagUpdates).forEach((tagType) => {\n    const { newTags, oldTags } = tagUpdates[tagType];\n    if (newTags.length) {\n      addedTags[tagType] = newTags;\n    }\n    if (oldTags.length) {\n      removedTags[tagType] = tagUpdates[tagType].oldTags;\n    }\n  });\n  if (cb) {\n    cb();\n  }\n  onChangeClientState(newState, addedTags, removedTags);\n};\nvar _helmetCallback = null;\nvar handleStateChangeOnClient = (newState) => {\n  if (_helmetCallback) {\n    cancelAnimationFrame(_helmetCallback);\n  }\n  if (newState.defer) {\n    _helmetCallback = requestAnimationFrame(() => {\n      commitTagChanges(newState, () => {\n        _helmetCallback = null;\n      });\n    });\n  } else {\n    commitTagChanges(newState);\n    _helmetCallback = null;\n  }\n};\nvar client_default = handleStateChangeOnClient;\n\n// src/Dispatcher.tsx\nvar HelmetDispatcher = class extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  rendered = false;\n  shouldComponentUpdate(nextProps) {\n    return !shallowequal__WEBPACK_IMPORTED_MODULE_3___default()(nextProps, this.props);\n  }\n  componentDidUpdate() {\n    this.emitChange();\n  }\n  componentWillUnmount() {\n    const { helmetInstances } = this.props.context;\n    helmetInstances.remove(this);\n    this.emitChange();\n  }\n  emitChange() {\n    const { helmetInstances, setHelmet } = this.props.context;\n    let serverState = null;\n    const state = reducePropsToState(\n      helmetInstances.get().map((instance) => {\n        const props = { ...instance.props };\n        delete props.context;\n        return props;\n      })\n    );\n    if (HelmetProvider.canUseDOM) {\n      client_default(state);\n    } else if (server_default) {\n      serverState = server_default(state);\n    }\n    setHelmet(serverState);\n  }\n  // componentWillMount will be deprecated\n  // for SSR, initialize on first render\n  // constructor is also unsafe in StrictMode\n  init() {\n    if (this.rendered) {\n      return;\n    }\n    this.rendered = true;\n    const { helmetInstances } = this.props.context;\n    helmetInstances.add(this);\n    this.emitChange();\n  }\n  render() {\n    this.init();\n    return null;\n  }\n};\n\n// src/index.tsx\nvar Helmet = class extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  static defaultProps = {\n    defer: true,\n    encodeSpecialCharacters: true,\n    prioritizeSeoTags: false\n  };\n  shouldComponentUpdate(nextProps) {\n    return !react_fast_compare__WEBPACK_IMPORTED_MODULE_1___default()(without(this.props, \"helmetData\"), without(nextProps, \"helmetData\"));\n  }\n  mapNestedChildrenToProps(child, nestedChildren) {\n    if (!nestedChildren) {\n      return null;\n    }\n    switch (child.type) {\n      case \"script\" /* SCRIPT */:\n      case \"noscript\" /* NOSCRIPT */:\n        return {\n          innerHTML: nestedChildren\n        };\n      case \"style\" /* STYLE */:\n        return {\n          cssText: nestedChildren\n        };\n      default:\n        throw new Error(\n          `<${child.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`\n        );\n    }\n  }\n  flattenArrayTypeChildren(child, arrayTypeChildren, newChildProps, nestedChildren) {\n    return {\n      ...arrayTypeChildren,\n      [child.type]: [\n        ...arrayTypeChildren[child.type] || [],\n        {\n          ...newChildProps,\n          ...this.mapNestedChildrenToProps(child, nestedChildren)\n        }\n      ]\n    };\n  }\n  mapObjectTypeChildren(child, newProps, newChildProps, nestedChildren) {\n    switch (child.type) {\n      case \"title\" /* TITLE */:\n        return {\n          ...newProps,\n          [child.type]: nestedChildren,\n          titleAttributes: { ...newChildProps }\n        };\n      case \"body\" /* BODY */:\n        return {\n          ...newProps,\n          bodyAttributes: { ...newChildProps }\n        };\n      case \"html\" /* HTML */:\n        return {\n          ...newProps,\n          htmlAttributes: { ...newChildProps }\n        };\n      default:\n        return {\n          ...newProps,\n          [child.type]: { ...newChildProps }\n        };\n    }\n  }\n  mapArrayTypeChildrenToProps(arrayTypeChildren, newProps) {\n    let newFlattenedProps = { ...newProps };\n    Object.keys(arrayTypeChildren).forEach((arrayChildName) => {\n      newFlattenedProps = {\n        ...newFlattenedProps,\n        [arrayChildName]: arrayTypeChildren[arrayChildName]\n      };\n    });\n    return newFlattenedProps;\n  }\n  warnOnInvalidChildren(child, nestedChildren) {\n    invariant__WEBPACK_IMPORTED_MODULE_2___default()(\n      VALID_TAG_NAMES.some((name) => child.type === name),\n      typeof child.type === \"function\" ? `You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.` : `Only elements types ${VALID_TAG_NAMES.join(\n        \", \"\n      )} are allowed. Helmet does not support rendering <${child.type}> elements. Refer to our API for more information.`\n    );\n    invariant__WEBPACK_IMPORTED_MODULE_2___default()(\n      !nestedChildren || typeof nestedChildren === \"string\" || Array.isArray(nestedChildren) && !nestedChildren.some((nestedChild) => typeof nestedChild !== \"string\"),\n      `Helmet expects a string as a child of <${child.type}>. Did you forget to wrap your children in braces? ( <${child.type}>{\\`\\`}</${child.type}> ) Refer to our API for more information.`\n    );\n    return true;\n  }\n  mapChildrenToProps(children, newProps) {\n    let arrayTypeChildren = {};\n    react__WEBPACK_IMPORTED_MODULE_0___default().Children.forEach(children, (child) => {\n      if (!child || !child.props) {\n        return;\n      }\n      const { children: nestedChildren, ...childProps } = child.props;\n      const newChildProps = Object.keys(childProps).reduce((obj, key) => {\n        obj[HTML_TAG_MAP[key] || key] = childProps[key];\n        return obj;\n      }, {});\n      let { type } = child;\n      if (typeof type === \"symbol\") {\n        type = type.toString();\n      } else {\n        this.warnOnInvalidChildren(child, nestedChildren);\n      }\n      switch (type) {\n        case \"Symbol(react.fragment)\" /* FRAGMENT */:\n          newProps = this.mapChildrenToProps(nestedChildren, newProps);\n          break;\n        case \"link\" /* LINK */:\n        case \"meta\" /* META */:\n        case \"noscript\" /* NOSCRIPT */:\n        case \"script\" /* SCRIPT */:\n        case \"style\" /* STYLE */:\n          arrayTypeChildren = this.flattenArrayTypeChildren(\n            child,\n            arrayTypeChildren,\n            newChildProps,\n            nestedChildren\n          );\n          break;\n        default:\n          newProps = this.mapObjectTypeChildren(child, newProps, newChildProps, nestedChildren);\n          break;\n      }\n    });\n    return this.mapArrayTypeChildrenToProps(arrayTypeChildren, newProps);\n  }\n  render() {\n    const { children, ...props } = this.props;\n    let newProps = { ...props };\n    let { helmetData } = props;\n    if (children) {\n      newProps = this.mapChildrenToProps(children, newProps);\n    }\n    if (helmetData && !(helmetData instanceof HelmetData)) {\n      const data = helmetData;\n      helmetData = new HelmetData(data.context, true);\n      delete newProps.helmetData;\n    }\n    return helmetData ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(HelmetDispatcher, { ...newProps, context: helmetData.value }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Context.Consumer, null, (context) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(HelmetDispatcher, { ...newProps, context }));\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3QtaGVsbWV0LWFzeW5jL2xpYi9pbmRleC5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN3RDtBQUNYO0FBQ1g7O0FBRWxDO0FBQzBDOztBQUUxQztBQUMwQjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsaUJBQWlCO0FBQ2xCO0FBQ0EsVUFBVSw0Q0FBNEM7QUFDdEQsWUFBWSwrQkFBK0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsUUFBUTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDRMQUE0TCx5QkFBeUIsS0FBSztBQUMxTjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUJBQWlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFNBQVMsaURBQWlELHNCQUFzQjtBQUNuRztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxz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QzpcXFVzZXJzXFxwcm9ncmFtYXJcXERvY3VtZW50c1xcR2l0SHViXFxyZWRjcmVhdGl2YXByb1xcbm9kZV9tb2R1bGVzXFxyZWFjdC1oZWxtZXQtYXN5bmNcXGxpYlxcaW5kZXguZXNtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9pbmRleC50c3hcbmltcG9ydCBSZWFjdDMsIHsgQ29tcG9uZW50IGFzIENvbXBvbmVudDMgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBmYXN0Q29tcGFyZSBmcm9tIFwicmVhY3QtZmFzdC1jb21wYXJlXCI7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gXCJpbnZhcmlhbnRcIjtcblxuLy8gc3JjL1Byb3ZpZGVyLnRzeFxuaW1wb3J0IFJlYWN0MiwgeyBDb21wb25lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3NlcnZlci50c1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvY29uc3RhbnRzLnRzXG52YXIgVEFHX05BTUVTID0gLyogQF9fUFVSRV9fICovICgoVEFHX05BTUVTMikgPT4ge1xuICBUQUdfTkFNRVMyW1wiQkFTRVwiXSA9IFwiYmFzZVwiO1xuICBUQUdfTkFNRVMyW1wiQk9EWVwiXSA9IFwiYm9keVwiO1xuICBUQUdfTkFNRVMyW1wiSEVBRFwiXSA9IFwiaGVhZFwiO1xuICBUQUdfTkFNRVMyW1wiSFRNTFwiXSA9IFwiaHRtbFwiO1xuICBUQUdfTkFNRVMyW1wiTElOS1wiXSA9IFwibGlua1wiO1xuICBUQUdfTkFNRVMyW1wiTUVUQVwiXSA9IFwibWV0YVwiO1xuICBUQUdfTkFNRVMyW1wiTk9TQ1JJUFRcIl0gPSBcIm5vc2NyaXB0XCI7XG4gIFRBR19OQU1FUzJbXCJTQ1JJUFRcIl0gPSBcInNjcmlwdFwiO1xuICBUQUdfTkFNRVMyW1wiU1RZTEVcIl0gPSBcInN0eWxlXCI7XG4gIFRBR19OQU1FUzJbXCJUSVRMRVwiXSA9IFwidGl0bGVcIjtcbiAgVEFHX05BTUVTMltcIkZSQUdNRU5UXCJdID0gXCJTeW1ib2wocmVhY3QuZnJhZ21lbnQpXCI7XG4gIHJldHVybiBUQUdfTkFNRVMyO1xufSkoVEFHX05BTUVTIHx8IHt9KTtcbnZhciBTRU9fUFJJT1JJVFlfVEFHUyA9IHtcbiAgbGluazogeyByZWw6IFtcImFtcGh0bWxcIiwgXCJjYW5vbmljYWxcIiwgXCJhbHRlcm5hdGVcIl0gfSxcbiAgc2NyaXB0OiB7IHR5cGU6IFtcImFwcGxpY2F0aW9uL2xkK2pzb25cIl0gfSxcbiAgbWV0YToge1xuICAgIGNoYXJzZXQ6IFwiXCIsXG4gICAgbmFtZTogW1wiZ2VuZXJhdG9yXCIsIFwicm9ib3RzXCIsIFwiZGVzY3JpcHRpb25cIl0sXG4gICAgcHJvcGVydHk6IFtcbiAgICAgIFwib2c6dHlwZVwiLFxuICAgICAgXCJvZzp0aXRsZVwiLFxuICAgICAgXCJvZzp1cmxcIixcbiAgICAgIFwib2c6aW1hZ2VcIixcbiAgICAgIFwib2c6aW1hZ2U6YWx0XCIsXG4gICAgICBcIm9nOmRlc2NyaXB0aW9uXCIsXG4gICAgICBcInR3aXR0ZXI6dXJsXCIsXG4gICAgICBcInR3aXR0ZXI6dGl0bGVcIixcbiAgICAgIFwidHdpdHRlcjpkZXNjcmlwdGlvblwiLFxuICAgICAgXCJ0d2l0dGVyOmltYWdlXCIsXG4gICAgICBcInR3aXR0ZXI6aW1hZ2U6YWx0XCIsXG4gICAgICBcInR3aXR0ZXI6Y2FyZFwiLFxuICAgICAgXCJ0d2l0dGVyOnNpdGVcIlxuICAgIF1cbiAgfVxufTtcbnZhciBWQUxJRF9UQUdfTkFNRVMgPSBPYmplY3QudmFsdWVzKFRBR19OQU1FUyk7XG52YXIgUkVBQ1RfVEFHX01BUCA9IHtcbiAgYWNjZXNza2V5OiBcImFjY2Vzc0tleVwiLFxuICBjaGFyc2V0OiBcImNoYXJTZXRcIixcbiAgY2xhc3M6IFwiY2xhc3NOYW1lXCIsXG4gIGNvbnRlbnRlZGl0YWJsZTogXCJjb250ZW50RWRpdGFibGVcIixcbiAgY29udGV4dG1lbnU6IFwiY29udGV4dE1lbnVcIixcbiAgXCJodHRwLWVxdWl2XCI6IFwiaHR0cEVxdWl2XCIsXG4gIGl0ZW1wcm9wOiBcIml0ZW1Qcm9wXCIsXG4gIHRhYmluZGV4OiBcInRhYkluZGV4XCJcbn07XG52YXIgSFRNTF9UQUdfTUFQID0gT2JqZWN0LmVudHJpZXMoUkVBQ1RfVEFHX01BUCkucmVkdWNlKFxuICAoY2FycnksIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGNhcnJ5W3ZhbHVlXSA9IGtleTtcbiAgICByZXR1cm4gY2Fycnk7XG4gIH0sXG4gIHt9XG4pO1xudmFyIEhFTE1FVF9BVFRSSUJVVEUgPSBcImRhdGEtcmhcIjtcblxuLy8gc3JjL3V0aWxzLnRzXG52YXIgSEVMTUVUX1BST1BTID0ge1xuICBERUZBVUxUX1RJVExFOiBcImRlZmF1bHRUaXRsZVwiLFxuICBERUZFUjogXCJkZWZlclwiLFxuICBFTkNPREVfU1BFQ0lBTF9DSEFSQUNURVJTOiBcImVuY29kZVNwZWNpYWxDaGFyYWN0ZXJzXCIsXG4gIE9OX0NIQU5HRV9DTElFTlRfU1RBVEU6IFwib25DaGFuZ2VDbGllbnRTdGF0ZVwiLFxuICBUSVRMRV9URU1QTEFURTogXCJ0aXRsZVRlbXBsYXRlXCIsXG4gIFBSSU9SSVRJWkVfU0VPX1RBR1M6IFwicHJpb3JpdGl6ZVNlb1RhZ3NcIlxufTtcbnZhciBnZXRJbm5lcm1vc3RQcm9wZXJ0eSA9IChwcm9wc0xpc3QsIHByb3BlcnR5KSA9PiB7XG4gIGZvciAobGV0IGkgPSBwcm9wc0xpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICBjb25zdCBwcm9wcyA9IHByb3BzTGlzdFtpXTtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BzLCBwcm9wZXJ0eSkpIHtcbiAgICAgIHJldHVybiBwcm9wc1twcm9wZXJ0eV07XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcbnZhciBnZXRUaXRsZUZyb21Qcm9wc0xpc3QgPSAocHJvcHNMaXN0KSA9PiB7XG4gIGxldCBpbm5lcm1vc3RUaXRsZSA9IGdldElubmVybW9zdFByb3BlcnR5KHByb3BzTGlzdCwgXCJ0aXRsZVwiIC8qIFRJVExFICovKTtcbiAgY29uc3QgaW5uZXJtb3N0VGVtcGxhdGUgPSBnZXRJbm5lcm1vc3RQcm9wZXJ0eShwcm9wc0xpc3QsIEhFTE1FVF9QUk9QUy5USVRMRV9URU1QTEFURSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGlubmVybW9zdFRpdGxlKSkge1xuICAgIGlubmVybW9zdFRpdGxlID0gaW5uZXJtb3N0VGl0bGUuam9pbihcIlwiKTtcbiAgfVxuICBpZiAoaW5uZXJtb3N0VGVtcGxhdGUgJiYgaW5uZXJtb3N0VGl0bGUpIHtcbiAgICByZXR1cm4gaW5uZXJtb3N0VGVtcGxhdGUucmVwbGFjZSgvJXMvZywgKCkgPT4gaW5uZXJtb3N0VGl0bGUpO1xuICB9XG4gIGNvbnN0IGlubmVybW9zdERlZmF1bHRUaXRsZSA9IGdldElubmVybW9zdFByb3BlcnR5KHByb3BzTGlzdCwgSEVMTUVUX1BST1BTLkRFRkFVTFRfVElUTEUpO1xuICByZXR1cm4gaW5uZXJtb3N0VGl0bGUgfHwgaW5uZXJtb3N0RGVmYXVsdFRpdGxlIHx8IHZvaWQgMDtcbn07XG52YXIgZ2V0T25DaGFuZ2VDbGllbnRTdGF0ZSA9IChwcm9wc0xpc3QpID0+IGdldElubmVybW9zdFByb3BlcnR5KHByb3BzTGlzdCwgSEVMTUVUX1BST1BTLk9OX0NIQU5HRV9DTElFTlRfU1RBVEUpIHx8ICgoKSA9PiB7XG59KTtcbnZhciBnZXRBdHRyaWJ1dGVzRnJvbVByb3BzTGlzdCA9ICh0YWdUeXBlLCBwcm9wc0xpc3QpID0+IHByb3BzTGlzdC5maWx0ZXIoKHByb3BzKSA9PiB0eXBlb2YgcHJvcHNbdGFnVHlwZV0gIT09IFwidW5kZWZpbmVkXCIpLm1hcCgocHJvcHMpID0+IHByb3BzW3RhZ1R5cGVdKS5yZWR1Y2UoKHRhZ0F0dHJzLCBjdXJyZW50KSA9PiAoeyAuLi50YWdBdHRycywgLi4uY3VycmVudCB9KSwge30pO1xudmFyIGdldEJhc2VUYWdGcm9tUHJvcHNMaXN0ID0gKHByaW1hcnlBdHRyaWJ1dGVzLCBwcm9wc0xpc3QpID0+IHByb3BzTGlzdC5maWx0ZXIoKHByb3BzKSA9PiB0eXBlb2YgcHJvcHNbXCJiYXNlXCIgLyogQkFTRSAqL10gIT09IFwidW5kZWZpbmVkXCIpLm1hcCgocHJvcHMpID0+IHByb3BzW1wiYmFzZVwiIC8qIEJBU0UgKi9dKS5yZXZlcnNlKCkucmVkdWNlKChpbm5lcm1vc3RCYXNlVGFnLCB0YWcpID0+IHtcbiAgaWYgKCFpbm5lcm1vc3RCYXNlVGFnLmxlbmd0aCkge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0YWcpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgYXR0cmlidXRlS2V5ID0ga2V5c1tpXTtcbiAgICAgIGNvbnN0IGxvd2VyQ2FzZUF0dHJpYnV0ZUtleSA9IGF0dHJpYnV0ZUtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKHByaW1hcnlBdHRyaWJ1dGVzLmluZGV4T2YobG93ZXJDYXNlQXR0cmlidXRlS2V5KSAhPT0gLTEgJiYgdGFnW2xvd2VyQ2FzZUF0dHJpYnV0ZUtleV0pIHtcbiAgICAgICAgcmV0dXJuIGlubmVybW9zdEJhc2VUYWcuY29uY2F0KHRhZyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBpbm5lcm1vc3RCYXNlVGFnO1xufSwgW10pO1xudmFyIHdhcm4gPSAobXNnKSA9PiBjb25zb2xlICYmIHR5cGVvZiBjb25zb2xlLndhcm4gPT09IFwiZnVuY3Rpb25cIiAmJiBjb25zb2xlLndhcm4obXNnKTtcbnZhciBnZXRUYWdzRnJvbVByb3BzTGlzdCA9ICh0YWdOYW1lLCBwcmltYXJ5QXR0cmlidXRlcywgcHJvcHNMaXN0KSA9PiB7XG4gIGNvbnN0IGFwcHJvdmVkU2VlblRhZ3MgPSB7fTtcbiAgcmV0dXJuIHByb3BzTGlzdC5maWx0ZXIoKHByb3BzKSA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHNbdGFnTmFtZV0pKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwcm9wc1t0YWdOYW1lXSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgd2FybihcbiAgICAgICAgYEhlbG1ldDogJHt0YWdOYW1lfSBzaG91bGQgYmUgb2YgdHlwZSBcIkFycmF5XCIuIEluc3RlYWQgZm91bmQgdHlwZSBcIiR7dHlwZW9mIHByb3BzW3RhZ05hbWVdfVwiYFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KS5tYXAoKHByb3BzKSA9PiBwcm9wc1t0YWdOYW1lXSkucmV2ZXJzZSgpLnJlZHVjZSgoYXBwcm92ZWRUYWdzLCBpbnN0YW5jZVRhZ3MpID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZVNlZW5UYWdzID0ge307XG4gICAgaW5zdGFuY2VUYWdzLmZpbHRlcigodGFnKSA9PiB7XG4gICAgICBsZXQgcHJpbWFyeUF0dHJpYnV0ZUtleTtcbiAgICAgIGNvbnN0IGtleXMyID0gT2JqZWN0LmtleXModGFnKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5czIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlS2V5ID0ga2V5czJbaV07XG4gICAgICAgIGNvbnN0IGxvd2VyQ2FzZUF0dHJpYnV0ZUtleSA9IGF0dHJpYnV0ZUtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAocHJpbWFyeUF0dHJpYnV0ZXMuaW5kZXhPZihsb3dlckNhc2VBdHRyaWJ1dGVLZXkpICE9PSAtMSAmJiAhKHByaW1hcnlBdHRyaWJ1dGVLZXkgPT09IFwicmVsXCIgLyogUkVMICovICYmIHRhZ1twcmltYXJ5QXR0cmlidXRlS2V5XS50b0xvd2VyQ2FzZSgpID09PSBcImNhbm9uaWNhbFwiKSAmJiAhKGxvd2VyQ2FzZUF0dHJpYnV0ZUtleSA9PT0gXCJyZWxcIiAvKiBSRUwgKi8gJiYgdGFnW2xvd2VyQ2FzZUF0dHJpYnV0ZUtleV0udG9Mb3dlckNhc2UoKSA9PT0gXCJzdHlsZXNoZWV0XCIpKSB7XG4gICAgICAgICAgcHJpbWFyeUF0dHJpYnV0ZUtleSA9IGxvd2VyQ2FzZUF0dHJpYnV0ZUtleTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJpbWFyeUF0dHJpYnV0ZXMuaW5kZXhPZihhdHRyaWJ1dGVLZXkpICE9PSAtMSAmJiAoYXR0cmlidXRlS2V5ID09PSBcImlubmVySFRNTFwiIC8qIElOTkVSX0hUTUwgKi8gfHwgYXR0cmlidXRlS2V5ID09PSBcImNzc1RleHRcIiAvKiBDU1NfVEVYVCAqLyB8fCBhdHRyaWJ1dGVLZXkgPT09IFwiaXRlbXByb3BcIiAvKiBJVEVNX1BST1AgKi8pKSB7XG4gICAgICAgICAgcHJpbWFyeUF0dHJpYnV0ZUtleSA9IGF0dHJpYnV0ZUtleTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFwcmltYXJ5QXR0cmlidXRlS2V5IHx8ICF0YWdbcHJpbWFyeUF0dHJpYnV0ZUtleV0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgdmFsdWUgPSB0YWdbcHJpbWFyeUF0dHJpYnV0ZUtleV0udG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICghYXBwcm92ZWRTZWVuVGFnc1twcmltYXJ5QXR0cmlidXRlS2V5XSkge1xuICAgICAgICBhcHByb3ZlZFNlZW5UYWdzW3ByaW1hcnlBdHRyaWJ1dGVLZXldID0ge307XG4gICAgICB9XG4gICAgICBpZiAoIWluc3RhbmNlU2VlblRhZ3NbcHJpbWFyeUF0dHJpYnV0ZUtleV0pIHtcbiAgICAgICAgaW5zdGFuY2VTZWVuVGFnc1twcmltYXJ5QXR0cmlidXRlS2V5XSA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKCFhcHByb3ZlZFNlZW5UYWdzW3ByaW1hcnlBdHRyaWJ1dGVLZXldW3ZhbHVlXSkge1xuICAgICAgICBpbnN0YW5jZVNlZW5UYWdzW3ByaW1hcnlBdHRyaWJ1dGVLZXldW3ZhbHVlXSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pLnJldmVyc2UoKS5mb3JFYWNoKCh0YWcpID0+IGFwcHJvdmVkVGFncy5wdXNoKHRhZykpO1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhpbnN0YW5jZVNlZW5UYWdzKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZUtleSA9IGtleXNbaV07XG4gICAgICBjb25zdCB0YWdVbmlvbiA9IHtcbiAgICAgICAgLi4uYXBwcm92ZWRTZWVuVGFnc1thdHRyaWJ1dGVLZXldLFxuICAgICAgICAuLi5pbnN0YW5jZVNlZW5UYWdzW2F0dHJpYnV0ZUtleV1cbiAgICAgIH07XG4gICAgICBhcHByb3ZlZFNlZW5UYWdzW2F0dHJpYnV0ZUtleV0gPSB0YWdVbmlvbjtcbiAgICB9XG4gICAgcmV0dXJuIGFwcHJvdmVkVGFncztcbiAgfSwgW10pLnJldmVyc2UoKTtcbn07XG52YXIgZ2V0QW55VHJ1ZUZyb21Qcm9wc0xpc3QgPSAocHJvcHNMaXN0LCBjaGVja2VkVGFnKSA9PiB7XG4gIGlmIChBcnJheS5pc0FycmF5KHByb3BzTGlzdCkgJiYgcHJvcHNMaXN0Lmxlbmd0aCkge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBwcm9wc0xpc3QubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICBjb25zdCBwcm9wID0gcHJvcHNMaXN0W2luZGV4XTtcbiAgICAgIGlmIChwcm9wW2NoZWNrZWRUYWddKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xudmFyIHJlZHVjZVByb3BzVG9TdGF0ZSA9IChwcm9wc0xpc3QpID0+ICh7XG4gIGJhc2VUYWc6IGdldEJhc2VUYWdGcm9tUHJvcHNMaXN0KFtcImhyZWZcIiAvKiBIUkVGICovXSwgcHJvcHNMaXN0KSxcbiAgYm9keUF0dHJpYnV0ZXM6IGdldEF0dHJpYnV0ZXNGcm9tUHJvcHNMaXN0KFwiYm9keUF0dHJpYnV0ZXNcIiAvKiBCT0RZICovLCBwcm9wc0xpc3QpLFxuICBkZWZlcjogZ2V0SW5uZXJtb3N0UHJvcGVydHkocHJvcHNMaXN0LCBIRUxNRVRfUFJPUFMuREVGRVIpLFxuICBlbmNvZGU6IGdldElubmVybW9zdFByb3BlcnR5KHByb3BzTGlzdCwgSEVMTUVUX1BST1BTLkVOQ09ERV9TUEVDSUFMX0NIQVJBQ1RFUlMpLFxuICBodG1sQXR0cmlidXRlczogZ2V0QXR0cmlidXRlc0Zyb21Qcm9wc0xpc3QoXCJodG1sQXR0cmlidXRlc1wiIC8qIEhUTUwgKi8sIHByb3BzTGlzdCksXG4gIGxpbmtUYWdzOiBnZXRUYWdzRnJvbVByb3BzTGlzdChcbiAgICBcImxpbmtcIiAvKiBMSU5LICovLFxuICAgIFtcInJlbFwiIC8qIFJFTCAqLywgXCJocmVmXCIgLyogSFJFRiAqL10sXG4gICAgcHJvcHNMaXN0XG4gICksXG4gIG1ldGFUYWdzOiBnZXRUYWdzRnJvbVByb3BzTGlzdChcbiAgICBcIm1ldGFcIiAvKiBNRVRBICovLFxuICAgIFtcbiAgICAgIFwibmFtZVwiIC8qIE5BTUUgKi8sXG4gICAgICBcImNoYXJzZXRcIiAvKiBDSEFSU0VUICovLFxuICAgICAgXCJodHRwLWVxdWl2XCIgLyogSFRUUEVRVUlWICovLFxuICAgICAgXCJwcm9wZXJ0eVwiIC8qIFBST1BFUlRZICovLFxuICAgICAgXCJpdGVtcHJvcFwiIC8qIElURU1fUFJPUCAqL1xuICAgIF0sXG4gICAgcHJvcHNMaXN0XG4gICksXG4gIG5vc2NyaXB0VGFnczogZ2V0VGFnc0Zyb21Qcm9wc0xpc3QoXCJub3NjcmlwdFwiIC8qIE5PU0NSSVBUICovLCBbXCJpbm5lckhUTUxcIiAvKiBJTk5FUl9IVE1MICovXSwgcHJvcHNMaXN0KSxcbiAgb25DaGFuZ2VDbGllbnRTdGF0ZTogZ2V0T25DaGFuZ2VDbGllbnRTdGF0ZShwcm9wc0xpc3QpLFxuICBzY3JpcHRUYWdzOiBnZXRUYWdzRnJvbVByb3BzTGlzdChcbiAgICBcInNjcmlwdFwiIC8qIFNDUklQVCAqLyxcbiAgICBbXCJzcmNcIiAvKiBTUkMgKi8sIFwiaW5uZXJIVE1MXCIgLyogSU5ORVJfSFRNTCAqL10sXG4gICAgcHJvcHNMaXN0XG4gICksXG4gIHN0eWxlVGFnczogZ2V0VGFnc0Zyb21Qcm9wc0xpc3QoXCJzdHlsZVwiIC8qIFNUWUxFICovLCBbXCJjc3NUZXh0XCIgLyogQ1NTX1RFWFQgKi9dLCBwcm9wc0xpc3QpLFxuICB0aXRsZTogZ2V0VGl0bGVGcm9tUHJvcHNMaXN0KHByb3BzTGlzdCksXG4gIHRpdGxlQXR0cmlidXRlczogZ2V0QXR0cmlidXRlc0Zyb21Qcm9wc0xpc3QoXCJ0aXRsZUF0dHJpYnV0ZXNcIiAvKiBUSVRMRSAqLywgcHJvcHNMaXN0KSxcbiAgcHJpb3JpdGl6ZVNlb1RhZ3M6IGdldEFueVRydWVGcm9tUHJvcHNMaXN0KHByb3BzTGlzdCwgSEVMTUVUX1BST1BTLlBSSU9SSVRJWkVfU0VPX1RBR1MpXG59KTtcbnZhciBmbGF0dGVuQXJyYXkgPSAocG9zc2libGVBcnJheSkgPT4gQXJyYXkuaXNBcnJheShwb3NzaWJsZUFycmF5KSA/IHBvc3NpYmxlQXJyYXkuam9pbihcIlwiKSA6IHBvc3NpYmxlQXJyYXk7XG52YXIgY2hlY2tJZlByb3BzTWF0Y2ggPSAocHJvcHMsIHRvTWF0Y2gpID0+IHtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKHRvTWF0Y2hba2V5c1tpXV0gJiYgdG9NYXRjaFtrZXlzW2ldXS5pbmNsdWRlcyhwcm9wc1trZXlzW2ldXSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xudmFyIHByaW9yaXRpemVyID0gKGVsZW1lbnRzTGlzdCwgcHJvcHNUb01hdGNoKSA9PiB7XG4gIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnRzTGlzdCkpIHtcbiAgICByZXR1cm4gZWxlbWVudHNMaXN0LnJlZHVjZShcbiAgICAgIChhY2MsIGVsZW1lbnRBdHRycykgPT4ge1xuICAgICAgICBpZiAoY2hlY2tJZlByb3BzTWF0Y2goZWxlbWVudEF0dHJzLCBwcm9wc1RvTWF0Y2gpKSB7XG4gICAgICAgICAgYWNjLnByaW9yaXR5LnB1c2goZWxlbWVudEF0dHJzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhY2MuZGVmYXVsdC5wdXNoKGVsZW1lbnRBdHRycyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sXG4gICAgICB7IHByaW9yaXR5OiBbXSwgZGVmYXVsdDogW10gfVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHsgZGVmYXVsdDogZWxlbWVudHNMaXN0LCBwcmlvcml0eTogW10gfTtcbn07XG52YXIgd2l0aG91dCA9IChvYmosIGtleSkgPT4ge1xuICByZXR1cm4ge1xuICAgIC4uLm9iaixcbiAgICBba2V5XTogdm9pZCAwXG4gIH07XG59O1xuXG4vLyBzcmMvc2VydmVyLnRzXG52YXIgU0VMRl9DTE9TSU5HX1RBR1MgPSBbXCJub3NjcmlwdFwiIC8qIE5PU0NSSVBUICovLCBcInNjcmlwdFwiIC8qIFNDUklQVCAqLywgXCJzdHlsZVwiIC8qIFNUWUxFICovXTtcbnZhciBlbmNvZGVTcGVjaWFsQ2hhcmFjdGVycyA9IChzdHIsIGVuY29kZSA9IHRydWUpID0+IHtcbiAgaWYgKGVuY29kZSA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gU3RyaW5nKHN0cik7XG4gIH1cbiAgcmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoLyYvZywgXCImYW1wO1wiKS5yZXBsYWNlKC88L2csIFwiJmx0O1wiKS5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKS5yZXBsYWNlKC9cIi9nLCBcIiZxdW90O1wiKS5yZXBsYWNlKC8nL2csIFwiJiN4Mjc7XCIpO1xufTtcbnZhciBnZW5lcmF0ZUVsZW1lbnRBdHRyaWJ1dGVzQXNTdHJpbmcgPSAoYXR0cmlidXRlcykgPT4gT2JqZWN0LmtleXMoYXR0cmlidXRlcykucmVkdWNlKChzdHIsIGtleSkgPT4ge1xuICBjb25zdCBhdHRyID0gdHlwZW9mIGF0dHJpYnV0ZXNba2V5XSAhPT0gXCJ1bmRlZmluZWRcIiA/IGAke2tleX09XCIke2F0dHJpYnV0ZXNba2V5XX1cImAgOiBgJHtrZXl9YDtcbiAgcmV0dXJuIHN0ciA/IGAke3N0cn0gJHthdHRyfWAgOiBhdHRyO1xufSwgXCJcIik7XG52YXIgZ2VuZXJhdGVUaXRsZUFzU3RyaW5nID0gKHR5cGUsIHRpdGxlLCBhdHRyaWJ1dGVzLCBlbmNvZGUpID0+IHtcbiAgY29uc3QgYXR0cmlidXRlU3RyaW5nID0gZ2VuZXJhdGVFbGVtZW50QXR0cmlidXRlc0FzU3RyaW5nKGF0dHJpYnV0ZXMpO1xuICBjb25zdCBmbGF0dGVuZWRUaXRsZSA9IGZsYXR0ZW5BcnJheSh0aXRsZSk7XG4gIHJldHVybiBhdHRyaWJ1dGVTdHJpbmcgPyBgPCR7dHlwZX0gJHtIRUxNRVRfQVRUUklCVVRFfT1cInRydWVcIiAke2F0dHJpYnV0ZVN0cmluZ30+JHtlbmNvZGVTcGVjaWFsQ2hhcmFjdGVycyhcbiAgICBmbGF0dGVuZWRUaXRsZSxcbiAgICBlbmNvZGVcbiAgKX08LyR7dHlwZX0+YCA6IGA8JHt0eXBlfSAke0hFTE1FVF9BVFRSSUJVVEV9PVwidHJ1ZVwiPiR7ZW5jb2RlU3BlY2lhbENoYXJhY3RlcnMoXG4gICAgZmxhdHRlbmVkVGl0bGUsXG4gICAgZW5jb2RlXG4gICl9PC8ke3R5cGV9PmA7XG59O1xudmFyIGdlbmVyYXRlVGFnc0FzU3RyaW5nID0gKHR5cGUsIHRhZ3MsIGVuY29kZSA9IHRydWUpID0+IHRhZ3MucmVkdWNlKChzdHIsIHQpID0+IHtcbiAgY29uc3QgdGFnID0gdDtcbiAgY29uc3QgYXR0cmlidXRlSHRtbCA9IE9iamVjdC5rZXlzKHRhZykuZmlsdGVyKFxuICAgIChhdHRyaWJ1dGUpID0+ICEoYXR0cmlidXRlID09PSBcImlubmVySFRNTFwiIC8qIElOTkVSX0hUTUwgKi8gfHwgYXR0cmlidXRlID09PSBcImNzc1RleHRcIiAvKiBDU1NfVEVYVCAqLylcbiAgKS5yZWR1Y2UoKHN0cmluZywgYXR0cmlidXRlKSA9PiB7XG4gICAgY29uc3QgYXR0ciA9IHR5cGVvZiB0YWdbYXR0cmlidXRlXSA9PT0gXCJ1bmRlZmluZWRcIiA/IGF0dHJpYnV0ZSA6IGAke2F0dHJpYnV0ZX09XCIke2VuY29kZVNwZWNpYWxDaGFyYWN0ZXJzKHRhZ1thdHRyaWJ1dGVdLCBlbmNvZGUpfVwiYDtcbiAgICByZXR1cm4gc3RyaW5nID8gYCR7c3RyaW5nfSAke2F0dHJ9YCA6IGF0dHI7XG4gIH0sIFwiXCIpO1xuICBjb25zdCB0YWdDb250ZW50ID0gdGFnLmlubmVySFRNTCB8fCB0YWcuY3NzVGV4dCB8fCBcIlwiO1xuICBjb25zdCBpc1NlbGZDbG9zaW5nID0gU0VMRl9DTE9TSU5HX1RBR1MuaW5kZXhPZih0eXBlKSA9PT0gLTE7XG4gIHJldHVybiBgJHtzdHJ9PCR7dHlwZX0gJHtIRUxNRVRfQVRUUklCVVRFfT1cInRydWVcIiAke2F0dHJpYnV0ZUh0bWx9JHtpc1NlbGZDbG9zaW5nID8gYC8+YCA6IGA+JHt0YWdDb250ZW50fTwvJHt0eXBlfT5gfWA7XG59LCBcIlwiKTtcbnZhciBjb252ZXJ0RWxlbWVudEF0dHJpYnV0ZXNUb1JlYWN0UHJvcHMgPSAoYXR0cmlidXRlcywgaW5pdFByb3BzID0ge30pID0+IE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLnJlZHVjZSgob2JqLCBrZXkpID0+IHtcbiAgY29uc3QgbWFwcGVkID0gUkVBQ1RfVEFHX01BUFtrZXldO1xuICBvYmpbbWFwcGVkIHx8IGtleV0gPSBhdHRyaWJ1dGVzW2tleV07XG4gIHJldHVybiBvYmo7XG59LCBpbml0UHJvcHMpO1xudmFyIGdlbmVyYXRlVGl0bGVBc1JlYWN0Q29tcG9uZW50ID0gKF90eXBlLCB0aXRsZSwgYXR0cmlidXRlcykgPT4ge1xuICBjb25zdCBpbml0UHJvcHMgPSB7XG4gICAga2V5OiB0aXRsZSxcbiAgICBbSEVMTUVUX0FUVFJJQlVURV06IHRydWVcbiAgfTtcbiAgY29uc3QgcHJvcHMgPSBjb252ZXJ0RWxlbWVudEF0dHJpYnV0ZXNUb1JlYWN0UHJvcHMoYXR0cmlidXRlcywgaW5pdFByb3BzKTtcbiAgcmV0dXJuIFtSZWFjdC5jcmVhdGVFbGVtZW50KFwidGl0bGVcIiAvKiBUSVRMRSAqLywgcHJvcHMsIHRpdGxlKV07XG59O1xudmFyIGdlbmVyYXRlVGFnc0FzUmVhY3RDb21wb25lbnQgPSAodHlwZSwgdGFncykgPT4gdGFncy5tYXAoKHRhZywgaSkgPT4ge1xuICBjb25zdCBtYXBwZWRUYWcgPSB7XG4gICAga2V5OiBpLFxuICAgIFtIRUxNRVRfQVRUUklCVVRFXTogdHJ1ZVxuICB9O1xuICBPYmplY3Qua2V5cyh0YWcpLmZvckVhY2goKGF0dHJpYnV0ZSkgPT4ge1xuICAgIGNvbnN0IG1hcHBlZCA9IFJFQUNUX1RBR19NQVBbYXR0cmlidXRlXTtcbiAgICBjb25zdCBtYXBwZWRBdHRyaWJ1dGUgPSBtYXBwZWQgfHwgYXR0cmlidXRlO1xuICAgIGlmIChtYXBwZWRBdHRyaWJ1dGUgPT09IFwiaW5uZXJIVE1MXCIgLyogSU5ORVJfSFRNTCAqLyB8fCBtYXBwZWRBdHRyaWJ1dGUgPT09IFwiY3NzVGV4dFwiIC8qIENTU19URVhUICovKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gdGFnLmlubmVySFRNTCB8fCB0YWcuY3NzVGV4dDtcbiAgICAgIG1hcHBlZFRhZy5kYW5nZXJvdXNseVNldElubmVySFRNTCA9IHsgX19odG1sOiBjb250ZW50IH07XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hcHBlZFRhZ1ttYXBwZWRBdHRyaWJ1dGVdID0gdGFnW2F0dHJpYnV0ZV07XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQodHlwZSwgbWFwcGVkVGFnKTtcbn0pO1xudmFyIGdldE1ldGhvZHNGb3JUYWcgPSAodHlwZSwgdGFncywgZW5jb2RlID0gdHJ1ZSkgPT4ge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwidGl0bGVcIiAvKiBUSVRMRSAqLzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvQ29tcG9uZW50OiAoKSA9PiBnZW5lcmF0ZVRpdGxlQXNSZWFjdENvbXBvbmVudCh0eXBlLCB0YWdzLnRpdGxlLCB0YWdzLnRpdGxlQXR0cmlidXRlcyksXG4gICAgICAgIHRvU3RyaW5nOiAoKSA9PiBnZW5lcmF0ZVRpdGxlQXNTdHJpbmcodHlwZSwgdGFncy50aXRsZSwgdGFncy50aXRsZUF0dHJpYnV0ZXMsIGVuY29kZSlcbiAgICAgIH07XG4gICAgY2FzZSBcImJvZHlBdHRyaWJ1dGVzXCIgLyogQk9EWSAqLzpcbiAgICBjYXNlIFwiaHRtbEF0dHJpYnV0ZXNcIiAvKiBIVE1MICovOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9Db21wb25lbnQ6ICgpID0+IGNvbnZlcnRFbGVtZW50QXR0cmlidXRlc1RvUmVhY3RQcm9wcyh0YWdzKSxcbiAgICAgICAgdG9TdHJpbmc6ICgpID0+IGdlbmVyYXRlRWxlbWVudEF0dHJpYnV0ZXNBc1N0cmluZyh0YWdzKVxuICAgICAgfTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9Db21wb25lbnQ6ICgpID0+IGdlbmVyYXRlVGFnc0FzUmVhY3RDb21wb25lbnQodHlwZSwgdGFncyksXG4gICAgICAgIHRvU3RyaW5nOiAoKSA9PiBnZW5lcmF0ZVRhZ3NBc1N0cmluZyh0eXBlLCB0YWdzLCBlbmNvZGUpXG4gICAgICB9O1xuICB9XG59O1xudmFyIGdldFByaW9yaXR5TWV0aG9kcyA9ICh7IG1ldGFUYWdzLCBsaW5rVGFncywgc2NyaXB0VGFncywgZW5jb2RlIH0pID0+IHtcbiAgY29uc3QgbWV0YSA9IHByaW9yaXRpemVyKG1ldGFUYWdzLCBTRU9fUFJJT1JJVFlfVEFHUy5tZXRhKTtcbiAgY29uc3QgbGluayA9IHByaW9yaXRpemVyKGxpbmtUYWdzLCBTRU9fUFJJT1JJVFlfVEFHUy5saW5rKTtcbiAgY29uc3Qgc2NyaXB0ID0gcHJpb3JpdGl6ZXIoc2NyaXB0VGFncywgU0VPX1BSSU9SSVRZX1RBR1Muc2NyaXB0KTtcbiAgY29uc3QgcHJpb3JpdHlNZXRob2RzID0ge1xuICAgIHRvQ29tcG9uZW50OiAoKSA9PiBbXG4gICAgICAuLi5nZW5lcmF0ZVRhZ3NBc1JlYWN0Q29tcG9uZW50KFwibWV0YVwiIC8qIE1FVEEgKi8sIG1ldGEucHJpb3JpdHkpLFxuICAgICAgLi4uZ2VuZXJhdGVUYWdzQXNSZWFjdENvbXBvbmVudChcImxpbmtcIiAvKiBMSU5LICovLCBsaW5rLnByaW9yaXR5KSxcbiAgICAgIC4uLmdlbmVyYXRlVGFnc0FzUmVhY3RDb21wb25lbnQoXCJzY3JpcHRcIiAvKiBTQ1JJUFQgKi8sIHNjcmlwdC5wcmlvcml0eSlcbiAgICBdLFxuICAgIHRvU3RyaW5nOiAoKSA9PiAoXG4gICAgICAvLyBnZW5lcmF0ZSBhbGwgdGhlIHRhZ3MgYXMgc3RyaW5ncyBhbmQgY29uY2F0ZW5hdGUgdGhlbVxuICAgICAgYCR7Z2V0TWV0aG9kc0ZvclRhZyhcIm1ldGFcIiAvKiBNRVRBICovLCBtZXRhLnByaW9yaXR5LCBlbmNvZGUpfSAke2dldE1ldGhvZHNGb3JUYWcoXG4gICAgICAgIFwibGlua1wiIC8qIExJTksgKi8sXG4gICAgICAgIGxpbmsucHJpb3JpdHksXG4gICAgICAgIGVuY29kZVxuICAgICAgKX0gJHtnZXRNZXRob2RzRm9yVGFnKFwic2NyaXB0XCIgLyogU0NSSVBUICovLCBzY3JpcHQucHJpb3JpdHksIGVuY29kZSl9YFxuICAgIClcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBwcmlvcml0eU1ldGhvZHMsXG4gICAgbWV0YVRhZ3M6IG1ldGEuZGVmYXVsdCxcbiAgICBsaW5rVGFnczogbGluay5kZWZhdWx0LFxuICAgIHNjcmlwdFRhZ3M6IHNjcmlwdC5kZWZhdWx0XG4gIH07XG59O1xudmFyIG1hcFN0YXRlT25TZXJ2ZXIgPSAocHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIGJhc2VUYWcsXG4gICAgYm9keUF0dHJpYnV0ZXMsXG4gICAgZW5jb2RlID0gdHJ1ZSxcbiAgICBodG1sQXR0cmlidXRlcyxcbiAgICBub3NjcmlwdFRhZ3MsXG4gICAgc3R5bGVUYWdzLFxuICAgIHRpdGxlID0gXCJcIixcbiAgICB0aXRsZUF0dHJpYnV0ZXMsXG4gICAgcHJpb3JpdGl6ZVNlb1RhZ3NcbiAgfSA9IHByb3BzO1xuICBsZXQgeyBsaW5rVGFncywgbWV0YVRhZ3MsIHNjcmlwdFRhZ3MgfSA9IHByb3BzO1xuICBsZXQgcHJpb3JpdHlNZXRob2RzID0ge1xuICAgIHRvQ29tcG9uZW50OiAoKSA9PiB7XG4gICAgfSxcbiAgICB0b1N0cmluZzogKCkgPT4gXCJcIlxuICB9O1xuICBpZiAocHJpb3JpdGl6ZVNlb1RhZ3MpIHtcbiAgICAoeyBwcmlvcml0eU1ldGhvZHMsIGxpbmtUYWdzLCBtZXRhVGFncywgc2NyaXB0VGFncyB9ID0gZ2V0UHJpb3JpdHlNZXRob2RzKHByb3BzKSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBwcmlvcml0eTogcHJpb3JpdHlNZXRob2RzLFxuICAgIGJhc2U6IGdldE1ldGhvZHNGb3JUYWcoXCJiYXNlXCIgLyogQkFTRSAqLywgYmFzZVRhZywgZW5jb2RlKSxcbiAgICBib2R5QXR0cmlidXRlczogZ2V0TWV0aG9kc0ZvclRhZyhcImJvZHlBdHRyaWJ1dGVzXCIgLyogQk9EWSAqLywgYm9keUF0dHJpYnV0ZXMsIGVuY29kZSksXG4gICAgaHRtbEF0dHJpYnV0ZXM6IGdldE1ldGhvZHNGb3JUYWcoXCJodG1sQXR0cmlidXRlc1wiIC8qIEhUTUwgKi8sIGh0bWxBdHRyaWJ1dGVzLCBlbmNvZGUpLFxuICAgIGxpbms6IGdldE1ldGhvZHNGb3JUYWcoXCJsaW5rXCIgLyogTElOSyAqLywgbGlua1RhZ3MsIGVuY29kZSksXG4gICAgbWV0YTogZ2V0TWV0aG9kc0ZvclRhZyhcIm1ldGFcIiAvKiBNRVRBICovLCBtZXRhVGFncywgZW5jb2RlKSxcbiAgICBub3NjcmlwdDogZ2V0TWV0aG9kc0ZvclRhZyhcIm5vc2NyaXB0XCIgLyogTk9TQ1JJUFQgKi8sIG5vc2NyaXB0VGFncywgZW5jb2RlKSxcbiAgICBzY3JpcHQ6IGdldE1ldGhvZHNGb3JUYWcoXCJzY3JpcHRcIiAvKiBTQ1JJUFQgKi8sIHNjcmlwdFRhZ3MsIGVuY29kZSksXG4gICAgc3R5bGU6IGdldE1ldGhvZHNGb3JUYWcoXCJzdHlsZVwiIC8qIFNUWUxFICovLCBzdHlsZVRhZ3MsIGVuY29kZSksXG4gICAgdGl0bGU6IGdldE1ldGhvZHNGb3JUYWcoXCJ0aXRsZVwiIC8qIFRJVExFICovLCB7IHRpdGxlLCB0aXRsZUF0dHJpYnV0ZXMgfSwgZW5jb2RlKVxuICB9O1xufTtcbnZhciBzZXJ2ZXJfZGVmYXVsdCA9IG1hcFN0YXRlT25TZXJ2ZXI7XG5cbi8vIHNyYy9IZWxtZXREYXRhLnRzXG52YXIgaW5zdGFuY2VzID0gW107XG52YXIgaXNEb2N1bWVudCA9ICEhKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcbnZhciBIZWxtZXREYXRhID0gY2xhc3Mge1xuICBpbnN0YW5jZXMgPSBbXTtcbiAgY2FuVXNlRE9NID0gaXNEb2N1bWVudDtcbiAgY29udGV4dDtcbiAgdmFsdWUgPSB7XG4gICAgc2V0SGVsbWV0OiAoc2VydmVyU3RhdGUpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC5oZWxtZXQgPSBzZXJ2ZXJTdGF0ZTtcbiAgICB9LFxuICAgIGhlbG1ldEluc3RhbmNlczoge1xuICAgICAgZ2V0OiAoKSA9PiB0aGlzLmNhblVzZURPTSA/IGluc3RhbmNlcyA6IHRoaXMuaW5zdGFuY2VzLFxuICAgICAgYWRkOiAoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgKHRoaXMuY2FuVXNlRE9NID8gaW5zdGFuY2VzIDogdGhpcy5pbnN0YW5jZXMpLnB1c2goaW5zdGFuY2UpO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZTogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gKHRoaXMuY2FuVXNlRE9NID8gaW5zdGFuY2VzIDogdGhpcy5pbnN0YW5jZXMpLmluZGV4T2YoaW5zdGFuY2UpO1xuICAgICAgICAodGhpcy5jYW5Vc2VET00gPyBpbnN0YW5jZXMgOiB0aGlzLmluc3RhbmNlcykuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQsIGNhblVzZURPTSkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgdGhpcy5jYW5Vc2VET00gPSBjYW5Vc2VET00gfHwgZmFsc2U7XG4gICAgaWYgKCFjYW5Vc2VET00pIHtcbiAgICAgIGNvbnRleHQuaGVsbWV0ID0gc2VydmVyX2RlZmF1bHQoe1xuICAgICAgICBiYXNlVGFnOiBbXSxcbiAgICAgICAgYm9keUF0dHJpYnV0ZXM6IHt9LFxuICAgICAgICBlbmNvZGVTcGVjaWFsQ2hhcmFjdGVyczogdHJ1ZSxcbiAgICAgICAgaHRtbEF0dHJpYnV0ZXM6IHt9LFxuICAgICAgICBsaW5rVGFnczogW10sXG4gICAgICAgIG1ldGFUYWdzOiBbXSxcbiAgICAgICAgbm9zY3JpcHRUYWdzOiBbXSxcbiAgICAgICAgc2NyaXB0VGFnczogW10sXG4gICAgICAgIHN0eWxlVGFnczogW10sXG4gICAgICAgIHRpdGxlOiBcIlwiLFxuICAgICAgICB0aXRsZUF0dHJpYnV0ZXM6IHt9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9Qcm92aWRlci50c3hcbnZhciBkZWZhdWx0VmFsdWUgPSB7fTtcbnZhciBDb250ZXh0ID0gUmVhY3QyLmNyZWF0ZUNvbnRleHQoZGVmYXVsdFZhbHVlKTtcbnZhciBIZWxtZXRQcm92aWRlciA9IGNsYXNzIF9IZWxtZXRQcm92aWRlciBleHRlbmRzIENvbXBvbmVudCB7XG4gIHN0YXRpYyBjYW5Vc2VET00gPSBpc0RvY3VtZW50O1xuICBoZWxtZXREYXRhO1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLmhlbG1ldERhdGEgPSBuZXcgSGVsbWV0RGF0YSh0aGlzLnByb3BzLmNvbnRleHQgfHwge30sIF9IZWxtZXRQcm92aWRlci5jYW5Vc2VET00pO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KENvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHRoaXMuaGVsbWV0RGF0YS52YWx1ZSB9LCB0aGlzLnByb3BzLmNoaWxkcmVuKTtcbiAgfVxufTtcblxuLy8gc3JjL0Rpc3BhdGNoZXIudHN4XG5pbXBvcnQgeyBDb21wb25lbnQgYXMgQ29tcG9uZW50MiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHNoYWxsb3dFcXVhbCBmcm9tIFwic2hhbGxvd2VxdWFsXCI7XG5cbi8vIHNyYy9jbGllbnQudHNcbnZhciB1cGRhdGVUYWdzID0gKHR5cGUsIHRhZ3MpID0+IHtcbiAgY29uc3QgaGVhZEVsZW1lbnQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIgLyogSEVBRCAqLyk7XG4gIGNvbnN0IHRhZ05vZGVzID0gaGVhZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHt0eXBlfVske0hFTE1FVF9BVFRSSUJVVEV9XWApO1xuICBjb25zdCBvbGRUYWdzID0gW10uc2xpY2UuY2FsbCh0YWdOb2Rlcyk7XG4gIGNvbnN0IG5ld1RhZ3MgPSBbXTtcbiAgbGV0IGluZGV4VG9EZWxldGU7XG4gIGlmICh0YWdzICYmIHRhZ3MubGVuZ3RoKSB7XG4gICAgdGFncy5mb3JFYWNoKCh0YWcpID0+IHtcbiAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgaW4gdGFnKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGFnLCBhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgaWYgKGF0dHJpYnV0ZSA9PT0gXCJpbm5lckhUTUxcIiAvKiBJTk5FUl9IVE1MICovKSB7XG4gICAgICAgICAgICBuZXdFbGVtZW50LmlubmVySFRNTCA9IHRhZy5pbm5lckhUTUw7XG4gICAgICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IFwiY3NzVGV4dFwiIC8qIENTU19URVhUICovKSB7XG4gICAgICAgICAgICBpZiAobmV3RWxlbWVudC5zdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAgIG5ld0VsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gdGFnLmNzc1RleHQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZXdFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRhZy5jc3NUZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHIgPSBhdHRyaWJ1dGU7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHR5cGVvZiB0YWdbYXR0cl0gPT09IFwidW5kZWZpbmVkXCIgPyBcIlwiIDogdGFnW2F0dHJdO1xuICAgICAgICAgICAgbmV3RWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBuZXdFbGVtZW50LnNldEF0dHJpYnV0ZShIRUxNRVRfQVRUUklCVVRFLCBcInRydWVcIik7XG4gICAgICBpZiAob2xkVGFncy5zb21lKChleGlzdGluZ1RhZywgaW5kZXgpID0+IHtcbiAgICAgICAgaW5kZXhUb0RlbGV0ZSA9IGluZGV4O1xuICAgICAgICByZXR1cm4gbmV3RWxlbWVudC5pc0VxdWFsTm9kZShleGlzdGluZ1RhZyk7XG4gICAgICB9KSkge1xuICAgICAgICBvbGRUYWdzLnNwbGljZShpbmRleFRvRGVsZXRlLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld1RhZ3MucHVzaChuZXdFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBvbGRUYWdzLmZvckVhY2goKHRhZykgPT4gdGFnLnBhcmVudE5vZGU/LnJlbW92ZUNoaWxkKHRhZykpO1xuICBuZXdUYWdzLmZvckVhY2goKHRhZykgPT4gaGVhZEVsZW1lbnQuYXBwZW5kQ2hpbGQodGFnKSk7XG4gIHJldHVybiB7XG4gICAgb2xkVGFncyxcbiAgICBuZXdUYWdzXG4gIH07XG59O1xudmFyIHVwZGF0ZUF0dHJpYnV0ZXMgPSAodGFnTmFtZSwgYXR0cmlidXRlcykgPT4ge1xuICBjb25zdCBlbGVtZW50VGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnTmFtZSlbMF07XG4gIGlmICghZWxlbWVudFRhZykge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBoZWxtZXRBdHRyaWJ1dGVTdHJpbmcgPSBlbGVtZW50VGFnLmdldEF0dHJpYnV0ZShIRUxNRVRfQVRUUklCVVRFKTtcbiAgY29uc3QgaGVsbWV0QXR0cmlidXRlcyA9IGhlbG1ldEF0dHJpYnV0ZVN0cmluZyA/IGhlbG1ldEF0dHJpYnV0ZVN0cmluZy5zcGxpdChcIixcIikgOiBbXTtcbiAgY29uc3QgYXR0cmlidXRlc1RvUmVtb3ZlID0gWy4uLmhlbG1ldEF0dHJpYnV0ZXNdO1xuICBjb25zdCBhdHRyaWJ1dGVLZXlzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlcyk7XG4gIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZUtleXMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGF0dHJpYnV0ZXNbYXR0cmlidXRlXSB8fCBcIlwiO1xuICAgIGlmIChlbGVtZW50VGFnLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpICE9PSB2YWx1ZSkge1xuICAgICAgZWxlbWVudFRhZy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChoZWxtZXRBdHRyaWJ1dGVzLmluZGV4T2YoYXR0cmlidXRlKSA9PT0gLTEpIHtcbiAgICAgIGhlbG1ldEF0dHJpYnV0ZXMucHVzaChhdHRyaWJ1dGUpO1xuICAgIH1cbiAgICBjb25zdCBpbmRleFRvU2F2ZSA9IGF0dHJpYnV0ZXNUb1JlbW92ZS5pbmRleE9mKGF0dHJpYnV0ZSk7XG4gICAgaWYgKGluZGV4VG9TYXZlICE9PSAtMSkge1xuICAgICAgYXR0cmlidXRlc1RvUmVtb3ZlLnNwbGljZShpbmRleFRvU2F2ZSwgMSk7XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGkgPSBhdHRyaWJ1dGVzVG9SZW1vdmUubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICBlbGVtZW50VGFnLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzVG9SZW1vdmVbaV0pO1xuICB9XG4gIGlmIChoZWxtZXRBdHRyaWJ1dGVzLmxlbmd0aCA9PT0gYXR0cmlidXRlc1RvUmVtb3ZlLmxlbmd0aCkge1xuICAgIGVsZW1lbnRUYWcucmVtb3ZlQXR0cmlidXRlKEhFTE1FVF9BVFRSSUJVVEUpO1xuICB9IGVsc2UgaWYgKGVsZW1lbnRUYWcuZ2V0QXR0cmlidXRlKEhFTE1FVF9BVFRSSUJVVEUpICE9PSBhdHRyaWJ1dGVLZXlzLmpvaW4oXCIsXCIpKSB7XG4gICAgZWxlbWVudFRhZy5zZXRBdHRyaWJ1dGUoSEVMTUVUX0FUVFJJQlVURSwgYXR0cmlidXRlS2V5cy5qb2luKFwiLFwiKSk7XG4gIH1cbn07XG52YXIgdXBkYXRlVGl0bGUgPSAodGl0bGUsIGF0dHJpYnV0ZXMpID0+IHtcbiAgaWYgKHR5cGVvZiB0aXRsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudC50aXRsZSAhPT0gdGl0bGUpIHtcbiAgICBkb2N1bWVudC50aXRsZSA9IGZsYXR0ZW5BcnJheSh0aXRsZSk7XG4gIH1cbiAgdXBkYXRlQXR0cmlidXRlcyhcInRpdGxlXCIgLyogVElUTEUgKi8sIGF0dHJpYnV0ZXMpO1xufTtcbnZhciBjb21taXRUYWdDaGFuZ2VzID0gKG5ld1N0YXRlLCBjYikgPT4ge1xuICBjb25zdCB7XG4gICAgYmFzZVRhZyxcbiAgICBib2R5QXR0cmlidXRlcyxcbiAgICBodG1sQXR0cmlidXRlcyxcbiAgICBsaW5rVGFncyxcbiAgICBtZXRhVGFncyxcbiAgICBub3NjcmlwdFRhZ3MsXG4gICAgb25DaGFuZ2VDbGllbnRTdGF0ZSxcbiAgICBzY3JpcHRUYWdzLFxuICAgIHN0eWxlVGFncyxcbiAgICB0aXRsZSxcbiAgICB0aXRsZUF0dHJpYnV0ZXNcbiAgfSA9IG5ld1N0YXRlO1xuICB1cGRhdGVBdHRyaWJ1dGVzKFwiYm9keVwiIC8qIEJPRFkgKi8sIGJvZHlBdHRyaWJ1dGVzKTtcbiAgdXBkYXRlQXR0cmlidXRlcyhcImh0bWxcIiAvKiBIVE1MICovLCBodG1sQXR0cmlidXRlcyk7XG4gIHVwZGF0ZVRpdGxlKHRpdGxlLCB0aXRsZUF0dHJpYnV0ZXMpO1xuICBjb25zdCB0YWdVcGRhdGVzID0ge1xuICAgIGJhc2VUYWc6IHVwZGF0ZVRhZ3MoXCJiYXNlXCIgLyogQkFTRSAqLywgYmFzZVRhZyksXG4gICAgbGlua1RhZ3M6IHVwZGF0ZVRhZ3MoXCJsaW5rXCIgLyogTElOSyAqLywgbGlua1RhZ3MpLFxuICAgIG1ldGFUYWdzOiB1cGRhdGVUYWdzKFwibWV0YVwiIC8qIE1FVEEgKi8sIG1ldGFUYWdzKSxcbiAgICBub3NjcmlwdFRhZ3M6IHVwZGF0ZVRhZ3MoXCJub3NjcmlwdFwiIC8qIE5PU0NSSVBUICovLCBub3NjcmlwdFRhZ3MpLFxuICAgIHNjcmlwdFRhZ3M6IHVwZGF0ZVRhZ3MoXCJzY3JpcHRcIiAvKiBTQ1JJUFQgKi8sIHNjcmlwdFRhZ3MpLFxuICAgIHN0eWxlVGFnczogdXBkYXRlVGFncyhcInN0eWxlXCIgLyogU1RZTEUgKi8sIHN0eWxlVGFncylcbiAgfTtcbiAgY29uc3QgYWRkZWRUYWdzID0ge307XG4gIGNvbnN0IHJlbW92ZWRUYWdzID0ge307XG4gIE9iamVjdC5rZXlzKHRhZ1VwZGF0ZXMpLmZvckVhY2goKHRhZ1R5cGUpID0+IHtcbiAgICBjb25zdCB7IG5ld1RhZ3MsIG9sZFRhZ3MgfSA9IHRhZ1VwZGF0ZXNbdGFnVHlwZV07XG4gICAgaWYgKG5ld1RhZ3MubGVuZ3RoKSB7XG4gICAgICBhZGRlZFRhZ3NbdGFnVHlwZV0gPSBuZXdUYWdzO1xuICAgIH1cbiAgICBpZiAob2xkVGFncy5sZW5ndGgpIHtcbiAgICAgIHJlbW92ZWRUYWdzW3RhZ1R5cGVdID0gdGFnVXBkYXRlc1t0YWdUeXBlXS5vbGRUYWdzO1xuICAgIH1cbiAgfSk7XG4gIGlmIChjYikge1xuICAgIGNiKCk7XG4gIH1cbiAgb25DaGFuZ2VDbGllbnRTdGF0ZShuZXdTdGF0ZSwgYWRkZWRUYWdzLCByZW1vdmVkVGFncyk7XG59O1xudmFyIF9oZWxtZXRDYWxsYmFjayA9IG51bGw7XG52YXIgaGFuZGxlU3RhdGVDaGFuZ2VPbkNsaWVudCA9IChuZXdTdGF0ZSkgPT4ge1xuICBpZiAoX2hlbG1ldENhbGxiYWNrKSB7XG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoX2hlbG1ldENhbGxiYWNrKTtcbiAgfVxuICBpZiAobmV3U3RhdGUuZGVmZXIpIHtcbiAgICBfaGVsbWV0Q2FsbGJhY2sgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgY29tbWl0VGFnQ2hhbmdlcyhuZXdTdGF0ZSwgKCkgPT4ge1xuICAgICAgICBfaGVsbWV0Q2FsbGJhY2sgPSBudWxsO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29tbWl0VGFnQ2hhbmdlcyhuZXdTdGF0ZSk7XG4gICAgX2hlbG1ldENhbGxiYWNrID0gbnVsbDtcbiAgfVxufTtcbnZhciBjbGllbnRfZGVmYXVsdCA9IGhhbmRsZVN0YXRlQ2hhbmdlT25DbGllbnQ7XG5cbi8vIHNyYy9EaXNwYXRjaGVyLnRzeFxudmFyIEhlbG1ldERpc3BhdGNoZXIgPSBjbGFzcyBleHRlbmRzIENvbXBvbmVudDIge1xuICByZW5kZXJlZCA9IGZhbHNlO1xuICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzKSB7XG4gICAgcmV0dXJuICFzaGFsbG93RXF1YWwobmV4dFByb3BzLCB0aGlzLnByb3BzKTtcbiAgfVxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdGhpcy5lbWl0Q2hhbmdlKCk7XG4gIH1cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgY29uc3QgeyBoZWxtZXRJbnN0YW5jZXMgfSA9IHRoaXMucHJvcHMuY29udGV4dDtcbiAgICBoZWxtZXRJbnN0YW5jZXMucmVtb3ZlKHRoaXMpO1xuICAgIHRoaXMuZW1pdENoYW5nZSgpO1xuICB9XG4gIGVtaXRDaGFuZ2UoKSB7XG4gICAgY29uc3QgeyBoZWxtZXRJbnN0YW5jZXMsIHNldEhlbG1ldCB9ID0gdGhpcy5wcm9wcy5jb250ZXh0O1xuICAgIGxldCBzZXJ2ZXJTdGF0ZSA9IG51bGw7XG4gICAgY29uc3Qgc3RhdGUgPSByZWR1Y2VQcm9wc1RvU3RhdGUoXG4gICAgICBoZWxtZXRJbnN0YW5jZXMuZ2V0KCkubWFwKChpbnN0YW5jZSkgPT4ge1xuICAgICAgICBjb25zdCBwcm9wcyA9IHsgLi4uaW5zdGFuY2UucHJvcHMgfTtcbiAgICAgICAgZGVsZXRlIHByb3BzLmNvbnRleHQ7XG4gICAgICAgIHJldHVybiBwcm9wcztcbiAgICAgIH0pXG4gICAgKTtcbiAgICBpZiAoSGVsbWV0UHJvdmlkZXIuY2FuVXNlRE9NKSB7XG4gICAgICBjbGllbnRfZGVmYXVsdChzdGF0ZSk7XG4gICAgfSBlbHNlIGlmIChzZXJ2ZXJfZGVmYXVsdCkge1xuICAgICAgc2VydmVyU3RhdGUgPSBzZXJ2ZXJfZGVmYXVsdChzdGF0ZSk7XG4gICAgfVxuICAgIHNldEhlbG1ldChzZXJ2ZXJTdGF0ZSk7XG4gIH1cbiAgLy8gY29tcG9uZW50V2lsbE1vdW50IHdpbGwgYmUgZGVwcmVjYXRlZFxuICAvLyBmb3IgU1NSLCBpbml0aWFsaXplIG9uIGZpcnN0IHJlbmRlclxuICAvLyBjb25zdHJ1Y3RvciBpcyBhbHNvIHVuc2FmZSBpbiBTdHJpY3RNb2RlXG4gIGluaXQoKSB7XG4gICAgaWYgKHRoaXMucmVuZGVyZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJlZCA9IHRydWU7XG4gICAgY29uc3QgeyBoZWxtZXRJbnN0YW5jZXMgfSA9IHRoaXMucHJvcHMuY29udGV4dDtcbiAgICBoZWxtZXRJbnN0YW5jZXMuYWRkKHRoaXMpO1xuICAgIHRoaXMuZW1pdENoYW5nZSgpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmluaXQoKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuLy8gc3JjL2luZGV4LnRzeFxudmFyIEhlbG1ldCA9IGNsYXNzIGV4dGVuZHMgQ29tcG9uZW50MyB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgZGVmZXI6IHRydWUsXG4gICAgZW5jb2RlU3BlY2lhbENoYXJhY3RlcnM6IHRydWUsXG4gICAgcHJpb3JpdGl6ZVNlb1RhZ3M6IGZhbHNlXG4gIH07XG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcbiAgICByZXR1cm4gIWZhc3RDb21wYXJlKHdpdGhvdXQodGhpcy5wcm9wcywgXCJoZWxtZXREYXRhXCIpLCB3aXRob3V0KG5leHRQcm9wcywgXCJoZWxtZXREYXRhXCIpKTtcbiAgfVxuICBtYXBOZXN0ZWRDaGlsZHJlblRvUHJvcHMoY2hpbGQsIG5lc3RlZENoaWxkcmVuKSB7XG4gICAgaWYgKCFuZXN0ZWRDaGlsZHJlbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHN3aXRjaCAoY2hpbGQudHlwZSkge1xuICAgICAgY2FzZSBcInNjcmlwdFwiIC8qIFNDUklQVCAqLzpcbiAgICAgIGNhc2UgXCJub3NjcmlwdFwiIC8qIE5PU0NSSVBUICovOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlubmVySFRNTDogbmVzdGVkQ2hpbGRyZW5cbiAgICAgICAgfTtcbiAgICAgIGNhc2UgXCJzdHlsZVwiIC8qIFNUWUxFICovOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNzc1RleHQ6IG5lc3RlZENoaWxkcmVuXG4gICAgICAgIH07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYDwke2NoaWxkLnR5cGV9IC8+IGVsZW1lbnRzIGFyZSBzZWxmLWNsb3NpbmcgYW5kIGNhbiBub3QgY29udGFpbiBjaGlsZHJlbi4gUmVmZXIgdG8gb3VyIEFQSSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gXG4gICAgICAgICk7XG4gICAgfVxuICB9XG4gIGZsYXR0ZW5BcnJheVR5cGVDaGlsZHJlbihjaGlsZCwgYXJyYXlUeXBlQ2hpbGRyZW4sIG5ld0NoaWxkUHJvcHMsIG5lc3RlZENoaWxkcmVuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmFycmF5VHlwZUNoaWxkcmVuLFxuICAgICAgW2NoaWxkLnR5cGVdOiBbXG4gICAgICAgIC4uLmFycmF5VHlwZUNoaWxkcmVuW2NoaWxkLnR5cGVdIHx8IFtdLFxuICAgICAgICB7XG4gICAgICAgICAgLi4ubmV3Q2hpbGRQcm9wcyxcbiAgICAgICAgICAuLi50aGlzLm1hcE5lc3RlZENoaWxkcmVuVG9Qcm9wcyhjaGlsZCwgbmVzdGVkQ2hpbGRyZW4pXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICB9XG4gIG1hcE9iamVjdFR5cGVDaGlsZHJlbihjaGlsZCwgbmV3UHJvcHMsIG5ld0NoaWxkUHJvcHMsIG5lc3RlZENoaWxkcmVuKSB7XG4gICAgc3dpdGNoIChjaGlsZC50eXBlKSB7XG4gICAgICBjYXNlIFwidGl0bGVcIiAvKiBUSVRMRSAqLzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5uZXdQcm9wcyxcbiAgICAgICAgICBbY2hpbGQudHlwZV06IG5lc3RlZENoaWxkcmVuLFxuICAgICAgICAgIHRpdGxlQXR0cmlidXRlczogeyAuLi5uZXdDaGlsZFByb3BzIH1cbiAgICAgICAgfTtcbiAgICAgIGNhc2UgXCJib2R5XCIgLyogQk9EWSAqLzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5uZXdQcm9wcyxcbiAgICAgICAgICBib2R5QXR0cmlidXRlczogeyAuLi5uZXdDaGlsZFByb3BzIH1cbiAgICAgICAgfTtcbiAgICAgIGNhc2UgXCJodG1sXCIgLyogSFRNTCAqLzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5uZXdQcm9wcyxcbiAgICAgICAgICBodG1sQXR0cmlidXRlczogeyAuLi5uZXdDaGlsZFByb3BzIH1cbiAgICAgICAgfTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubmV3UHJvcHMsXG4gICAgICAgICAgW2NoaWxkLnR5cGVdOiB7IC4uLm5ld0NoaWxkUHJvcHMgfVxuICAgICAgICB9O1xuICAgIH1cbiAgfVxuICBtYXBBcnJheVR5cGVDaGlsZHJlblRvUHJvcHMoYXJyYXlUeXBlQ2hpbGRyZW4sIG5ld1Byb3BzKSB7XG4gICAgbGV0IG5ld0ZsYXR0ZW5lZFByb3BzID0geyAuLi5uZXdQcm9wcyB9O1xuICAgIE9iamVjdC5rZXlzKGFycmF5VHlwZUNoaWxkcmVuKS5mb3JFYWNoKChhcnJheUNoaWxkTmFtZSkgPT4ge1xuICAgICAgbmV3RmxhdHRlbmVkUHJvcHMgPSB7XG4gICAgICAgIC4uLm5ld0ZsYXR0ZW5lZFByb3BzLFxuICAgICAgICBbYXJyYXlDaGlsZE5hbWVdOiBhcnJheVR5cGVDaGlsZHJlblthcnJheUNoaWxkTmFtZV1cbiAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ld0ZsYXR0ZW5lZFByb3BzO1xuICB9XG4gIHdhcm5PbkludmFsaWRDaGlsZHJlbihjaGlsZCwgbmVzdGVkQ2hpbGRyZW4pIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBWQUxJRF9UQUdfTkFNRVMuc29tZSgobmFtZSkgPT4gY2hpbGQudHlwZSA9PT0gbmFtZSksXG4gICAgICB0eXBlb2YgY2hpbGQudHlwZSA9PT0gXCJmdW5jdGlvblwiID8gYFlvdSBtYXkgYmUgYXR0ZW1wdGluZyB0byBuZXN0IDxIZWxtZXQ+IGNvbXBvbmVudHMgd2l0aGluIGVhY2ggb3RoZXIsIHdoaWNoIGlzIG5vdCBhbGxvd2VkLiBSZWZlciB0byBvdXIgQVBJIGZvciBtb3JlIGluZm9ybWF0aW9uLmAgOiBgT25seSBlbGVtZW50cyB0eXBlcyAke1ZBTElEX1RBR19OQU1FUy5qb2luKFxuICAgICAgICBcIiwgXCJcbiAgICAgICl9IGFyZSBhbGxvd2VkLiBIZWxtZXQgZG9lcyBub3Qgc3VwcG9ydCByZW5kZXJpbmcgPCR7Y2hpbGQudHlwZX0+IGVsZW1lbnRzLiBSZWZlciB0byBvdXIgQVBJIGZvciBtb3JlIGluZm9ybWF0aW9uLmBcbiAgICApO1xuICAgIGludmFyaWFudChcbiAgICAgICFuZXN0ZWRDaGlsZHJlbiB8fCB0eXBlb2YgbmVzdGVkQ2hpbGRyZW4gPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheShuZXN0ZWRDaGlsZHJlbikgJiYgIW5lc3RlZENoaWxkcmVuLnNvbWUoKG5lc3RlZENoaWxkKSA9PiB0eXBlb2YgbmVzdGVkQ2hpbGQgIT09IFwic3RyaW5nXCIpLFxuICAgICAgYEhlbG1ldCBleHBlY3RzIGEgc3RyaW5nIGFzIGEgY2hpbGQgb2YgPCR7Y2hpbGQudHlwZX0+LiBEaWQgeW91IGZvcmdldCB0byB3cmFwIHlvdXIgY2hpbGRyZW4gaW4gYnJhY2VzPyAoIDwke2NoaWxkLnR5cGV9PntcXGBcXGB9PC8ke2NoaWxkLnR5cGV9PiApIFJlZmVyIHRvIG91ciBBUEkgZm9yIG1vcmUgaW5mb3JtYXRpb24uYFxuICAgICk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgbWFwQ2hpbGRyZW5Ub1Byb3BzKGNoaWxkcmVuLCBuZXdQcm9wcykge1xuICAgIGxldCBhcnJheVR5cGVDaGlsZHJlbiA9IHt9O1xuICAgIFJlYWN0My5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCAoY2hpbGQpID0+IHtcbiAgICAgIGlmICghY2hpbGQgfHwgIWNoaWxkLnByb3BzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgY2hpbGRyZW46IG5lc3RlZENoaWxkcmVuLCAuLi5jaGlsZFByb3BzIH0gPSBjaGlsZC5wcm9wcztcbiAgICAgIGNvbnN0IG5ld0NoaWxkUHJvcHMgPSBPYmplY3Qua2V5cyhjaGlsZFByb3BzKS5yZWR1Y2UoKG9iaiwga2V5KSA9PiB7XG4gICAgICAgIG9ialtIVE1MX1RBR19NQVBba2V5XSB8fCBrZXldID0gY2hpbGRQcm9wc1trZXldO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfSwge30pO1xuICAgICAgbGV0IHsgdHlwZSB9ID0gY2hpbGQ7XG4gICAgICBpZiAodHlwZW9mIHR5cGUgPT09IFwic3ltYm9sXCIpIHtcbiAgICAgICAgdHlwZSA9IHR5cGUudG9TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMud2Fybk9uSW52YWxpZENoaWxkcmVuKGNoaWxkLCBuZXN0ZWRDaGlsZHJlbik7XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcIlN5bWJvbChyZWFjdC5mcmFnbWVudClcIiAvKiBGUkFHTUVOVCAqLzpcbiAgICAgICAgICBuZXdQcm9wcyA9IHRoaXMubWFwQ2hpbGRyZW5Ub1Byb3BzKG5lc3RlZENoaWxkcmVuLCBuZXdQcm9wcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJsaW5rXCIgLyogTElOSyAqLzpcbiAgICAgICAgY2FzZSBcIm1ldGFcIiAvKiBNRVRBICovOlxuICAgICAgICBjYXNlIFwibm9zY3JpcHRcIiAvKiBOT1NDUklQVCAqLzpcbiAgICAgICAgY2FzZSBcInNjcmlwdFwiIC8qIFNDUklQVCAqLzpcbiAgICAgICAgY2FzZSBcInN0eWxlXCIgLyogU1RZTEUgKi86XG4gICAgICAgICAgYXJyYXlUeXBlQ2hpbGRyZW4gPSB0aGlzLmZsYXR0ZW5BcnJheVR5cGVDaGlsZHJlbihcbiAgICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgICAgYXJyYXlUeXBlQ2hpbGRyZW4sXG4gICAgICAgICAgICBuZXdDaGlsZFByb3BzLFxuICAgICAgICAgICAgbmVzdGVkQ2hpbGRyZW5cbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIG5ld1Byb3BzID0gdGhpcy5tYXBPYmplY3RUeXBlQ2hpbGRyZW4oY2hpbGQsIG5ld1Byb3BzLCBuZXdDaGlsZFByb3BzLCBuZXN0ZWRDaGlsZHJlbik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMubWFwQXJyYXlUeXBlQ2hpbGRyZW5Ub1Byb3BzKGFycmF5VHlwZUNoaWxkcmVuLCBuZXdQcm9wcyk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4sIC4uLnByb3BzIH0gPSB0aGlzLnByb3BzO1xuICAgIGxldCBuZXdQcm9wcyA9IHsgLi4ucHJvcHMgfTtcbiAgICBsZXQgeyBoZWxtZXREYXRhIH0gPSBwcm9wcztcbiAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgIG5ld1Byb3BzID0gdGhpcy5tYXBDaGlsZHJlblRvUHJvcHMoY2hpbGRyZW4sIG5ld1Byb3BzKTtcbiAgICB9XG4gICAgaWYgKGhlbG1ldERhdGEgJiYgIShoZWxtZXREYXRhIGluc3RhbmNlb2YgSGVsbWV0RGF0YSkpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBoZWxtZXREYXRhO1xuICAgICAgaGVsbWV0RGF0YSA9IG5ldyBIZWxtZXREYXRhKGRhdGEuY29udGV4dCwgdHJ1ZSk7XG4gICAgICBkZWxldGUgbmV3UHJvcHMuaGVsbWV0RGF0YTtcbiAgICB9XG4gICAgcmV0dXJuIGhlbG1ldERhdGEgPyAvKiBAX19QVVJFX18gKi8gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoSGVsbWV0RGlzcGF0Y2hlciwgeyAuLi5uZXdQcm9wcywgY29udGV4dDogaGVsbWV0RGF0YS52YWx1ZSB9KSA6IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDMuY3JlYXRlRWxlbWVudChDb250ZXh0LkNvbnN1bWVyLCBudWxsLCAoY29udGV4dCkgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0My5jcmVhdGVFbGVtZW50KEhlbG1ldERpc3BhdGNoZXIsIHsgLi4ubmV3UHJvcHMsIGNvbnRleHQgfSkpO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgSGVsbWV0LFxuICBIZWxtZXREYXRhLFxuICBIZWxtZXRQcm92aWRlclxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-helmet-async/lib/index.esm.js\n");

/***/ })

};
;